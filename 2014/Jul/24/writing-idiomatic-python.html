<!DOCTYPE html><title>Writing Idiomatic Python - manhhomienbienthuy's space</title> <meta charset=utf-8> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=apple-touch-icon href=/theme/images/icon-touch.png> <link rel=icon sizes=192x192 href=/theme/images/icon-touch.png> <link rel="shortcut icon" href=/theme/images/favicon.ico> <link rel=author href=/humans.txt> <meta name=msapplication-TileImage content=/theme/images/icon-tile.png> <meta name=twitter:dnt content=on> <meta name=Author content=manhhomienbienthuy> <meta name=rating content=general> <meta name=twitter:card content=product> <meta name=twitter:site content=@_naa_4f> <meta name=twitter:creator content=@_naa_4f> <link href=/feeds/all.atom.xml type=application/atom+xml rel=alternate title="manhhomienbienthuy's space Full Atom Feed"> <meta name=description content idiomatic python&quot; có nghĩa là viết code theo cách mà cộng đồng python cho rằng code nên được viết như vậy. ai là người quyết định code nên được viết như thế nào? tất nhiên là tất cả những người phát triển python, thông qua code của họ đã làm …&quot;> <meta name=keywords content="Python, coding style, idiomatic, Pythonic, blog, naa, manhhomienbienthuy, pelican, static site generator"> <meta name=twitter:title content="Writing Idiomatic Python - manhhomienbienthuy's space"> <meta name=twitter:description content idiomatic python&quot; có nghĩa là viết code theo cách mà cộng đồng python cho rằng code nên được viết như vậy. ai là người quyết định code nên được viết như thế nào? tất nhiên là tất cả những người phát triển python, thông qua code của họ đã làm …&quot;> <meta name=twitter:image content=/https://i.imgur.com/pwz46vT.png> <link rel=stylesheet href=//cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css> <link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css> <link rel=stylesheet href=/theme/css/vpyeu.min.css?5d2c7d5e> <header> <div class=navbar> <div class=wrapper> <div class=nav-menu> <div class=menu-toggle> <i class="fa fa-reorder"></i> </div> <ul class=menus> <li><a href=/ >Home</a> <li><a href=/category/general.html> General <li><a href=/category/life.html> Life <li><a href=/category/programming.html class=current> Programming <li><a href=/category/travel.html> Travel </ul> </div><div class="right links"> <ul> <li> <a href=https://twitter.com/_naa_4f target=_blank> <i class="fa fa-twitter"></i> </a> <li> <a href=https://instagram.com/manhhomienbienthuy/ target=_blank> <i class="fa fa-instagram"></i> </a> <li> <a href=https://www.facebook.com/manhhomienbienthuy target=_blank> <i class="fa fa-facebook"></i> </a> <li> <a href=https://github.com/manhhomienbienthuy target=_blank> <i class="fa fa-github"></i> </a> <li> <a href=/feeds/all.atom.xml target=_blank> <i class="fa fa-rss"></i> </a> </ul> </div> </div> </div><noscript> <div class="warning head-warn"> <div class=wrapper> <p><strong>Notice:</strong> While JavaScript is not essential for this website, your interaction with the content will be limited. Please turn JavaScript on for the full experience. </div> </div> </noscript><div class=banner> <div class=wrapper> <a href=/ > <img alt="manhhomienbienthuy's space" src=/theme/images/logo.png> </a> </div> </div></header> <main> <div class=wrapper> <div class=main-wrapper> <div class=entry> <div class=entry-detail> <div class=post> <h1 class=title> Writing Idiomatic Python </h1> <div class=meta> Posted in <a href=/category/programming.html>Programming</a> on July 24, 2014 by <a href=/pages/about-me.html>manhhomienbienthuy</a> <span class=right> <i class="fa fa-comments"></i> <a href=#disqus_thread data-disqus-identifier=/2014/Jul/24/writing-idiomatic-python.html> Comments </a> </span> </div> <div class=post-body> <img src=https://i.imgur.com/pwz46vT.png alt="Writing Idiomatic Python"> <p>"Idiomatic python" có nghĩa là viết code theo cách mà cộng đồng Python cho rằng code nên được viết như vậy. Ai là người quyết định code nên được viết như thế nào? Tất nhiên là tất cả những người phát triển Python, thông qua code của họ đã làm nên cái gì gọi là idiomatic. Đó cũng là nội dung sẽ được trình bày trong bài viết này. Người thực sự quyết định trong một số trường hợp là BDFL (Guido) hoặc PEP.</p> <p>Bạn chưa biết gì về pythonic code? Không sao, trong bài viết này sẽ trình bày cho bạn một số khái niệm cơ bản, giúp chúng ta viết code Python một cách chuyên nghiệp và "Pythonic" nhất.</p> <h1 id=cau-truc-ieu-khien-va-ham>Cấu trúc điều khiển và hàm<a class=headerlink href=#cau-truc-ieu-khien-va-ham title="Permanent link">&para;</a></h1> <h2 id=lenh-if>Lệnh <code>if</code><a class=headerlink href=#lenh-if title="Permanent link">&para;</a></h2> <h3 id=tranh-viec-so-sanh-truc-tiep-voi-true-false-hoac-none>Tránh việc so sánh trực tiếp với <code>True</code>, <code>False</code> hoặc <code>None</code><a class=headerlink href=#tranh-viec-so-sanh-truc-tiep-voi-true-false-hoac-none title="Permanent link">&para;</a></h3> <p>Với mỗi đối tượng, luôn luôn có sẵn hoặc bạn có thể định nghĩa "đúng-sai" cho nó. Việc kiểm tra một điều kiện là đúng hay sai phụ thuộc vào định nghĩa đúng-sai của những đối tượng này. Việc định nghĩa đúng-sai rất đơn giản, tất cả những điều sau đều được coi là sai (<code>False</code>)</p> <ul> <li><code>None</code></li> <li><code>False</code></li> <li><code>0</code> cho dữ liệu số</li> <li>một chuỗi rỗng (xâu rỗng, list rỗng, tuple rỗng, set rỗng)</li> <li>dictionary rỗng</li> <li>kết quả <code>0</code> hoặc <code>None</code> được trả về bởi các phương thức <code>__len__</code> hoặc <code>__nonzero__</code></li> </ul> <p>Điều kiện cuối cùng, cho phép chúng ta có thể tự định nghĩa đúng-sai cho các đối tượng thông qua các phương thức <code>__len__</code> hoặc <code>__nonzero__</code>.</p> <p>Tất cả các kết quả khác với kết quả ở trên đều được coi là đúng (<code>True</code>). Câu lệnh <code>if</code> sử dụng đúng-sai và bạn nên sử dụng đúng-sai của chính các đối tượng. Ví dụ, thay vì so sánh:</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</pre></div> <p>Bạn chỉ cần kiểm tra như sau là đủ:</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=n>foo</span><span class=p>:</span>
</pre></div> <p>Có nhiều lý do để làm việc này. Lý do dễ nhìn thấy nhất là cho dù code của bạn có thay đổi, <code>foo</code> có thể nhận giá trị <code>int</code> thay vì chỉ <code>True</code> hay <code>False</code> thì code của bạn vẫn hoạt động bình thường.</p> <p>Ở một mức độ sâu hơn, thì lý do để làm việc này liên quan đến <code>equality</code> và <code>identity</code>. Sử dụng phép so sánh <code>==</code> sẽ so sánh xem hai đối tượng có cùng giá trị hay không (được định nghĩa ở thuộc tính <code>_eq</code>). Sử dụng <code>is</code> sẽ so sánh xem <strong>hai đối tượng có phải là một hay không</strong>.</p> <blockquote> <p>Lưu ý rằng, có một số trường hợp, <code>is</code> hoạt động giống như là <code>==</code>, tuy nhiên đây chỉ là những trường hợp đặc biệt và bạn không nên tin tưởng chúng.</p> </blockquote> <p>Kết quả là bạn nên tránh việc so sánh trực tiếp với những giá trị như <code>False</code>, <code>None</code> hay những chuỗi rỗng như <code>[]</code>, <code>{}</code>, <code>()</code>. Nếu một biến <code>my_list</code> mà rỗng thì điều kiện <code>if my_list:</code> sẽ cho kết quả là <code>False</code>.</p> <p>Tuy nhiên, có một số trường hợp, việc so sánh với <code>None</code> được <strong>recommend</strong> nhưng không bắt buộc. Một hàm cần kiểm tra xem tham số có giá trị mặc định là <code>None</code> đã thực sự được truyền giá trị vào hay chưa, thì việc so sánh với <code>None</code> là cần thiết. Ví dụ:</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>insert_value</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>position</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Inserts a value into my container, optionally at the</span>
<span class=sd>    specified position&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>possition</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=o>....</span>
</pre></div> <p>Điều gì xảy ra nếu chúng ta sử dụng <code>if position:</code>? Nếu một người muốn điền giá trị vào vị trí <code>0</code> thì hàm của chúng ta sẽ hoạt động như là giá trị position chưa được truyền vào vì <code>0</code> cũng được coi là sai.</p> <p>Lưu ý rằng, ở ví dụ trên chúng ta sử dụng <code>is not</code>. Việc so sánh với <code>None</code> (singleton trong Python) luôn luôn phải sử dụng <code>is</code> hoặc <code>is not</code> chứ không sử dụng <code>==</code> (<a href=https://www.python.org/dev/peps/pep-0008/#programming-recommendations>PEP 8</a>).</p> <p>Hãy sử dụng giá trị đúng-sai của các đối tượng trong các lệnh kiểm tra điều kiện.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>number_of_evil_robots_attacking</span><span class=p>():</span>
    <span class=k>return</span> <span class=mi>10</span>
<span class=k>def</span> <span class=nf>should_raise_shields</span><span class=p>():</span>
    <span class=c1># &quot;We only raise Shields when one or more giant robots attack,</span>
    <span class=c1># so I can just return that value...&quot;</span>
    <span class=k>return</span> <span class=n>number_of_evil_robots_attacking</span><span class=p>()</span>
<span class=k>if</span> <span class=n>should_raise_shields</span><span class=p>()</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
    <span class=n>raise_shields</span><span class=p>()</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Shields raised&#39;</span><span class=p>)</span>
<span class=k>else</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Safe! No giant robots attacking&#39;</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>number_of_evil_robots_attacking</span><span class=p>():</span>
    <span class=k>return</span> <span class=mi>10</span>
<span class=k>def</span> <span class=nf>should_raise_shields</span><span class=p>():</span>
    <span class=c1># &quot;We only raise Shields when one or more giant robots attack,</span>
    <span class=c1># so I can just return that value...&quot;</span>
    <span class=k>return</span> <span class=n>number_of_evil_robots_attacking</span><span class=p>()</span>
<span class=k>if</span> <span class=n>should_raise_shields</span><span class=p>():</span>
    <span class=n>raise_shields</span><span class=p>()</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Shields raised&#39;</span><span class=p>)</span>
<span class=k>else</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Safe! No giant robots attacking&#39;</span><span class=p>)</span>
</pre></div> <h3 id=tranh-viec-lap-i-lap-lai-bien-trong-lenh-if>Tránh việc lặp đi lặp lại biến trong lệnh <code>if</code><a class=headerlink href=#tranh-viec-lap-i-lap-lai-bien-trong-lenh-if title="Permanent link">&para;</a></h3> <p>Khi bạn muốn kiểm tra một biến với nhiều giá trị trong một lệnh, việc lặp đi lặp lại biến trong phải là một cách hay. Hãy sử dụng một "iterable" sẽ giúp code của bạn sáng sủa và dễ đọc hơn.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>is_generic_name</span> <span class=o>=</span> <span class=kc>False</span>
<span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Tom&#39;</span>
<span class=k>if</span> <span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;Tom&#39;</span> <span class=ow>or</span> <span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;Dick&#39;</span> <span class=ow>or</span> <span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;Harry&#39;</span><span class=p>:</span>
    <span class=n>is_generic_name</span> <span class=o>=</span> <span class=kc>True</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Tom&#39;</span>
<span class=n>is_generic_name</span> <span class=o>=</span> <span class=n>name</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Dick&#39;</span><span class=p>,</span> <span class=s1>&#39;Harry&#39;</span><span class=p>)</span>
</pre></div> <h3 id=tranh-viec-su-dung-lenh-con-cua-cau-ieu-kien-cung-dong-voi-dau-hai-cham>Tránh việc sử dụng lệnh con của câu điều kiện cùng dòng với dấu hai chấm<a class=headerlink href=#tranh-viec-su-dung-lenh-con-cua-cau-ieu-kien-cung-dong-voi-dau-hai-cham title="Permanent link">&para;</a></h3> <p>Hãy sử dụng indent để phân biệt các khối lệnh (giống như code ở tất cả những chỗ khác). Điều đó giúp chúng ta dễ dàng hiểu được những gì được gọi ở các điều kiện khác nhau. Các lệnh <code>if</code>, <code>elif</code> hay <code>else</code> nên ở riêng một dòng và không có lệnh nào ở sau <code>:</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Jeff&#39;</span>
<span class=n>address</span> <span class=o>=</span> <span class=s1>&#39;New York, NY&#39;</span>
<span class=k>if</span> <span class=n>name</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>address</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Jeff&#39;</span>
<span class=n>address</span> <span class=o>=</span> <span class=s1>&#39;New York, NY&#39;</span>
<span class=k>if</span> <span class=n>name</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>address</span><span class=p>)</span>
</pre></div> <h2 id=vong-lap-for>Vòng lặp <code>for</code><a class=headerlink href=#vong-lap-for title="Permanent link">&para;</a></h2> <h3 id=su-dung-ham-enumerate-thay-vi-tao-mot-bien-index>Sử dụng hàm <code>enumerate</code> thay vì tạo một biến "index"<a class=headerlink href=#su-dung-ham-enumerate-thay-vi-tao-mot-bien-index title="Permanent link">&para;</a></h3> <p>Lập trình viên từ những ngôn ngữ khác thường tạo ra một biến "index" cho vòng lặp. Ví dụ trong ngôn ngữ C.</p> <div class=codehilite><pre><span></span><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
<span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>container</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
<span class=p>{</span>
    <span class=c1>// Do stuff</span>
<span class=p>}</span>
</pre></div> <p>Tuy nhiên Python có hàm <code>enumerate</code> có thể giúp chúng ta làm việc đó rất dễ dàng:</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>my_container</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Larry&#39;</span><span class=p>,</span> <span class=s1>&#39;Moe&#39;</span><span class=p>,</span> <span class=s1>&#39;Curly&#39;</span><span class=p>]</span>
<span class=n>index</span> <span class=o>=</span> <span class=mi>0</span>
<span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>my_container</span><span class=p>:</span>
    <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;</span><span class=si>{}</span><span class=s1> </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>index</span><span class=p>,</span> <span class=n>element</span><span class=p>))</span>
        <span class=n>index</span> <span class=o>+=</span> <span class=mi>1</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>my_container</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Larry&#39;</span><span class=p>,</span> <span class=s1>&#39;Moe&#39;</span><span class=p>,</span> <span class=s1>&#39;Curly&#39;</span><span class=p>]</span>
<span class=k>for</span> <span class=n>index</span><span class=p>,</span> <span class=n>element</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>my_container</span><span class=p>):</span>
    <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;</span><span class=si>{}</span><span class=s1> </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>index</span><span class=p>,</span> <span class=n>element</span><span class=p>))</span>
</pre></div> <h3 id=su-dung-tu-khoa-in-e-duyet-iterable>Sử dụng từ khoá <code>in</code> để duyệt "iterable"<a class=headerlink href=#su-dung-tu-khoa-in-e-duyet-iterable title="Permanent link">&para;</a></h3> <p>Lập trình viên từ các ngôn ngữ thiếu cấu trúc <code>for_each</code> thường sử dụng index để duyệt qua các phần tử. Tuy nhiên Python có từ khoá <code>in</code> giúp chúng ta làm được việc này dễ hơn rất nhiều.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>my_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Larry&#39;</span><span class=p>,</span> <span class=s1>&#39;Moe&#39;</span><span class=p>,</span> <span class=s1>&#39;Curly&#39;</span><span class=p>]</span>
<span class=n>index</span> <span class=o>=</span> <span class=mi>0</span>
<span class=k>while</span> <span class=n>index</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>my_list</span><span class=p>):</span>
    <span class=nb>print</span> <span class=p>(</span><span class=n>my_list</span><span class=p>[</span><span class=n>index</span><span class=p>])</span>
    <span class=n>index</span> <span class=o>+=</span> <span class=mi>1</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>my_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Larry&#39;</span><span class=p>,</span> <span class=s1>&#39;Moe&#39;</span><span class=p>,</span> <span class=s1>&#39;Curly&#39;</span><span class=p>]</span>
<span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>my_list</span><span class=p>:</span>
    <span class=nb>print</span> <span class=p>(</span><span class=n>element</span><span class=p>)</span>
</pre></div> <h3 id=su-dung-else-e-thuc-thi-code-sau-khi-vong-lap-for-ket-thuc>Sử dụng <code>else</code> để thực thi code sau khi vòng lặp <code>for</code> kết thúc<a class=headerlink href=#su-dung-else-e-thuc-thi-code-sau-khi-vong-lap-for-ket-thuc title="Permanent link">&para;</a></h3> <p>Một điều khá ít người biết, đó là vòng lặp <code>for</code> của Python cũng có thể có mệnh đề <code>else</code>. Mệnh đề <code>else</code> sẽ được thực thi sau khi vòng lặp kết thúc, trừ khi nó được ngắt bằng lệnh <code>break</code>. Điều này cho phép bạn kiểm tra điều kiện bên trong vòng lặp <code>for</code>, <code>break</code> nếu điều kiện thoả mãn với một phần tử nào đó và câu lệnh <code>else</code> để thực thi code nếu không có phần tử nào thoả mãn điều kiện. Việc này hoàn toàn không cần đến một flag để lưu trữ việc điều kiện có được thoả mãn hay không.</p> <p>Trong tình huống dưới đây, chúng ta cần kiểm tra email được các user đăng ký có gì bất thường hay không? Code idiomatic dễ hiểu hơn rất nhiều và không cần dùng đến flag <code>has_malformed_email_address</code>. Đây cũng là ví dụ rất tốt để làm quen với <code>for...else</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>get_all_users</span><span class=p>():</span>
    <span class=n>has_malformed_email_address</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;Checking </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>user</span><span class=p>))</span>
    <span class=k>for</span> <span class=n>email_address</span> <span class=ow>in</span> <span class=n>user</span><span class=o>.</span><span class=n>get_all_email_addresses</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>email_is_malformed</span><span class=p>(</span><span class=n>email_address</span><span class=p>):</span>
            <span class=n>has_malformed_email_address</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;Has a malformed email address!&#39;</span><span class=p>)</span>
            <span class=k>break</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>has_malformed_email_address</span><span class=p>:</span>
        <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;All email addresses are valid!&#39;</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>get_all_users</span><span class=p>():</span>
    <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;Checking </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>user</span><span class=p>))</span>
    <span class=k>for</span> <span class=n>email_address</span> <span class=ow>in</span> <span class=n>user</span><span class=o>.</span><span class=n>get_all_email_addresses</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>email_is_malformed</span><span class=p>(</span><span class=n>email_address</span><span class=p>):</span>
            <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;Has a malformed email address!&#39;</span><span class=p>)</span>
            <span class=k>break</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=nb>print</span> <span class=p>(</span><span class=s1>&#39;All email addresses are valid!&#39;</span><span class=p>)</span>
</pre></div> <h2 id=ham>Hàm<a class=headerlink href=#ham title="Permanent link">&para;</a></h2> <h3 id=tranh-su-dung-va-lam-gia-tri-mac-inh-cho-tham-so>Tránh sử dụng <code>''</code>, <code>[]</code> và <code>{}</code> làm giá trị mặc định cho tham số<a class=headerlink href=#tranh-su-dung-va-lam-gia-tri-mac-inh-cho-tham-so title="Permanent link">&para;</a></h3> <p>Việc này đã được đề cập khá nhiều trong các tutorial của Python. Nói ngắn gọn lại là chúng ta nên sử dụng <code>names=None</code> thay vì <code>names=[]</code> làm giá trị mặc định của các tham số. Minh hoạ dưới đây sẽ giải thích rõ hơn tại sao?</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=c1># The default value [of a function] is evaluated only once.</span>
<span class=c1># This makes a difference when the default is a mutable object</span>
<span class=c1># such as a list, dictionary, or instances of most classes.  For</span>
<span class=c1># example, the following function accumulates the arguments</span>
<span class=c1># passed to it on subsequent calls.</span>
<span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>L</span><span class=o>=</span><span class=p>[]):</span>
    <span class=n>L</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>L</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<span class=c1># This will print</span>
<span class=c1>#</span>
<span class=c1># [1]</span>
<span class=c1># [1, 2]</span>
<span class=c1># [1, 2, 3]</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=c1># If you don&#39;t want the default to be shared between subsequent</span>
<span class=c1># calls, you can write the function like this instead:</span>
<span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>L</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>L</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>L</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>L</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>L</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<span class=c1># This will print</span>
<span class=c1># [1]</span>
<span class=c1># [2]</span>
<span class=c1># [3]</span>
</pre></div> <h3 id=su-dung-args-va-kwargs-e-nhan-tham-so-voi-so-luong-tuy-y>Sử dụng <code>*args</code> và <code>**kwargs</code> để nhận tham số với số lượng tùy ý<a class=headerlink href=#su-dung-args-va-kwargs-e-nhan-tham-so-voi-so-luong-tuy-y title="Permanent link">&para;</a></h3> <p>Nhiều khi các hàm cần nhận vào nhiều tham số với số lượng không biết trước, hàm có thể chỉ sử dụng một vài tham số và truyền tham số cho các hàm tiếp theo. Việc sử dụng <code>*args</code> và <code>**kwargs</code> cho phép chúng ta tạo ra một hàm có thể nhận tham số với số lượng tuỳ ý.</p> <p>Việc này cũng rất hữu ích khi chúng ta phát triển những API nhưng cần tương thích ngược với những phiên bản cũ. Nếu hàm chấp nhận tham số tuỳ ý, chúng ta có thể thêm vào các tham số mới mà không làm ảnh hưởng đến những phiên bản cũ sử dụng ít tham số hơn. Nếu có tài liệu tốt, mọi thứ sẽ rất trơn tru.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>make_api_call</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>baz</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;Unicorn&#39;</span><span class=p>,</span> <span class=s1>&#39;Oven&#39;</span><span class=p>,</span> <span class=s1>&#39;New York&#39;</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>foo</span><span class=p>(</span><span class=n>bar</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>bar</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span>
<span class=c1># I need to add another parameter to `make_api_call`</span>
<span class=c1># without breaking everyone&#39;s existing code.</span>
<span class=c1># I have two options...</span>
<span class=k>def</span> <span class=nf>so_many_options</span><span class=p>():</span>
<span class=c1># I can tack on new parameters, but only if I make</span>
<span class=c1># all of them optional...</span>
    <span class=k>def</span> <span class=nf>make_api_call</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
                      <span class=n>baz_coefficient</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>quux_capacitor</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
                      <span class=n>bar_has_hopped</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>true</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>false</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
                      <span class=n>file_not_found</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=c1># ... and so on ad infinitum</span>
        <span class=k>return</span> <span class=n>file_not_found</span>
<span class=k>def</span> <span class=nf>version_graveyard</span><span class=p>():</span>
        <span class=c1># ... or I can create a new function each time the signature</span>
        <span class=c1># changes.</span>
    <span class=k>def</span> <span class=nf>make_api_call_v2</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>make_api_call</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>)</span> <span class=o>-</span> <span class=n>qux</span>
    <span class=k>def</span> <span class=nf>make_api_call_v3</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>foo_polarity</span> <span class=o>!=</span> <span class=s1>&#39;reversed&#39;</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>make_api_call_v2</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>def</span> <span class=nf>make_api_call_v4</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>make_api_call_v3</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>)</span> <span class=o>*</span> <span class=n>baz_coefficient</span>
    <span class=k>def</span> <span class=nf>make_api_call_v5</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span>
                <span class=n>baz_coefficient</span><span class=p>,</span> <span class=n>quux_capacitor</span><span class=p>):</span>
        <span class=c1># I don&#39;t need &#39;foo&#39;, &#39;bar&#39;, or &#39;baz&#39; anymore, but I have to</span>
        <span class=c1># keep supporting them...</span>
        <span class=k>return</span> <span class=n>baz_coefficient</span> <span class=o>*</span> <span class=n>quux_capacitor</span>
    <span class=k>def</span> <span class=nf>make_api_call_v6</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>,</span>
                <span class=n>quux_capacitor</span><span class=p>,</span> <span class=n>bar_has_hopped</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>bar_has_hopped</span><span class=p>:</span>
            <span class=n>baz_coefficient</span> <span class=o>*=</span> <span class=o>-</span><span class=mi>1</span>
            <span class=k>return</span> <span class=n>make_api_call_v5</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span>
                                    <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>,</span>
                                    <span class=n>quux_capacitor</span><span class=p>)</span>
    <span class=k>def</span> <span class=nf>make_api_call_v7</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>,</span>
                <span class=n>quux_capacitor</span><span class=p>,</span> <span class=n>bar_has_hopped</span><span class=p>,</span> <span class=n>true</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>true</span>
    <span class=k>def</span> <span class=nf>make_api_call_v8</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>,</span>
                <span class=n>quux_capacitor</span><span class=p>,</span> <span class=n>bar_has_hopped</span><span class=p>,</span> <span class=n>true</span><span class=p>,</span> <span class=n>false</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>false</span>
    <span class=k>def</span> <span class=nf>make_api_call_v9</span><span class=p>(</span>
                <span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span> <span class=n>foo_polarity</span><span class=p>,</span> <span class=n>baz_coefficient</span><span class=p>,</span>
                <span class=n>quux_capacitor</span><span class=p>,</span> <span class=n>bar_has_hopped</span><span class=p>,</span>
                <span class=n>true</span><span class=p>,</span> <span class=n>false</span><span class=p>,</span> <span class=n>file_not_found</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>file_not_found</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>make_api_call</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>baz</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;Unicorn&#39;</span><span class=p>,</span> <span class=s1>&#39;Oven&#39;</span><span class=p>,</span> <span class=s1>&#39;New York&#39;</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>foo</span><span class=p>(</span><span class=n>bar</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>bar</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span>
<span class=c1># I need to add another parameter to `make_api_call`</span>
<span class=c1># without breaking everyone&#39;s existing code.</span>
<span class=c1># Easy...</span>
<span class=k>def</span> <span class=nf>new_hotness</span><span class=p>():</span>
    <span class=k>def</span> <span class=nf>make_api_call</span><span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Now I can accept any type and number of arguments</span>
        <span class=c1># without worrying about breaking existing code.</span>
        <span class=n>baz_coefficient</span> <span class=o>=</span> <span class=n>kwargs</span><span class=p>[</span><span class=s1>&#39;the_baz&#39;</span><span class=p>]</span>
        <span class=c1># I can even forward my args to a different function without</span>
        <span class=c1># knowing their contents!</span>
        <span class=k>return</span> <span class=n>baz_coefficient</span> <span class=ow>in</span> <span class=n>new_function</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</pre></div> <h1 id=lam-viec-voi-du-lieu>Làm việc với dữ liệu<a class=headerlink href=#lam-viec-voi-du-lieu title="Permanent link">&para;</a></h1> <h2 id=list>List<a class=headerlink href=#list title="Permanent link">&para;</a></h2> <h3 id=su-dung-list-comprehension-e-tao-list-moi-tu-list-a-co>Sử dụng list comprehension để tạo list mới từ list đã có<a class=headerlink href=#su-dung-list-comprehension-e-tao-list-moi-tu-list-a-co title="Permanent link">&para;</a></h3> <p>Sử dụng list comprehension sẽ làm gắn gọn việc tạo list mới từ những list đã có. Điều này đặc biệt đúng nếu chúng ta vừa chuyển thể list vừa kiểm tra một số điều kiện.</p> <p>Ngoài ra có nhiều lợi ích từ việc sử dụng list comprehension (và biến thể của nó, biểu thức generator) liên quan đến hiệu suất bởi vì trình thông dịch đã được tối ưu hoá cho việc này.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>some_other_list</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=n>some_list</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
<span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>some_other_list</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>is_prime</span><span class=p>(</span><span class=n>element</span><span class=p>):</span>
        <span class=n>some_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>element</span> <span class=o>+</span> <span class=mi>5</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>some_other_list</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=n>some_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>element</span> <span class=o>+</span> <span class=mi>5</span>
             <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>some_other_list</span>
             <span class=k>if</span> <span class=n>is_prime</span><span class=p>(</span><span class=n>element</span><span class=p>)]</span>
</pre></div> <h3 id=su-dung-toan-tu-ai-dien-cho-phan-con-lai-cua-list>Sử dụng toán tử <code>*</code> đại diện cho "phần còn lại" của list<a class=headerlink href=#su-dung-toan-tu-ai-dien-cho-phan-con-lai-cua-list title="Permanent link">&para;</a></h3> <p>Rất nhiều trường hợp, nhất là với những tham số tuỳ ý của một hàm, chúng ta cần lấy ra phần tử đầu tiên (hoặc cuối cùng) của list và giữ nguyên phần còn lại. Python 2 không có cách dễ dàng để làm việc này ngoài cách cắt list ra như ví dụ dưới đây. Nhưng Python 3 có toán tử <code>*</code> giúp chúng ta trong trường hợp như vậy.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>some_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>]</span>
<span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>second</span><span class=p>,</span> <span class=n>rest</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=mi>2</span><span class=p>:]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>rest</span><span class=p>)</span>
<span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>middle</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>middle</span><span class=p>)</span>
<span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>penultimate</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span><span class=p>[:</span><span class=o>-</span><span class=mi>2</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=o>-</span><span class=mi>2</span><span class=p>],</span> <span class=n>some_list</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>head</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>some_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>]</span>
<span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>second</span><span class=p>,</span> <span class=o>*</span><span class=n>rest</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span>
<span class=nb>print</span><span class=p>(</span><span class=n>rest</span><span class=p>)</span>
<span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=o>*</span><span class=n>middle</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span>
<span class=nb>print</span><span class=p>(</span><span class=n>middle</span><span class=p>)</span>
<span class=p>(</span><span class=o>*</span><span class=n>head</span><span class=p>,</span> <span class=n>penultimate</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=o>=</span> <span class=n>some_list</span>
<span class=nb>print</span><span class=p>(</span><span class=n>head</span><span class=p>)</span>
</pre></div> <h2 id=dictionary>Dictionary<a class=headerlink href=#dictionary title="Permanent link">&para;</a></h2> <h3 id=su-dung-tham-so-default-cua-dicget-e-at-gia-tri-mac-inh>Sử dụng tham số <code>default</code> của <code>dic.get</code> để đặt giá trị mặc định<a class=headerlink href=#su-dung-tham-so-default-cua-dicget-e-at-gia-tri-mac-inh title="Permanent link">&para;</a></h3> <p>Tham số <code>default</code> của <code>dic.get</code> thường xuyên bị bỏ quên. Nếu không sử dụng tham số này (hoặc class <code>collections.defaultdict</code>) code của bạn sẽ khá rắc rối với một vài lệnh <code>if</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>log_severity</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>if</span> <span class=s1>&#39;severity&#39;</span> <span class=ow>in</span> <span class=n>configuration</span><span class=p>:</span>
    <span class=n>log_severity</span> <span class=o>=</span> <span class=n>configuration</span><span class=p>[</span><span class=s1>&#39;severity&#39;</span><span class=p>]</span>
<span class=k>else</span><span class=p>:</span>
    <span class=n>log_severity</span> <span class=o>=</span> <span class=s1>&#39;Info&#39;</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>log_severity</span> <span class=o>=</span> <span class=n>configuration</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;severity&#39;</span><span class=p>,</span> <span class=s1>&#39;Info&#39;</span><span class=p>)</span>
</pre></div> <h3 id=su-dung-dict-comprehension-e-xay-dung-dict-ro-rang-va-hieu-qua>Sử dụng dict comprehension để xây dựng dict rõ ràng và hiệu quả<a class=headerlink href=#su-dung-dict-comprehension-e-xay-dung-dict-ro-rang-va-hieu-qua title="Permanent link">&para;</a></h3> <p>List comprehension của Python thường được biết đến nhiều hơn là dict comprehension. Mục đích của chúng giống nhau: đó là xây dựng dict mới từ dict cũ một cách dễ dàng với cú pháp "comprehension".</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>user_email</span> <span class=o>=</span> <span class=p>{}</span>
<span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>users_list</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>:</span>
        <span class=n>user_email</span><span class=p>[</span><span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>user_email</span> <span class=o>=</span> <span class=p>{</span><span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>:</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span>
              <span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>users_list</span> <span class=k>if</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>}</span>
</pre></div> <h2 id=string>String<a class=headerlink href=#string title="Permanent link">&para;</a></h2> <h3 id=nen-su-dung-ham-format-e-inh-dang-xau>Nên sử dụng hàm <code>format</code> để định dạng xâu<a class=headerlink href=#nen-su-dung-ham-format-e-inh-dang-xau title="Permanent link">&para;</a></h3> <p>Có 3 cách cơ bản để định dạng xâu (tạo xâu từ các xâu hard code và các biến). Cách làm tệ nhất là sử dụng toán tử <code>+</code> để nối các xâu từ hard code và biến. Một cách khá hơn là sử dụng format "kiểu cũ", đó là định dạng chuỗi mà sử dụng <code>%</code> như nhiều ngôn ngữ khác.</p> <p>Nhưng cách rõ ràng, dễ hiểu và idiomatic nhất là sử dụng hàm <code>format</code>. Tương tự như định dang "kiểu cũ", nó cũng cần một chuỗi và thay thế các placeholder thành giá trị truyền vào. Và nó có thể làm được nhiều hơn thế. Với hàm <code>format</code> chúng ta có thể đặt tên cho các placeholder, truy cập các thuộc tính, định dạng độ rộng và nhiều thứ khác nữa. Sử dụng hàm <code>format</code> là cách định dạng xâu rõ ràng nhất.</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_formatted_user_info_worst</span><span class=p>(</span><span class=n>user</span><span class=p>):</span>
    <span class=c1># Tedious to type and prone to conversion errors</span>
    <span class=k>return</span> <span class=s1>&#39;Name: &#39;</span> <span class=o>+</span> <span class=n>user</span><span class=o>.</span><span class=n>name</span> <span class=o>+</span> <span class=s1>&#39;, Age: &#39;</span> <span class=o>+</span> \
            <span class=nb>str</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>age</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;, Sex: &#39;</span> <span class=o>+</span> <span class=n>user</span><span class=o>.</span><span class=n>sex</span>
<span class=k>def</span> <span class=nf>get_formatted_user_info_slightly_better</span><span class=p>(</span><span class=n>user</span><span class=p>):</span>
    <span class=c1># No visible connection between the format string placeholders</span>
    <span class=c1># and values to use.  Also, why do I have to know the type?</span>
    <span class=c1># Don&#39;t these types all have __str__ functions?</span>
    <span class=k>return</span> <span class=s1>&#39;Name: </span><span class=si>%s</span><span class=s1>, Age: </span><span class=si>%i</span><span class=s1>, Sex: </span><span class=si>%c</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span>
                               <span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>age</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>sex</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_formatted_user_info</span><span class=p>(</span><span class=n>user</span><span class=p>):</span>
    <span class=c1># Clear and concise.  At a glance I can tell exactly what</span>
    <span class=c1># the output should be.  Note: this string could be returned</span>
    <span class=c1># directly, but the string itself is too long to fit on the</span>
    <span class=c1># page.</span>
    <span class=n>output</span> <span class=o>=</span> <span class=s1>&#39;Name: </span><span class=si>{user.name}</span><span class=s1>, Age: </span><span class=si>{user.age}</span><span class=s1>&#39;</span>
             <span class=s1>&#39;, Sex: </span><span class=si>{user.sex}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>output</span>
</pre></div> <h3 id=su-dung-join-e-tao-mot-xau-tu-cac-phan-tu-cua-list>Sử dụng <code>''.join</code> để tạo một xâu từ các phần tử của list<a class=headerlink href=#su-dung-join-e-tao-mot-xau-tu-cac-phan-tu-cua-list title="Permanent link">&para;</a></h3> <p>Đây là cách làm nhanh hơn, sử dụng ít bộ nhớ hơn, và bạn có thể thấy ai cũng dùng cách này. Lưu ý rằng, giá trị bên trong <code>''</code> là ký tự ngăn cách các phần tử của list. Xâu rỗng nghĩa là chúng ta tạo một xâu mới từ các phần tử mà không có gì ngăn cách chúng.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>result_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;True&#39;</span><span class=p>,</span> <span class=s1>&#39;False&#39;</span><span class=p>,</span> <span class=s1>&#39;File not found&#39;</span><span class=p>]</span>
<span class=n>result_string</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
<span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>result_list</span><span class=p>:</span>
    <span class=n>result_string</span> <span class=o>+=</span> <span class=n>result</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>result_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;True&#39;</span><span class=p>,</span> <span class=s1>&#39;False&#39;</span><span class=p>,</span> <span class=s1>&#39;File not found&#39;</span><span class=p>]</span>
<span class=n>result_string</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>result_list</span><span class=p>)</span>
</pre></div> <h3 id=chain-cac-ham-cua-xau-giup-viec-chuyen-oi-xau-ro-rang-hon>Chain các hàm của xâu giúp việc chuyển đổi xâu rõ ràng hơn<a class=headerlink href=#chain-cac-ham-cua-xau-giup-viec-chuyen-oi-xau-ro-rang-hon title="Permanent link">&para;</a></h3> <p>Khi chúng ta cần áp dụng liên tiếp các chuyển đổi với một xâu, việc chain các hàm giúp việc này rõ ràng hơn là sử dụng các biến lưu tạm. Tuy nhiên, quá nhiều hàm liên tiếp lại khó theo dõi. Vì vậy <strong>không quá 3</strong> hàm liên tiếp là một quy ước tốt.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>book_info</span> <span class=o>=</span> <span class=s1>&#39; The Three Musketeers: Alexandre Dumas&#39;</span>
<span class=n>formatted_book_info</span> <span class=o>=</span> <span class=n>book_info</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
<span class=n>formatted_book_info</span> <span class=o>=</span> <span class=n>formatted_book_info</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span>
<span class=n>formatted_book_info</span> <span class=o>=</span> <span class=n>formatted_book_info</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>,</span> <span class=s1>&#39; by&#39;</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>book_info</span> <span class=o>=</span> <span class=s1>&#39; The Three Musketeers: Alexandre Dumas&#39;</span>
<span class=n>formatted_book_info</span> <span class=o>=</span> <span class=n>book_info</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>,</span> <span class=s1>&#39; by&#39;</span><span class=p>)</span>
</pre></div> <h2 id=class>Class<a class=headerlink href=#class title="Permanent link">&para;</a></h2> <h3 id=su-dung-dau-gach-duoi-cho-ten-bien-va-phuong-thuc-e-anh-dau-private>Sử dụng dấu gạch dưới cho tên biến và phương thức để đánh dấu "private"<a class=headerlink href=#su-dung-dau-gach-duoi-cho-ten-bien-va-phuong-thuc-e-anh-dau-private title="Permanent link">&para;</a></h3> <p>Tất cả mọi thuộc tính của class, có thể là dữ liệu hoặc phương thức, đều là "public" trong Python. Mọi người đều có thể dễ dàng thêm thuộc tính vào một class kể cả khi nó đã được định nghĩa rồi. Hơn nữa, nếu một class được kế thừa, những class con có thể vô tình thay đổi thuộc tính của class cha. Cuối cùng, việc dùng dấu gạch dưới là dấu hiệu cho mọi người biết rằng phần nào của class là "public" về mặt logic (không được thay đổi mà không tương thích ngược) và phần nào hoàn toàn được sử dụng nội bộ mà không được dùng trực tiếp từ bên ngoài.</p> <p>Những điều dưới đây là quy ước, và thường được sử dụng rộng rãi.</p> <p>Thứ nhất, những thuộc tính "protected" nghĩa là chúng không được dùng trực tiếp từ bên ngoài, sẽ bắt đầu bằng 1 dấu gạch dưới. Thứ hai, những thuộc tính "private", tức là chúng không được truy cấp từ các class con kế thừa từ class cha, sẽ bắt đầu bằng 2 dấu gạch dưới. Tất nhiên, có nhiều biến thể khác nhau của quy ước trên. Và tất cả chỉ là quy ước và các developer ngầm hiểu với nhau. Chứ thực ra, mọi thuộc tính của class đều là "public" và không gì có thể thay đổi điều đó. Nhưng những quy ước này đang được sử dụng rộng rãi, và bạn nên tôn trọng nó.</p> <p>Tôi nghĩ rằng chúng ta nên sử dụng quy ước trên, thay vì chỉ dùng 1 dấu gạch dưới cho mọi thuộc tính "private". Ít người để ý rằng, việc thêm những tiền tố vào tên cũng có một số ý nghĩa nhất định. Ví dụ, thêm 1 dấu gạch dưới sẽ làm cho đối tượng không được import khi chúng ta dùng cú pháp "all" (<code>import *</code>). Thêm 2 dấu gạch dưới vào thuộc tính cũng liên quan đến việc chia cắt tên của Python. Nó có một tác dụng là các class con sẽ không thay thế thuộc tính đó một cách không lường trước. Nếu trong class <code>Foo</code> chúng ta định nghĩa <code>def __bar()</code> thì nó sẽ được "chia cắt" thành <code>_classname__attributename</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>Foo</span><span class=p>():</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=mi>8</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_value</span><span class=p>()</span>
    <span class=k>def</span> <span class=nf>get_value</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>
    <span class=k>def</span> <span class=nf>should_destroy_earth</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=mi>42</span>
<span class=k>class</span> <span class=nc>Baz</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>get_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>some_new_parameter</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Since &#39;get_value&#39; is called from the base class&#39;s</span>
<span class=sd>    __init__ method and the base class definition doesn&#39;t</span>
<span class=sd>    take a parameter, trying to create a Baz instance will</span>
<span class=sd>    fail.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
<span class=k>class</span> <span class=nc>Qux</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;We aren&#39;t aware of Foo&#39;s internals, and we innocently</span>
<span class=sd>    create an instance attribute named &#39;id&#39; and set it to 42.</span>
<span class=sd>    This overwrites Foo&#39;s id attribute and we inadvertently</span>
<span class=sd>    blow up the earth.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>Qux</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=mi>42</span>
        <span class=c1># No relation to Foo&#39;s id, purely coincidental</span>
<span class=n>q</span> <span class=o>=</span> <span class=n>Qux</span><span class=p>()</span>
<span class=n>b</span> <span class=o>=</span> <span class=n>Baz</span><span class=p>()</span> <span class=c1># Raises &#39;TypeError&#39;</span>
<span class=n>q</span><span class=o>.</span><span class=n>should_destroy_earth</span><span class=p>()</span> <span class=c1># returns True</span>
<span class=n>q</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=mi>42</span> <span class=c1># returns True</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>Foo</span><span class=p>():</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;Since &#39;id&#39; is of vital importance to us, we don&#39;t</span>
<span class=sd>        want a derived class accidentally overwriting it.  We&#39;ll</span>
<span class=sd>        prepend with double underscores to introduce name</span>
<span class=sd>        mangling.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>__id</span> <span class=o>=</span> <span class=mi>8</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__get_value</span><span class=p>()</span> <span class=c1># Our &#39;private copy&#39;</span>
    <span class=k>def</span> <span class=nf>get_value</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>
    <span class=k>def</span> <span class=nf>should_destroy_earth</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__id</span> <span class=o>==</span> <span class=mi>42</span>
    <span class=c1># Here, we&#39;re storing an &#39;private copy&#39; of get_value,</span>
    <span class=c1># and assigning it to &#39;__get_value&#39;.  Even if a derived</span>
    <span class=c1># class overrides get_value is a way incompatible with</span>
    <span class=c1># ours, we&#39;re fine</span>
    <span class=n>__get_value</span> <span class=o>=</span> <span class=n>get_value</span>
<span class=k>class</span> <span class=nc>Baz</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>get_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>some_new_parameter</span><span class=p>):</span>
        <span class=k>pass</span>
<span class=k>class</span> <span class=nc>Qux</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;Now when we set &#39;id&#39; to 42, it&#39;s not the same &#39;id&#39;</span>
<span class=sd>        that &#39;should_destroy_earth&#39; is concerned with.  In fact,</span>
<span class=sd>        if you inspect a Qux object, you&#39;ll find it doesn&#39;t</span>
<span class=sd>        have an __id attribute.  So we can&#39;t mistakenly change</span>
<span class=sd>        Foo&#39;s __id attribute even if we wanted to.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=mi>42</span>
        <span class=c1># No relation to Foo&#39;s id, purely coincidental</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>Qux</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=n>q</span> <span class=o>=</span> <span class=n>Qux</span><span class=p>()</span>
<span class=n>b</span> <span class=o>=</span> <span class=n>Baz</span><span class=p>()</span> <span class=c1># Works fine now</span>
<span class=n>q</span><span class=o>.</span><span class=n>should_destroy_earth</span><span class=p>()</span> <span class=c1># returns False</span>
<span class=n>q</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=mi>42</span> <span class=c1># returns True</span>
<span class=k>with</span> <span class=n>pytest</span><span class=o>.</span><span class=n>raises</span><span class=p>(</span><span class=ne>AttributeError</span><span class=p>):</span>
    <span class=nb>getattr</span><span class=p>(</span><span class=n>q</span><span class=p>,</span> <span class=s1>&#39;__id&#39;</span><span class=p>)</span>
</pre></div> <h3 id=inh-nghia-phuong-thuc-__str__-e-hien-thi-class-de-hieu-hon>Định nghĩa phương thức <code>__str__</code> để hiển thị class dễ hiểu hơn<a class=headerlink href=#inh-nghia-phuong-thuc-__str__-e-hien-thi-class-de-hieu-hon title="Permanent link">&para;</a></h3> <p>Khi định nghĩa một class mà nó được sử dụng với hàm <code>print()</code>, thì mặc định Python sẽ in ra một số thông tin không được thiết thực cho lắm. Bằng cách định nghĩa phương thức <code>__str__</code>, bạn có thể thay đổi việc gọi hàm <code>print</code> với các đối tượng của class theo cách mà bạn muốn.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>Point</span><span class=p>():</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>y</span>
<span class=n>p</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=nb>print</span> <span class=p>(</span><span class=n>p</span><span class=p>)</span>
<span class=c1># Prints &#39;&lt;__main__.Point object at 0x91ebd0&gt;&#39;</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>Point</span><span class=p>():</span>
    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>y</span>
    <span class=k>def</span> <span class=nf>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=s1>&#39;</span><span class=si>{0}</span><span class=s1>, </span><span class=si>{1}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>)</span>
<span class=n>p</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=nb>print</span> <span class=p>(</span><span class=n>p</span><span class=p>)</span>
<span class=c1># Prints &#39;1, 2&#39;</span>
</pre></div> <h2 id=set>Set<a class=headerlink href=#set title="Permanent link">&para;</a></h2> <h3 id=su-dung-tap-hop-e-tranh-cac-du-lieu-lap-lai>Sử dụng tập hợp để tránh các dữ liệu lặp lại<a class=headerlink href=#su-dung-tap-hop-e-tranh-cac-du-lieu-lap-lai title="Permanent link">&para;</a></h3> <p>Với list và dict, thì chúng ta thường xuyên gặp các giá trị bị lặp lại. Trong list của họ các nhân viên trong một công ty lớn, chúng ta cần tìm ra những họ phổ biến (xuất hiện nhiều lần trong list). Nếu chúng ta cần liệt kê những họ <strong>khác nhau</strong>, chúng ta có thể sử dụng tập hợp. Ba thuộc tính của tập hợp (set) khiến chúng thích hợp nhất cho bài toán này:</p> <ol> <li>Set chỉ lưu các phần tử 1 lần duy nhất</li> <li>Thêm một giá trị đã có vào set, giá trị này sẽ bị bỏ qua</li> <li>Một set có thể được tạo ra từ các "iterable" một cách dễ dàng</li> </ol> <p>Trở lại với ví dụ của chúng ta, giả sử chúng ta đã định nghĩa hàm <code>display</code> để hiển thị các phần tử của một chuỗi. Liệu chúng ta có cần thay đổi hàm này nếu chuyển từ list sang dùng set.</p> <p>Tất nhiên là không? Nếu hàm <code>display</code> được định nghĩa đúng, chúng ta chỉ cần thay list thành set là được. Đó là bởi vì, set cũng giống như list, đều là "iterable" và chúng ta có thể sử dụng vòng lặp <code>for</code>, cú pháp comprehension, v.v...</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>unique_surnames</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>surname</span> <span class=ow>in</span> <span class=n>employee_surnames</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>surname</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>unique_surnames</span><span class=p>:</span>
        <span class=n>unique_surnames</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>surname</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=n>elements</span><span class=p>,</span> <span class=n>output_format</span><span class=o>=</span><span class=s1>&#39;html&#39;</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>output_format</span> <span class=o>==</span> <span class=s1>&#39;std_out&#39;</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>output_format</span> <span class=o>==</span> <span class=s1>&#39;html&#39;</span><span class=p>:</span>
        <span class=n>as_html</span> <span class=o>=</span> <span class=s1>&#39;&lt;ul&gt;&#39;</span>
        <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>:</span>
            <span class=n>as_html</span> <span class=o>+=</span> <span class=s1>&#39;&lt;li&gt;</span><span class=si>{}</span><span class=s1>&lt;/li&gt;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>as_html</span> <span class=o>+</span> <span class=s1>&#39;&lt;/ul&gt;&#39;</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s1>&#39;Unknown format </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>output_format</span><span class=p>))</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>unique_surnames</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>employee_surnames</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=n>elements</span><span class=p>,</span> <span class=n>output_format</span><span class=o>=</span><span class=s1>&#39;html&#39;</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>output_format</span> <span class=o>==</span> <span class=s1>&#39;std_out&#39;</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>output_format</span> <span class=o>==</span> <span class=s1>&#39;html&#39;</span><span class=p>:</span>
        <span class=n>as_html</span> <span class=o>=</span> <span class=s1>&#39;&lt;ul&gt;&#39;</span>
        <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>:</span>
            <span class=n>as_html</span> <span class=o>+=</span> <span class=s1>&#39;&lt;li&gt;</span><span class=si>{}</span><span class=s1>&lt;/li&gt;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>as_html</span> <span class=o>+</span> <span class=s1>&#39;&lt;/ul&gt;&#39;</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s1>&#39;Unknown format </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>output_format</span><span class=p>))</span>
</pre></div> <h3 id=su-dung-set-comprehension-e-tao-set-nhanh-gon>Sử dụng set comprehension để tạo set nhanh gọn<a class=headerlink href=#su-dung-set-comprehension-e-tao-set-nhanh-gon title="Permanent link">&para;</a></h3> <p>Cú pháp set comprehension là cú pháp khá mới trong Python, do đó, thường bị quên lãng. Cũng giống như list comprehension, set cũng có thể tạo được bằng cách sử dụng set comprehension. Cú pháp của chúng khá giống nhau, ngoại trừ dấu ngoặc ngoài cùng.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>users_first_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
<span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>users</span><span class=p>:</span>
    <span class=n>users_first_names</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>first_name</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>users_first_names</span> <span class=o>=</span> <span class=p>{</span><span class=n>user</span><span class=o>.</span><span class=n>first_name</span> <span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>users</span><span class=p>}</span>
</pre></div> <h3 id=hieu-va-su-dung-cac-phep-toan-tap-hop>Hiểu và sử dụng các phép toán tập hợp<a class=headerlink href=#hieu-va-su-dung-cac-phep-toan-tap-hop title="Permanent link">&para;</a></h3> <p>Set là tập hợp, và nó khá dễ hiểu. Cũng tương tự như dict với các key và không có giá trị, class <code>set</code> cũng định nghĩa giao diện <code>Iterable</code> và <code>Container</code>. Do đó, set có thể sử dụng vòng lặp <code>for</code>.</p> <p>Với những lập trình viên chưa quen với tập hợp, nó thường ít được sử dụng. Để hiểu và sử dụng được nó một cách hiệu quả, thì việc hiểu nguồn gốc toán học của nó là rất quan trọng. <a href=https://en.wikipedia.org/wiki/Set_theory>Lý thuyết tập hợp</a> là một nhánh của toán học nghiên cứu các vấn đề của tập hợp. Hiểu được một số khái niệm toán cơ bản của tập hợp sẽ giúp chúng ta làm việc với set rất hiệu quả.</p> <p>Chúng ta chỉ cần nhớ một số phép toán đơn giản sau với tập hợp là đủ cho các thao tác thông thường.</p> <ul> <li>Hợp (tập hợp chứa các phần tử nằm trong A hoặc B hoặc cả hai)</li> </ul> <div class=codehilite><pre><span></span><span class=n>A</span> <span class=o>|</span> <span class=n>B</span>
</pre></div> <ul> <li>Giao (tập hợp chứa các phần tử nằm trong cả A và B)</li> </ul> <div class=codehilite><pre><span></span><span class=n>A</span> <span class=o>&amp;</span> <span class=n>B</span>
</pre></div> <ul> <li>Hiệu (tập hợp chứa các phần tử nằm trong A mà không nằm trong B)</li> </ul> <div class=codehilite><pre><span></span><span class=n>A</span> <span class=o>-</span> <span class=n>B</span>
</pre></div> <ul> <li>Hiệu đối xứng (Tập hợp chứ các phần tử nằm trong A hoặc B mà không nằm trong cả hai)</li> </ul> <div class=codehilite><pre><span></span><span class=n>A</span> <span class=o>^</span> <span class=n>B</span>
</pre></div> <p>Khi làm việc với danh sách các dữ liệu, một việc khá thông dụng là cần tìm các phần tử xuất hiện ở nhiều danh sách khác nhau. Bất cứ khi nào bạn cần tìm phần tử chung của hai hay nhiều danh sách, <strong>hãy sử dụng set</strong>.</p> <p>Dưới đây là một ví dụ điển hình:</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_both_popular_and_active_users</span><span class=p>():</span>
    <span class=c1># Assume the following two functions each return a</span>
    <span class=c1># list of user names</span>
    <span class=n>most_popular_users</span> <span class=o>=</span> <span class=n>get_list_of_most_popular_users</span><span class=p>()</span>
    <span class=n>most_active_users</span> <span class=o>=</span> <span class=n>get_list_of_most_active_users</span><span class=p>()</span>
    <span class=n>popular_and_active_users</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>most_active_users</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>user</span> <span class=ow>in</span> <span class=n>most_popular_users</span><span class=p>:</span>
            <span class=n>popular_and_active_users</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>popular_and_active_users</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_both_popular_and_active_users</span><span class=p>():</span>
    <span class=c1># Assume the following two functions each return a</span>
    <span class=c1># list of user names</span>
    <span class=k>return</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span>
               <span class=n>get_list_of_most_active_users</span><span class=p>())</span> <span class=o>&amp;</span> <span class=nb>set</span><span class=p>(</span>
                    <span class=n>get_list_of_most_popular_users</span><span class=p>()))</span>
</pre></div> <h2 id=generator>Generator<a class=headerlink href=#generator title="Permanent link">&para;</a></h2> <h3 id=su-dung-generator-e-load-cac-chuoi-vo-han-mot-cach-lazy>Sử dụng generator để load các chuỗi vô hạn một cách "lazy"<a class=headerlink href=#su-dung-generator-e-load-cac-chuoi-vo-han-mot-cach-lazy title="Permanent link">&para;</a></h3> <p>Nhiều trường hợp, chúng ta cần duyệt qua các chuỗi mà số phần tử của nó có thể là vô hạn. Một số trường hợp khác, chúng ta cần cung cấp giao diện tới một chuỗi có những tính toán rất lớn, tất nhiên là chúng ta không muốn người dùng ngồi chờ chỉ để xây dựng một list.</p> <p>Trong hai trường hợp trên, generator là giải pháp cho chúng ta. Generator là một dạng đặc biệt trả cho chúng ta một "iterable". Trạng thái của generator sẽ được lưu lại và lần sau khi chúng ta gọi đến generator nó sẽ chạy tiếp từ trang thái đó. Trong ví dụ dưới đây, chúng ta sẽ xem generator giúp chúng ta như thế nào trong cả hai tính huống ở trên.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_twitter_stream_for_keyword</span><span class=p>(</span><span class=n>keyword</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Get&#39;s the &#39;live stream&#39;, but only at the moment</span>
<span class=sd>    the function is initially called.  To get more entries,</span>
<span class=sd>    the client code needs to keep calling</span>
<span class=sd>    &#39;get_twitter_livestream_for_user&#39;.  Not ideal.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>imaginary_twitter_api</span> <span class=o>=</span> <span class=n>ImaginaryTwitterAPI</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>imaginary_twitter_api</span><span class=o>.</span><span class=n>can_get_stream_data</span><span class=p>(</span><span class=n>keyword</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>imaginary_twitter_api</span><span class=o>.</span><span class=n>get_stream</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span>
<span class=n>current_stream</span> <span class=o>=</span> <span class=n>get_twitter_stream_for_keyword</span><span class=p>(</span><span class=s1>&#39;#jeffknupp&#39;</span><span class=p>)</span>
<span class=k>for</span> <span class=n>tweet</span> <span class=ow>in</span> <span class=n>current_stream</span><span class=p>:</span>
    <span class=n>process_tweet</span><span class=p>(</span><span class=n>tweet</span><span class=p>)</span>
<span class=c1># Uh, I want to keep showing tweets until the program is quit.</span>
<span class=c1># What do I do now? Just keep calling</span>
<span class=c1># get_twitter_stream_for_keyword? That seems stupid.</span>
<span class=k>def</span> <span class=nf>get_list_of_incredibly_complex_calculation_results</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>[</span>
        <span class=n>first_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>),</span>
        <span class=n>second_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>),</span>
        <span class=n>third_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>),</span>
    <span class=p>]</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>get_twitter_stream_for_keyword</span><span class=p>(</span><span class=n>keyword</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Now, &#39;get_twitter_stream_for_keyword&#39; is a generator</span>
<span class=sd>    and will continue to generate Iterable pieces of data</span>
<span class=sd>    one at a time until &#39;can_get_stream_data(user)&#39; is</span>
<span class=sd>    False (which may be never).</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>imaginary_twitter_api</span> <span class=o>=</span> <span class=n>ImaginaryTwitterAPI</span><span class=p>()</span>
    <span class=k>while</span> <span class=n>imaginary_twitter_api</span><span class=o>.</span><span class=n>can_get_stream_data</span><span class=p>(</span><span class=n>keyword</span><span class=p>):</span>
        <span class=k>yield</span> <span class=n>imaginary_twitter_api</span><span class=o>.</span><span class=n>get_stream</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span>
<span class=c1># Because it&#39;s a generator, I can sit in this loop until</span>
<span class=c1># the client wants to break out</span>
<span class=k>for</span> <span class=n>tweet</span> <span class=ow>in</span> <span class=n>get_twitter_stream_for_keyword</span><span class=p>(</span><span class=s1>&#39;#jeffknupp&#39;</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>got_stop_signal</span><span class=p>:</span>
        <span class=k>break</span>
    <span class=n>process_tweet</span><span class=p>(</span><span class=n>tweet</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>get_list_of_incredibly_complex_calculation_results</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;A simple example to be sure, but now when the client</span>
<span class=sd>    code iterates over the call to</span>
<span class=sd>    &#39;get_list_of_incredibly_complex_calculation_results&#39;,</span>
<span class=sd>    we only do as much work as necessary to generate the</span>
<span class=sd>    current item.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>yield</span> <span class=n>first_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=k>yield</span> <span class=n>second_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=k>yield</span> <span class=n>third_incredibly_long_calculation</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</pre></div> <h3 id=su-dung-bieu-thuc-generator-thay-cho-list-comprehension-cho-nhung-truong-hop-on-gian>Sử dụng biểu thức generator thay cho list comprehension cho những trường hợp đơn giản<a class=headerlink href=#su-dung-bieu-thuc-generator-thay-cho-list-comprehension-cho-nhung-truong-hop-on-gian title="Permanent link">&para;</a></h3> <p>Khi làm việc với các chuỗi, chúng ta thường xuyên phải duyệt qua các phần tử của một chuỗi biến đổi từ chuỗi ban đầu. Ví dụ, chúng ta phải in ra tên của tất của user trong hệ thống bằng chữ in hoa.</p> <p>Ý tưởng thông thường sẽ là xây dựng một list và duyệt qua các phần tử của nó. List comprehension có vẻ là ý tưởng hay cho trường hợp này. Nhưng có một ý tưởng còn hay hơn nữa, nó đã được tích hợp sẵn trong Python, đó là sử dụng biểu thức generator.</p> <p>Sự khác nhau giữa chúng là gì? Một list comprehension sẽ tạo ra một list với đầy đủ các phần tử. Nếu danh sách các phần tử lớn, việc này sẽ rất mất thời gian và bộ nhớ. Một generator được trả về từ biểu thứ generator, thì ngược lại, bởi vì các phần tử chỉ được sinh ra <strong>khi được gọi</strong>. Danh sách tên user cần được in ra có thể không phải là vấn đề, nhưng thử tượng bạn cần in ra đầu mục sách của một thư viện thì sao? Bạn sẽ bị tràn bộ nhớ nếu dùng list comprehension, nhưng biểu thức generator thì thoải mái. Một ưu điểm nữa của biểu thứ generator là nó có thể tạo ra các chuỗi vô hạn.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>for</span> <span class=n>uppercase_name</span> <span class=ow>in</span> <span class=p>[</span><span class=n>name</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>get_all_usernames</span><span class=p>()]:</span>
    <span class=n>process_normalized_username</span><span class=p>(</span><span class=n>uppercase_name</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>for</span> <span class=n>uppercase_name</span> <span class=ow>in</span> <span class=p>(</span><span class=n>name</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>get_all_usernames</span><span class=p>()):</span>
    <span class=n>process_normalized_username</span><span class=p>(</span><span class=n>uppercase_name</span><span class=p>)</span>
</pre></div> <h2 id=context-manager>Context manager<a class=headerlink href=#context-manager title="Permanent link">&para;</a></h2> <h3 id=su-dung-context-manager-e-am-bao-tai-nguyen-uoc-quan-ly-can-than>Sử dụng context manager để đảm bảo tài nguyên được quản lý cẩn thận<a class=headerlink href=#su-dung-context-manager-e-am-bao-tai-nguyen-uoc-quan-ly-can-than title="Permanent link">&para;</a></h3> <p>Cũng giống như nguyên tác RAII trong các ngôn ngữ như C++, context manager (đối tượng được sử dụng bên trong lệnh <code>with</code>) giúp chúng ta làm việc và quản lý các tài nguyên tốt hơn và an toàn hơn. Ví dụ điển hình cho trường hợp này là đọc, ghi tập tin.</p> <p>Hãy nhìn vào code "harmful" dưới đây. Điều gì xảy ra sau khi <code>raise_exception</code> (raise một exception)? Với code dưới đây, thì nó sẽ dừng toàn bộ chương trình và chúng ta thường quên mất điều này, và kết quả là chúng ta chẳng có cách nào để đóng file lại.</p> <p>Có rất nhiều class có sẵn của Python hỗ trợ việc sử dụng context manager. Hơn nữa, các class tự định nghĩa cũng dễ dàng sử dụng context manager bằng cách định nghĩa các phương thức <code>__enter__</code> và <code>__exit__</code>. Các hàm có thể được bao bọc bởi context manager thông qua module <code>contextlib</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>file_handle</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>file_handle</span><span class=o>.</span><span class=n>readlines</span><span class=p>():</span>
    <span class=k>if</span> <span class=n>raise_exception</span><span class=p>(</span><span class=n>line</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;No! An Exception!&#39;</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file_handle</span><span class=p>:</span>
    <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>file_handle</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>raise_exception</span><span class=p>(</span><span class=n>line</span><span class=p>):</span>
            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;No! An Exception!&#39;</span><span class=p>)</span>
</pre></div> <h2 id=tuple>Tuple<a class=headerlink href=#tuple title="Permanent link">&para;</a></h2> <h3 id=su-dung-tuple-e-unpack-du-lieu>Sử dụng tuple để unpack dữ liệu<a class=headerlink href=#su-dung-tuple-e-unpack-du-lieu title="Permanent link">&para;</a></h3> <p>Trong Python, chúng ta có thể "unpack" dữ liệu trong một lệnh gán gộp. Điều này rất giống với LISP (<a href=http://clhs.lisp.se/Body/m_destru.htm>decontructing bind</a>).</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>list_from_comma_separated_value_file</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;dog&#39;</span><span class=p>,</span> <span class=s1>&#39;Fido&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
<span class=n>animal</span> <span class=o>=</span> <span class=n>list_from_comma_separated_value_file</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=n>name</span> <span class=o>=</span> <span class=n>list_from_comma_separated_value_file</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=n>age</span> <span class=o>=</span> <span class=n>list_from_comma_separated_value_file</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
<span class=n>output</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;</span><span class=si>{name}</span><span class=s1> the </span><span class=si>{animal}</span><span class=s1> is </span><span class=si>{age}</span><span class=s1> years old&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                             <span class=n>animal</span><span class=o>=</span><span class=n>animal</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=o>=</span><span class=n>age</span><span class=p>))</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>list_from_comma_separated_value_file</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;dog&#39;</span><span class=p>,</span> <span class=s1>&#39;Fido&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
<span class=p>(</span><span class=n>animal</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span> <span class=o>=</span> <span class=n>list_from_comma_separated_value_file</span>
<span class=n>output</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;</span><span class=si>{name}</span><span class=s1> the </span><span class=si>{animal}</span><span class=s1> is </span><span class=si>{age}</span><span class=s1> years old&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                             <span class=n>animal</span><span class=o>=</span><span class=n>animal</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=o>=</span><span class=n>age</span><span class=p>))</span>
</pre></div> <h3 id=su-dung-_-lam-placeholder-cho-du-lieu-trong-tuple-khong-uoc-dung>Sử dụng <code>_</code> làm placeholder cho dữ liệu trong tuple không được dùng<a class=headerlink href=#su-dung-_-lam-placeholder-cho-du-lieu-trong-tuple-khong-uoc-dung title="Permanent link">&para;</a></h3> <p>Khi gán một tuple với một số dữ liệu được sắp xếp, không phải tất cả mọi dữ liệu chúng ta đều dùng đến. Thay vì tạo ra các biến với tên đầy đủ mà không dùng đến (dễ gây hiểu nhầm), chúng ta chỉ cần sử dụng <code>_</code> để người khác đọc được hiểu rằng "dữ liệu này không dùng đến".</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>temp</span><span class=p>,</span> <span class=n>temp2</span><span class=p>)</span> <span class=o>=</span> <span class=n>get_user_info</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<span class=k>if</span> <span class=n>age</span> <span class=o>&gt;</span> <span class=mi>21</span><span class=p>:</span>
    <span class=n>output</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>{name}</span><span class=s1> can drink!&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>)</span>
<span class=c1># &quot;Wait, where are temp and temp2 being used?&quot;</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span> <span class=o>=</span> <span class=n>get_user_info</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<span class=k>if</span> <span class=n>age</span> <span class=o>&gt;</span> <span class=mi>21</span><span class=p>:</span>
    <span class=n>output</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>{name}</span><span class=s1> can drink!&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>)</span>
<span class=c1># &quot;Clearly, only name and age are interesting&quot;</span>
</pre></div> <h2 id=bien>Biến<a class=headerlink href=#bien title="Permanent link">&para;</a></h2> <h3 id=tranh-su-dung-bien-tam-khi-swap-hai-gia-tri>Tránh sử dụng biến tạm khi "swap" hai giá trị<a class=headerlink href=#tranh-su-dung-bien-tam-khi-swap-hai-gia-tri title="Permanent link">&para;</a></h3> <p>Không có lý do gì phải sử dụng một biến tạm thời để "swap" hai giá trị trong Python. Chúng ta có thể dùng tuple để làm việc này.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>foo</span> <span class=o>=</span> <span class=s1>&#39;Foo&#39;</span>
<span class=n>bar</span> <span class=o>=</span> <span class=s1>&#39;Bar&#39;</span>
<span class=n>temp</span> <span class=o>=</span> <span class=n>foo</span>
<span class=n>foo</span> <span class=o>=</span> <span class=n>bar</span>
<span class=n>bar</span> <span class=o>=</span> <span class=n>temp</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>foo</span> <span class=o>=</span> <span class=s1>&#39;Foo&#39;</span>
<span class=n>bar</span> <span class=o>=</span> <span class=s1>&#39;Bar&#39;</span>
<span class=p>(</span><span class=n>foo</span><span class=p>,</span> <span class=n>bar</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=n>bar</span><span class=p>,</span> <span class=n>foo</span><span class=p>)</span>
</pre></div> <h1 id=to-chuc-code>Tổ chức code<a class=headerlink href=#to-chuc-code title="Permanent link">&para;</a></h1> <h2 id=module-va-package>Module và package<a class=headerlink href=#module-va-package title="Permanent link">&para;</a></h2> <h3 id=su-dung-module-e-ong-goi-khi-cac-ngon-ngu-khac-dung-oi-tuong>Sử dụng module để đóng gói khi các ngôn ngữ khác dùng đối tượng<a class=headerlink href=#su-dung-module-e-ong-goi-khi-cac-ngon-ngu-khac-dung-oi-tuong title="Permanent link">&para;</a></h3> <p>Trong khi Python có hỗ trợ lập trình hướng đối tượng, tuy nhiên không ai yêu cầu bạn phải làm như vậy. Các lập trình Python có kinh nghiệm sử dụng các class và tính đa hình tương đối ít. Tại sao lại như vậy?</p> <p>Phần lớn dữ liệu được lưu trong các class có thể dễ dàng lưu dưới dạng các list, dict hay set. Python có sẵn rất nhiều các hàm và thư viện chuẩn đã được tối ưu hóa (cả về thiết kế lẫn cài đặt) để làm việc với những dữ liệu này. Một người có thể dễ dàng thuyết phục rằng class chỉ nên được dùng khi nào cần thiết và không phần lớn là không cần đến chúng.</p> <p>Trong Java, class là đơn vị cơ bản để đóng gói. Mỗi file là một class của Java, bất kể ý nghĩa hay code chạy ở bên trong. Nếu tôi cho một số các hàm tiện ích vào bên trong một class tên là <code>Utility</code>, chúng ta sẽ khó hiểu được một đối tượng "Utility" là thế nào. Tất nhiên đây chỉ là một ví dụ, nhưng vấn đề đã rất rõ ràng. Một khi chúng ta buộc phải dùng class cho mọi thứ, chúng ta có thể phải mang tư tưởng đó sang các ngôn ngữ khác.</p> <p>Trong Python, nhóm các hàm và dữ liệu liên quan đến nhau, rất tự nhiên, được đóng gói vào các module. Nếu tôi sử dụng một framework viết Web MVC để tạo ra một trang "Chirp", có thể tôi sẽ có một package tên là <code>chirp</code> với các module model, view và controller bên trong. Nếu "Chirp" là một dự án đầy triển vọng, và code có thể rất lớn, các module này cũng có thể trở thành package. Package controller có thể có chứa nhiều module controller khác nhau. Không thứ gì trong số chúng cần liên hệ với nhau ngoại trừ việc chúng đều ở trong package controller.</p> <p>Nếu tất cả các module đều trở thành class, thì khả năng tương tác ngay lập tức trở thành vấn đề. Chúng ta phải cẩn thận và chính xác xác định các phương thức mà chúng là sẽ public, trạng thái nào sẽ được cập nhật, và cách mà class của chúng ta hỗ trợ test. Và thay vì list hay dict, các đối tượng <code>Persistence</code> và <code>Processing</code> của chúng ta, chúng ta phải code cho chúng.</p> <p>Lưu ý rằng, không mô tả nào của "Chirp" đòi hỏi việc sử dụng class. Một lệnh <code>import</code> đơn giản sẽ giúp việc chia sẻ code và đóng gói dễ hơn rất nhiều. Truyền trạng thái như là các tham số một cách rõ ràng giúp giữ mọi thứ liên kết với nhau. Và việc nhận, xử lý và truyền dữ liệu trong hệ thống của chúng ta dễ hơn rất nhiều.</p> <p>Tất nhiên, class là cách đơn giản, tự nhiên và thích hợp để đại diện cho các "sự vật". Nhiều trường hợp, lập trình hướng đối tượng là một paradigm tốt. Tuy nhiên, <strong>không nên chỉ sử dụng một paradigm duy nhất</strong>.</p> <h2 id=inh-dang>Định dạng<a class=headerlink href=#inh-dang title="Permanent link">&para;</a></h2> <h3 id=su-dung-toan-ky-tu-hoa-e-inh-nghia-hang-so-global>Sử dụng toàn ký tự hoa để định nghĩa hằng số global<a class=headerlink href=#su-dung-toan-ky-tu-hoa-e-inh-nghia-hang-so-global title="Permanent link">&para;</a></h3> <p>Để phân biệt các hằng số được định nghĩa ở tầng module (hoặc global trong một file script duy nhất) với các tên được import, hãy sử dụng toàn ký tự hoa.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=n>seconds_in_a_day</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>24</span>
<span class=c1># ...</span>
<span class=k>def</span> <span class=nf>display_uptime</span><span class=p>(</span><span class=n>uptime_in_seconds</span><span class=p>):</span>
    <span class=n>percentage_run_time</span> <span class=o>=</span> <span class=p>(</span><span class=n>uptime_in_seconds</span><span class=o>/</span><span class=n>seconds_in_a_day</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span>
    <span class=c1># &quot;Huh!? Where did seconds_in_a_day come from?&quot;</span>
    <span class=k>return</span> <span class=s1>&#39;The process was up </span><span class=si>{percent}</span><span class=s1> percent of the day&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                                       <span class=n>percent</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>percentage_run_time</span><span class=p>))</span>
<span class=c1># ...</span>
<span class=n>uptime_in_seconds</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>24</span>
<span class=n>display_uptime</span><span class=p>(</span><span class=n>uptime_in_seconds</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=n>SECONDS_IN_A_DAY</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>24</span>
<span class=c1># ...</span>
<span class=k>def</span> <span class=nf>display_uptime</span><span class=p>(</span><span class=n>uptime_in_seconds</span><span class=p>):</span>
    <span class=n>percentage_run_time</span> <span class=o>=</span> <span class=p>(</span><span class=n>uptime_in_seconds</span><span class=o>/</span><span class=n>SECONDS_IN_A_DAY</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span>
    <span class=c1># &quot;Clearly SECONDS_IN_A_DAY is a constant defined</span>
    <span class=c1># elsewhere in this module.&quot;</span>
    <span class=k>return</span> <span class=s1>&#39;The process was up </span><span class=si>{percent}</span><span class=s1> percent of the day&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                                       <span class=n>percent</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>percentage_run_time</span><span class=p>))</span>
<span class=c1># ...</span>
<span class=n>uptime_in_seconds</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>24</span>
<span class=n>display_uptime</span><span class=p>(</span><span class=n>uptime_in_seconds</span><span class=p>)</span>
</pre></div> <h3 id=tranh-at-nhieu-lenh-tren-cung-dong>Tránh đặt nhiều lệnh trên cùng dòng<a class=headerlink href=#tranh-at-nhieu-lenh-tren-cung-dong title="Permanent link">&para;</a></h3> <p>Mặc dù ngôn ngữ cho phép chúng ta dùng dấu chấm phẩy (<code>;</code>) để kết thúc lệnh, nhưng việc dùng nó mà không có lý do gì đặc biệt sẽ làm code khó hiểu hơn. Đặc biệt khi bạn dùng nó để đặt các lệnh trên một dòng, nhất là kết hợp với <code>if</code>, <code>elif</code> và <code>else</code> thì vấn đề còn tồi tệ hơn nữa.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=n>this_is_bad_code</span><span class=p>:</span> <span class=n>rewrite_code</span><span class=p>();</span> <span class=n>make_it_more_readable</span><span class=p>();</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=n>this_is_bad_code</span><span class=p>:</span>
    <span class=n>rewrite_code</span><span class=p>()</span>
    <span class=n>make_it_more_readable</span><span class=p>()</span>
</pre></div> <h3 id=inh-dang-code-tuan-theo-pep-8>Định dang code tuân theo PEP 8<a class=headerlink href=#inh-dang-code-tuan-theo-pep-8 title="Permanent link">&para;</a></h3> <p>Python có một bộ tiêu chuẩn về định dạng code của ngôn ngữ là <a href=https://www.python.org/dev/peps/pep-0008/ >PEP 8</a>. Nếu bạn xem các commit của một dự án Python, bạn có thể thấy một vài commit liên quan đến sửa code theo PEP 8. Lý do rất đơn giản: Nếu tất cả chúng ta đều đồng ý với một bộ quy tắc chung về đặt tên là định dạng code, thì code Python sẽ rất dễ hiểu với cả người mới và những lập trình viên có kinh nghiệm. PEP 8 là một ví dụ rất rõ ràng về các idiom trong cộng đồng Python. Hãy đọc nó, cài đặt cách package hỗ trợ vào editor của bạn (editor nào cũng có cả) và viết code theo cách mà cộng đồng Python đã tuân theo. Dưới đây là một số ví dụ:</p> <table> <thead> <tr> <th>Identifier Type</th> <th>Format</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td>Class</td> <td>CamelCase</td> <td><code>class StringManipulator():</code></td> </tr> <tr> <td>Variable</td> <td>Words joined by <code>_</code></td> <td><code>joined_by_underscore = True</code></td> </tr> <tr> <td>Function</td> <td>Words joined by <code>_</code></td> <td><code>def multi_word_name(words):</code></td> </tr> <tr> <td>Constant</td> <td>All uppercase</td> <td><code>SECRET_KEY = 42</code></td> </tr> </tbody> </table> <p>Về cơ bản những thứ chưa được liệt kê nên được đặt tên giống quy tắc với đặt tên biến/hàm (từ ngăn cách bằng dấu gạch dưới).</p> <h2 id=script-thuc-thi>Script thực thi<a class=headerlink href=#script-thuc-thi title="Permanent link">&para;</a></h2> <h3 id=su-dung-sysexit-trong-script-e-tra-ve-ung-ma-loi>Sử dụng <code>sys.exit</code> trong script để trả về đúng mã lỗi<a class=headerlink href=#su-dung-sysexit-trong-script-e-tra-ve-ung-ma-loi title="Permanent link">&para;</a></h3> <p>Chúng ta có thể cho một loạt code vào bên trong <code>if __name__ == '__main__'</code> mà không trả về bất cứ thứ gì. Tuy nhiên, nên tránh việc này.</p> <p>Hãy sử dụng một hàm chính chứa các code cần thiết để chạy. Sử dụng <code>sys.exit</code> trong hàm đó để trả về mã lỗi nếu có bất cứ thứ gì bất thường, và trả về <code>0</code> nếu mọi chuyện bình thường. Code bên trong <code>if __name__ == '__main__'</code> chỉ nên gọi <code>sys.exit</code> với kết quả trả về của hàm chính này là tham số.</p> <p>Bằng cách này, chúng ta cho phép các script có thể được dùng trong pipeline của Unix, có thể theo dõi script chạy thành công hay thất bại mà không cần code thêm các xử lý mới, và các chương trình khác có thể gọi script rất an toàn.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=kn>import</span> <span class=nn>sys</span>
    <span class=c1># What happens if no argument is passed on the</span>
    <span class=c1># command line?</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>argument</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>result</span> <span class=o>=</span> <span class=n>do_stuff</span><span class=p>(</span><span class=n>argument</span><span class=p>)</span>
        <span class=c1># Again, what if this is False? How would other</span>
        <span class=c1># programs know?</span>
        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
            <span class=n>do_stuff_with_result</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
    <span class=kn>import</span> <span class=nn>sys</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
        <span class=c1># Calling sys.exit with a string automatically</span>
        <span class=c1># prints the string to stderr and exits with</span>
        <span class=c1># a value of &#39;1&#39; (error)</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=s1>&#39;You forgot to pass an argument&#39;</span><span class=p>)</span>
    <span class=n>argument</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>do_stuff</span><span class=p>(</span><span class=n>argument</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>result</span><span class=p>:</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
        <span class=c1># We can also exit with just the return code</span>
    <span class=n>do_stuff_with_result</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
    <span class=c1># Optional, since the return value without this return</span>
    <span class=c1># statment would default to None, which sys.exit treats</span>
    <span class=c1># as &#39;exit with 0&#39;</span>
    <span class=k>return</span> <span class=mi>0</span>
<span class=c1># The three lines below are the canonical script entry</span>
<span class=c1># point lines.  You&#39;ll see them often in other Python scripts</span>
<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</pre></div> <h3 id=su-dung-if-__name__-__main__-e-lam-file-vua-co-the-chay-vua-co-the-import-vao-file-khac>Sử dụng <code>if __name__ == '__main__'</code> để làm file vừa có thể chạy vừa có thể import vào file khác<a class=headerlink href=#su-dung-if-__name__-__main__-e-lam-file-vua-co-the-chay-vua-co-the-import-vao-file-khac title="Permanent link">&para;</a></h3> <p>Không như hàm <code>main()</code> của ngôn ngữ C, Python không có quy tắc nào cho điểm bắt đầu của script. Trình thông dịch sẽ thực hiện ngay lập tức các lệnh sau khi load từ mã nguồn. Nếu bạn muốn một file vừa là một module Python có thể import vào file khác, vừa có thể chạy như một script độc lập, hãy sử dụng <code>if __name__ == '__main__'</code>.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=n>FIRST_NUMBER</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>SECOND_NUMBER</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
<span class=k>def</span> <span class=nf>divide</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>/</span><span class=n>b</span>
<span class=c1># I can&#39;t import this file (for the super</span>
<span class=c1># useful &#39;divide&#39; function) without the following</span>
<span class=c1># code being executed.</span>
<span class=k>if</span> <span class=n>SECOND_NUMBER</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>divide</span><span class=p>(</span><span class=n>FIRST_NUMBER</span><span class=p>,</span> <span class=n>SECOND_NUMBER</span><span class=p>))</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=k>def</span> <span class=nf>divide</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>/</span><span class=n>b</span>
<span class=c1># Will only run if script is executed directly,</span>
<span class=c1># not when the file is imported as a module</span>
<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>first_number</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
    <span class=n>second_number</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
    <span class=k>if</span> <span class=n>second_number</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>divide</span><span class=p>(</span><span class=n>first_number</span><span class=p>,</span> <span class=n>second_number</span><span class=p>))</span>
</pre></div> <h2 id=import>Import<a class=headerlink href=#import title="Permanent link">&para;</a></h2> <h3 id=su-dung-import-tuyet-oi-thay-vi-tuong-oi>Sử dụng import tuyệt đối thay vì tương đối<a class=headerlink href=#su-dung-import-tuyet-oi-thay-vi-tuong-oi title="Permanent link">&para;</a></h3> <p>Khi import một module, chúng ta có thể chọn một trong hai "kiểu" import đó là import tương đối và tuyệt đối. Import tuyệt đối sẽ xác định vị trí của module (như kiểu <code>&lt;package&gt;.&lt;module&gt;.&lt;submodule&gt;</code>) từ một trong số các vị trí trong <code>sys.path</code>.</p> <p>Import tương đối xác định vị trí của module so với module hiện tại trong hệ thống file. Nếu bạn đang ở module <code>package.subpackage.module</code> và bạn muốn import <code>package.other_module</code>, bạn có thể sử dụng các dấu chấm để import tương đối, ví dụ <code>from ..other_module import foo</code>. Một dấu chấm <code>.</code> thể hiện module hiện tại. Mỗi dấu chấm thêm vào nghĩa là chúng ta chuyển đến package cha của package hiện tại. Chú ý rằng, import tương đối luôn luôn có dạng <code>from ... import ...</code>. <code>import foo</code> luôn được hiểu là import tuyệt đối.</p> <p>Đổi lại, khi sử dụng import tuyệt đối, bạn cần viết <code>import package.other_module</code> (có thể sử dụng mệnh đề <code>as</code> đề alias các phương thức cho ngắn hơn).</p> <p>Tại sao chúng ta nên sử dụng import tuyệt đối? Import tương đối làm lộn xộn namespace của các module. Nếu viết <code>from foo import bar</code> thì bạn đã bó buộc tên <code>bar</code> ở trong namespace của module của bạn. Với những người đọc code của bạn, sẽ rất khó để hiển <code>bar</code> từ đâu mà ra, nhất là khi bạn sử dụng các hàm phức tạp và module lớn. Ngược lại <code>foo.bar</code> giúp chúng ta dễ dàng hiểu hơn nguồn gốc của <code>bar</code>, nơi mà nó được định nghĩa.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=c1># My location is package.sub_package.module</span>
<span class=c1># and I want to import package.other_module.</span>
<span class=c1># The following should be avoided:</span>
<span class=kn>from</span> <span class=nn>...package</span> <span class=k>import</span> <span class=n>other_module</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=c1># My location is package.sub_package.another_sub_package.module</span>
<span class=c1># and I want to import package.other_module.</span>
<span class=c1># Either of the following are acceptable:</span>
<span class=kn>import</span> <span class=nn>package.other_module</span>
<span class=kn>import</span> <span class=nn>package.other_module</span> <span class=k>as</span> <span class=nn>other</span>
</pre></div> <h3 id=khong-su-dung-from-foo-import-e-import-noi-dung-module>Không sử dụng <code>from foo import *</code> để import nội dung module<a class=headerlink href=#khong-su-dung-from-foo-import-e-import-noi-dung-module title="Permanent link">&para;</a></h3> <p>Sử dụng dấu <code>*</code> (ví dụ <code>from foo import *</code>) là cách nhanh nhất đề làm lộn xộn namespace của bạn. Điều này thậm chí gây ra một số vấn đề nếu tên bạn định nghĩa trùng với tên được import từ package.</p> <p>Nhưng nếu bạn cần phải import một lượng lớn các đối tượng từ package <code>foo</code> bạn phải làm thế nào? Hãy sử dụng ngoặc đơn <code>()</code> để nhóm các đối tượng trong một lệnh <code>import</code>. Bạn không cần phải viết 10 dòng để import từ cùng một module, và namespace của bạn vẫn rất gọn gàng.</p> <p>Tốt hơn cả, bạn nên sử dụng import tuyệt đối. Nếu tên package hay module quá dài, bạn có thể dùng mệnh đề <code>as</code> đề thu gọn chúng.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>foo</span> <span class=k>import</span> <span class=o>*</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>foo</span> <span class=k>import</span> <span class=p>(</span><span class=n>bar</span><span class=p>,</span> <span class=n>baz</span><span class=p>,</span> <span class=n>qux</span><span class=p>,</span>
                 <span class=n>quux</span><span class=p>,</span> <span class=n>quuux</span><span class=p>)</span>
<span class=c1># or even better...</span>
<span class=kn>import</span> <span class=nn>foo</span>
</pre></div> <h3 id=sap-xep-cac-lenh-import-theo-thu-tu-chuan>Sắp xếp các lệnh <code>import</code> theo thứ tự chuẩn<a class=headerlink href=#sap-xep-cac-lenh-import-theo-thu-tu-chuan title="Permanent link">&para;</a></h3> <p>Khi dự án lớn dần lên (nhất là với các dự án phát triển Web), sẽ có rất nhiều lệnh import khác nhau được thực hiện. Hãy để <strong>tất cả</strong> các lệnh import ở phần trên cùng của mỗi file, chọn một thứ tự chuẩn để sắp xếp các lệnh import và tuân thủ theo chuẩn này. Bởi vì thứ tự import nhiều khi không quan trọng, nhưng thứ tự sau được recommend bởi Python's Programming FAQ:</p> <ol> <li>Các module thư viện chuẩn</li> <li>Các module thư viện bên thứ 3 được cài trong <code>site-packages</code></li> <li>Các module trong dự án hiện tại</li> </ol> <p>Nhiều người chọn sắp xếp các lệnh import theo thứ tự từ điển. Nhiều người khác nghĩ rằng như thế là ngu ngốc. Thực ra, chẳng có vấn đề gì cả. Những gì bạn cần làm là chọn ra một chuẩn quy tắc và tuân thủ theo nó.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=kn>import</span> <span class=nn>os.path</span>
<span class=c1># Some function and class definitions,</span>
<span class=c1># one of which uses os.path</span>
<span class=c1># ....</span>
<span class=kn>import</span> <span class=nn>concurrent.futures</span>
<span class=kn>from</span> <span class=nn>flask</span> <span class=k>import</span> <span class=n>render_template</span>
<span class=c1># Stuff using futures and Flask&#39;s render_template</span>
<span class=c1># ....</span>
<span class=kn>from</span> <span class=nn>flask</span> <span class=k>import</span> <span class=p>(</span><span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>session</span><span class=p>,</span> <span class=n>g</span><span class=p>,</span>
                   <span class=n>redirect</span><span class=p>,</span> <span class=n>url_for</span><span class=p>,</span> <span class=n>abort</span><span class=p>,</span>
                   <span class=n>render_template</span><span class=p>,</span> <span class=n>flash</span><span class=p>,</span> <span class=n>_app_ctx_stack</span><span class=p>)</span>
<span class=kn>import</span> <span class=nn>requests</span>
<span class=c1># Code using flask and requests</span>
<span class=c1># ....</span>
<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=c1># Imports when imported as a module are not so</span>
    <span class=c1># costly that they need to be relegated to inside</span>
    <span class=c1># an &#39;if __name__ == &#39;__main__&#39;&#39; block...</span>
    <span class=kn>import</span> <span class=nn>this_project.utilities.sentient_network</span> <span class=k>as</span> <span class=nn>skynet</span>
    <span class=kn>import</span> <span class=nn>this_project.widgets</span>
    <span class=kn>import</span> <span class=nn>sys</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=c1># Easy to see exactly what my dependencies are and where to</span>
<span class=c1># make changes if a module or package name changes</span>
<span class=kn>import</span> <span class=nn>concurrent.futures</span>
<span class=kn>import</span> <span class=nn>os.path</span>
<span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>from</span> <span class=nn>flask</span> <span class=k>import</span> <span class=p>(</span><span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>session</span><span class=p>,</span> <span class=n>g</span><span class=p>,</span>
                   <span class=n>redirect</span><span class=p>,</span> <span class=n>url_for</span><span class=p>,</span> <span class=n>abort</span><span class=p>,</span>
                   <span class=n>render_template</span><span class=p>,</span> <span class=n>flash</span><span class=p>,</span> <span class=n>_app_ctx_stack</span><span class=p>)</span>
<span class=kn>import</span> <span class=nn>requests</span>
<span class=kn>import</span> <span class=nn>this_project.utilities.sentient_network</span> <span class=k>as</span> <span class=nn>skynet</span>
<span class=kn>import</span> <span class=nn>this_project.widgets</span>
</pre></div> <h1 id=loi-khuyen-chung>Lời khuyên chung<a class=headerlink href=#loi-khuyen-chung title="Permanent link">&para;</a></h1> <h2 id=tranh-tai-phat-minh-banh-xe>Tránh "tái phát minh bánh xe"<a class=headerlink href=#tranh-tai-phat-minh-banh-xe title="Permanent link">&para;</a></h2> <h3 id=hieu-noi-dung-cua-thu-vien-python-chuan>Hiểu nội dung của thư viện Python chuẩn<a class=headerlink href=#hieu-noi-dung-cua-thu-vien-python-chuan title="Permanent link">&para;</a></h3> <p>Một phần của việc viết mã idiomatic chính là làm chủ các thư viện chuẩn. Code mà vô tình thực hiện những chức năng mà thư viện chuẩn đã có là tín hiệu rõ ràng của một lập trình viên mới của Python. Python thường được nói là "batteries included" với một lý do chính đáng. Các thư viện chuẩn bao gồm các package bao phủ hàng loạt lĩnh vực. Sử dụng các thư viện chuẩn cho chúng ta hai lợi ích chính. Rõ ràng nhất, là chúng ta tiết kiệm cho mình rất nhiều thời gian khi không cần phải cài đặt các chức năng từ đầu. Một lợi ích quan trọng khác là những người đọc hay maintain code của bạn sẽ có thời gian dễ dàng hơn khi sử dụng các package quen thuộc.</p> <p>Hãy nhớ rằng, việc học viết code Python một cách idiomatic là viết code sáng sủa, rõ ràng, có thể duy trì và không có bug. Không có gì đảm bảo những phẩm chất đó ở code của bạn dễ dàng hơn việc sử dụng lại code đã được viết và maintain bởi các developer Python. Bởi vì các bug được tìm và sửa trong các thư viện chuẩn, code của bạn cũng được nâng cao mà bạn chẳng cần phải làm gì cả.</p> <h3 id=hieu-ve-pypi-the-python-package-index>Hiểu về <code>PyPI</code> (the Python Package Index)<a class=headerlink href=#hieu-ve-pypi-the-python-package-index title="Permanent link">&para;</a></h3> <p>Nếu thư viện chuẩn của Python không có package nào liên quan đến bài toán của bạn, bạn vẫn có cơ hội tìm thấy ở <a href=pypi.python.org>PyPI</a>. Vào thời điểm bài viết này, có trên 27000 package đang được liệt kê ở index. Nếu bạn đang cần tìm các package để giải quyết một bài toán, và bạn không thể tìm thấy package nào liên quan trong PyPI, rất có thể là nó không tồn tại.</p> <p>Trang index có thể tìm kiếm dễ dàng và có cả các package cho Python 2 và Python 3. Tất nhiên, không phải package nào cũng được tạo ra và duy trì như nhau. Nên bạn cần kiểm tra các update của chúng. Một package có tài liệu được lưu trên các trang bên ngoài như <a href=www.readthedocs.org>ReadTheDocs</a> là một dấu hiệu tốt, và thường mã nguồn của chúng sẽ có ở trên <a href=https://github.com/ >Github</a> hoặc <a href=https://bitbucket.org/ >Bitbucket</a>.</p> <p>Nếu bạn tìm thấy một package đầy hứa hẹn, làm thế nào bạn có thể cài đặt nó? Đến nay, một công cụ khá phổ biến để quản lý các package của bên thứ 3 là <a href=https://pip.pypa.io/en/stable/ ><code>pip</code></a>. Lệnh <code>pip install &lt;package name&gt;</code> sẽ download và cài đặt phiên bản mới nhất của package vào thứ thư mục <code>site-packages</code>. Nếu bạn cần chỉ định phiên bản của package, pip cũng hỗ trợ việc này.</p> <p>Nếu bạn có một package mà sẽ hữu ích cho rất nhiều người, tôi recommend bạn nên công bố nó cho cộng đồng Python bằng cách đưa nó lên PyPI. Rất nhiều người sẽ cảm ơn bạn vì nghĩa cử cao đẹp đó.</p> <h2 id=module-can-luu-y>Module cần lưu ý<a class=headerlink href=#module-can-luu-y title="Permanent link">&para;</a></h2> <h3 id=hieu-noi-dung-cua-module-itertools>Hiểu nội dung của module <code>itertools</code><a class=headerlink href=#hieu-noi-dung-cua-module-itertools title="Permanent link">&para;</a></h3> <p>Nếu bạn thường xuyên vào các trang như StackOverflow, bạn có thể để ý rằng những câu trả lời cho câu hỏi như "Tại sao Python lại thiếu thư viện rất cần thiết này?" đều dẫn đến module <code>itertools</code>. Những người theo đuổi lập trình hàm cho rằng <code>itertools</code> cung cấp những hàm nên được coi là những khối xây dựng cơ bản. Hơn nữa, các tài liệu hướng dẫn cho <code>itertools</code> có một phần là <a href=https://docs.python.org/2/library/itertools.html#recipes>Recipes</a> cung cấp cách cài đặt idiomatic những cấu trúc thông dụng của lập trình hàm, chỉ cần sử dụng module <code>itertools</code> mà thôi. Có một số lý do khiến cho một vài developer Python quan tâm tới phần "Recipes" và module <code>itertools</code> nói chung. Một phần của việc viết code idiomatic là biết khi nào bạn "tái phát minh bánh xe".</p> <h3 id=su-dung-ham-cua-ospath-khi-lam-viec-voi-uong-dan-cac-file-thu-muc>Sử dụng hàm của <code>os.path</code> khi làm việc với đường dẫn các file, thư mục<a class=headerlink href=#su-dung-ham-cua-ospath-khi-lam-viec-voi-uong-dan-cac-file-thu-muc title="Permanent link">&para;</a></h3> <p>Khi viết một script dạng command-line, những developer mới thường sử dụng đến các phép toán của xâu để thao tác với dường dẫn của file và thư mục. Python có một module rất đầy đủ và dành riêng cho việc này, đó là <code>os.path</code>. Sử dụng <code>os.path</code> làm giảm nguy cơ xảy ra các lỗi phổ biến, làm code của bạn khả chuyển hơn, và dễ hiểu hơn.</p> <p>Harmful</p> <div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>datetime</span> <span class=k>import</span> <span class=n>date</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=n>filename_to_archive</span> <span class=o>=</span> <span class=s1>&#39;test.txt&#39;</span>
<span class=n>new_filename</span> <span class=o>=</span> <span class=s1>&#39;test.bak&#39;</span>
<span class=n>target_directory</span> <span class=o>=</span> <span class=s1>&#39;./archives&#39;</span>
<span class=n>today</span> <span class=o>=</span> <span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
<span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=s1>&#39;./archives/&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>today</span><span class=p>))</span>
<span class=n>os</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span>
          <span class=n>filename_to_archive</span><span class=p>,</span>
          <span class=n>target_directory</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>today</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=n>new_filename</span><span class=p>)</span>
          <span class=n>today</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=n>new_filename</span><span class=p>)</span>
</pre></div> <p>Idiomatic</p> <div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>datetime</span> <span class=k>import</span> <span class=n>date</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=n>current_directory</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=n>filename_to_archive</span> <span class=o>=</span> <span class=s1>&#39;test.txt&#39;</span>
<span class=n>new_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>filename_to_archive</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=s1>&#39;.bak&#39;</span>
<span class=n>target_directory</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>current_directory</span><span class=p>,</span> <span class=s1>&#39;archives&#39;</span><span class=p>)</span>
<span class=n>today</span> <span class=o>=</span> <span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
<span class=n>new_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>target_directory</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>today</span><span class=p>))</span>
<span class=k>if</span> <span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>target_directory</span><span class=p>)):</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>new_path</span><span class=p>):</span>
        <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>new_path</span><span class=p>)</span>
    <span class=n>os</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span>
              <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>current_directory</span><span class=p>,</span> <span class=n>filename_to_archive</span><span class=p>),</span>
              <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>new_path</span><span class=p>,</span> <span class=n>new_filename</span><span class=p>))</span>
</pre></div> </div> <div class=post-footer> <div class=tags> <i class="fa fa-tags"></i> <span>#Python</span> <span>#coding style</span> <span>#idiomatic</span> <span>#Pythonic</span> </div> </div> </div><div class=blog-pager> <span class=newer-link> <a href=/2014/Jul/29/self-printing-program.html> Newer Post </a> </span> <span class=older-link> <a href=/2013/Apr/13/new-semester.html> Older Post </a> </span> </div><div class=comments> <div class=finally> <p><em>I apologise for any typos. If you notice a problem, please let me know.</em> <p>Thank you all for your attention. </div> <div id=disqus_thread></div> <script src=/theme/js/disqus.min.js?81e8a5f5></script> <noscript> Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript> comments powered by Disqus. </a> </noscript> </div></div> </div> </div> <div class=sidebar-wrapper> <div class=widget> <h2>Welcome</h2> <div> <img src=/theme/images/banner.gif alt=Welcome> </div> </div><div class="widget recent-posts"> <h2>Recent Posts</h2> <ul> <li> <a href=/2019/May/20/elasticsearch-data-organization.html> <img alt="Elasticsearch: Data organization" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-data-organization.html>Elasticsearch: Data organization</a> <li> <a href=/2019/May/20/elasticsearch-intro.html> <img alt="Elasticsearch: Intro" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-intro.html>Elasticsearch: Intro</a> <li> <a href=/2019/Apr/20/javascript-popups.html> <img alt="JavaScript: Popups" src=https://i.imgur.com/FxmcwPy.png> </a> <a href=/2019/Apr/20/javascript-popups.html>JavaScript: Popups</a> <li> <a href=/2019/Mar/20/javascript-iterator-and-generator.html> <img alt="JavaScript: Iterator and generator" src=https://i.imgur.com/lev8iT9.jpg> </a> <a href=/2019/Mar/20/javascript-iterator-and-generator.html>JavaScript: Iterator and generator</a> <li> <a href=/2019/Feb/20/javascript-decorator.html> <img alt="JavaScript decorator" src=https://i.imgur.com/Sh3yLI0.png> </a> <a href=/2019/Feb/20/javascript-decorator.html>JavaScript decorator</a> </ul> </div><div class="widget labels"> <h2>Blog Archive</h2> <ul> <li> <a href=/2019/ > 2019 </a> <li> <a href=/2018/ > 2018 </a> <li> <a href=/2017/ > 2017 </a> <li> <a href=/2016/ > 2016 </a> <li> <a href=/2015/ > 2015 </a> <li> <a href=/2014/ > 2014 </a> <li> <a href=/2013/ > 2013 </a> <li> <a href=/2012/ > 2012 </a> <li> <a href=/2011/ > 2011 </a> <li> <a href=/2010/ > 2010 </a> </ul> </div><div class=widget> <h2>Twitter timeline</h2> <a class=twitter-timeline data-height=500 data-dnt=true data-theme=light href=https://twitter.com/_naa_4f data-chrome="noheader nofooter transparent noborders"> Tweets by manhhomienbienthuy </a> </div> </div> </div> <a href=# class="smooth-scroll back-to-top"> <i class="fa fa-arrow-circle-up fa-3x"></i> </a> </main> <footer> <div class=infos> <div class=wrapper> <div class=widget> <a href=/ title="manhhomienbienthuy's space" class=logo> <img alt="manhhomienbienthuy's space" src=/theme/images/logo_white.png> </a> <span class=right>I'm a hacker, enter my world...</span> </div><div class=widget> <p> Created with all my ♥ and soul, dedicated to my love, yunachan <p> Powered by <a href=http://blog.getpelican.com/ target=_blank>Pelican</a>, which takes great advantage of <a href=https://www.python.org/ target=_blank>Python</a> <p> This site content is licensed under a <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank> CC BY-NC-ND 4.0 </a> License. <p> Updated at <a target=_blank href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=2019-06-20T02:42:55"> 2019-06-20 02:42:55 </a> </div><div class=widget> <p> Hosting by <a href=https://manhhomienbienthuy.bitbucket.io/ >Bitbucket</a> and <a href=https://manhhomienbienthuy.github.io/ >Github</a>, image hosting by <a href=https://manhhomienbienthuy.imgur.com/ target=_blank>imgur</a>, <a href=https://instagram.com/manhhomienbienthuy/ target=_blank>Instagram</a> and <a href=https://photos.google.com/ target=_blank>Google Photo</a> <p> Theme based on <a href=https://vanice-veethemes.blogspot.com/ target=_blank>Vanice theme</a>, icons from <a href=https://fontawesome.com/ target=_blank>Font Awesome</a>, comments powered by <a href=https://disqus.com/home/forums/manhhomienbienthuy/ target=_blank>Disqus</a> </div> </div> </div> <div class=credits> <div class=wrapper> <div class=left> <!--
          Regarding copyright, in general, standalone pages (as
          opposed to files generated as part of manuals) on the GNU
          web server should be under CC BY-ND 4.0.  Please do NOT
          change or remove this without talking with the webmasters or
          licensing team first.  Please make sure the copyright date
          is consistent with the document.  For web pages, it is ok to
          list just the latest year the document was modified, or
          published.

          If you wish to list earlier years, that is ok too.  Either
          "2001, 2002, 2003" or "2001-2003" are ok for specifying
          years, as long as each year in the range is in fact a
          copyrightable year, i.e., a year in which the document was
          published (including being publicly visible on the web or in
          a revision control system).
        --> Copyright © 2010-2019 <a href=/pages/about-me.html><strong>manhhomienbienthuy</strong></a>. All rights reserved. </div> <div class=right> <ul> <li><a href=/ >Home</a> <li><a href=/pages/about-me.html>About</a> <li><a href=# class=smooth-scroll>Top ↑</a> </ul> </div> </div> </div></footer> <script src=https://code.jquery.com/jquery-3.2.1.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js></script> <script src=/theme/js/vpyeu.min.js?d72c87bd></script> <script id=dsq-count-scr src=https://manhhomienbienthuy.disqus.com/count.js async></script>