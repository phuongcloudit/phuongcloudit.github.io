<!DOCTYPE html><title>CORS - manhhomienbienthuy's space</title> <meta charset=utf-8> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=apple-touch-icon href=/theme/images/icon-touch.png> <link rel=icon sizes=192x192 href=/theme/images/icon-touch.png> <link rel="shortcut icon" href=/theme/images/favicon.ico> <link rel=author href=/humans.txt> <meta name=msapplication-TileImage content=/theme/images/icon-tile.png> <meta name=twitter:dnt content=on> <meta name=Author content=manhhomienbienthuy> <meta name=rating content=general> <meta name=twitter:card content=product> <meta name=twitter:site content=@_naa_4f> <meta name=twitter:creator content=@_naa_4f> <link href=/feeds/all.atom.xml type=application/atom+xml rel=alternate title="manhhomienbienthuy's space Full Atom Feed"> <meta name=description content="Một nhu cầu rất thông dụng với các developer web đó là truy truy vấn qua API. Tuy nhiên, việc truy vấn và xử lý dữ liệu từ API nhiều khi cũng rất khó khăn, rất nhiều lập trình viên phải đối mặt với các vấn đề liên quan đến …"> <meta name=keywords content="Web, fundamentals, AJAX, CORS, blog, naa, manhhomienbienthuy, pelican, static site generator"> <meta name=twitter:title content="CORS - manhhomienbienthuy's space"> <meta name=twitter:description content="Một nhu cầu rất thông dụng với các developer web đó là truy truy vấn qua API. Tuy nhiên, việc truy vấn và xử lý dữ liệu từ API nhiều khi cũng rất khó khăn, rất nhiều lập trình viên phải đối mặt với các vấn đề liên quan đến …"> <meta name=twitter:image content=/https://i.imgur.com/ez23P9O.png> <link rel=stylesheet href=//cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css> <link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css> <link rel=stylesheet href=/theme/css/vpyeu.min.css?5d2c7d5e> <header> <div class=navbar> <div class=wrapper> <div class=nav-menu> <div class=menu-toggle> <i class="fa fa-reorder"></i> </div> <ul class=menus> <li><a href=/ >Home</a> <li><a href=/category/general.html> General <li><a href=/category/life.html> Life <li><a href=/category/programming.html class=current> Programming <li><a href=/category/travel.html> Travel </ul> </div><div class="right links"> <ul> <li> <a href=https://twitter.com/_naa_4f target=_blank> <i class="fa fa-twitter"></i> </a> <li> <a href=https://instagram.com/manhhomienbienthuy/ target=_blank> <i class="fa fa-instagram"></i> </a> <li> <a href=https://www.facebook.com/manhhomienbienthuy target=_blank> <i class="fa fa-facebook"></i> </a> <li> <a href=https://github.com/manhhomienbienthuy target=_blank> <i class="fa fa-github"></i> </a> <li> <a href=/feeds/all.atom.xml target=_blank> <i class="fa fa-rss"></i> </a> </ul> </div> </div> </div><noscript> <div class="warning head-warn"> <div class=wrapper> <p><strong>Notice:</strong> While JavaScript is not essential for this website, your interaction with the content will be limited. Please turn JavaScript on for the full experience. </div> </div> </noscript><div class=banner> <div class=wrapper> <a href=/ > <img alt="manhhomienbienthuy's space" src=/theme/images/logo.png> </a> </div> </div></header> <main> <div class=wrapper> <div class=main-wrapper> <div class=entry> <div class=entry-detail> <div class=post> <h1 class=title> CORS </h1> <div class=meta> Posted in <a href=/category/programming.html>Programming</a> on January 20, 2019 by <a href=/pages/about-me.html>manhhomienbienthuy</a> <span class=right> <i class="fa fa-comments"></i> <a href=#disqus_thread data-disqus-identifier=/2019/Jan/20/cors.html> Comments </a> </span> </div> <div class=post-body> <img src=https://i.imgur.com/ez23P9O.png alt=CORS> <p>Một nhu cầu rất thông dụng với các developer web đó là truy truy vấn qua API. Tuy nhiên, việc truy vấn và xử lý dữ liệu từ API nhiều khi cũng rất khó khăn, rất nhiều lập trình viên phải đối mặt với các vấn đề liên quan đến CORS.</p> <p>CORS (Cross-origin resource sharing) là một cơ chế cho phép nhiều tài nguyên khác nhau (fonts, JavaScript, v.v...) của một trang web có thể được truy vấn từ domain khác với domain của trang đó.</p> <h1 id=tai-sao-chung-ta-can-cors>Tại sao chúng ta cần CORS<a class=headerlink href=#tai-sao-chung-ta-can-cors title="Permanent link">&para;</a></h1> <p>Lý do cần đến CORS trước hết là bởi vì <a href=https://www.w3.org/Security/wiki/Same_Origin_Policy>same-origin policy</a>. Đây là một chính sách liên quan đến bảo mật được cài đặt vào toàn bộ các trình duyệt hiện nay. Chính sách này ngăn chặn việc truy cập tài nguyên của các domain khác một cách vô tội vạ.</p> <p>Hãy thử tưởng tượng một kịch bản như sau:</p> <ul> <li>Bạn truy cập một trang web độc hại.</li> <li>Trang web đó sử dụng JavaScript để truy cập tin nhắn Facebook của bạn ở địa chỉ <code>https://facebook.com/messages</code>.</li> <li>Do bạn đã đăng nhập Facebook từ trước, nếu không có same-origin policy, trang web độc hại kia có thể thoải mái lấy dữ liệu của bạn và bất cứ điều gì chúng muốn.</li> </ul> <p>Same-origin policy chính là để ngăn chặn những tình huống như trên, giúp người dùng an toàn hơn khi lướt web. Bạn có thể thử trên web console và sẽ nhận được lỗi ngay:</p> <div class=codehilite><pre><span></span><span class=nx>$</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://facebook.com/messages&#39;</span><span class=p>)</span>
<span class=nx>Access</span> <span class=nx>to</span> <span class=nx>XMLHttpRequest</span> <span class=nx>at</span> <span class=s1>&#39;https://facebook.com/messages&#39;</span> <span class=nx>from</span>
<span class=nx>origin</span> <span class=s1>&#39;xxx&#39;</span> <span class=nx>has</span> <span class=nx>been</span> <span class=nx>blocked</span> <span class=nx>by</span> <span class=nx>CORS</span> <span class=nx>policy</span><span class=o>:</span> <span class=nx>No</span>
<span class=s1>&#39;Access-Control-Allow-Origin&#39;</span> <span class=nx>header</span> <span class=nx>is</span> <span class=nx>present</span> <span class=nx>on</span> <span class=nx>the</span> <span class=nx>requested</span>
<span class=nx>resource</span><span class=p>.</span>
</pre></div> <p>Truy cập URL trên từ bất kỳ domain nào ngoài <code>facebook.com</code> bạn cũng sẽ nhận được lỗi như vậy. Đó chính là nhờ same-origin policy.</p> <p>Thế nhưng trong thế giới web, không phải lúc nào tài nguyên từ domain hiện tại cũng là đủ cho một ứng dụng web. Rất nhiều lập trình viên thường xuyên phải thực hiện truy vấn đến các domain khác, đặc biệt là khi làm việc với các API.</p> <p>Có nhiều cách thức khác nhau để truy vấn đến các domain khác, đầu tiên đó là sử dụng <a href=http://en.wikipedia.org/wiki/JSONP>JSON-P</a> tuy nhiên phương pháp này cũng có nhiều hạn chế liên quan đến bảo mật. Một phương thức khác đó là sử dụng proxy nhưng đây cũng không phải là một phương pháp dễ dàng thực hiện do việc cài đặt và cấu hình cũng rất phức tạp.</p> <p>Đó là lúc chúng ta cần đến CORS. CORS sử dụng các HTTP header để "thông báo" cho trình duyệt rằng, một ứng dụng web chạy ở origin này (thường là domain này) có thể truy cập được các tài nguyên ở origin khác (domain khác). Một ứng dụng web sẽ thực hiện truy vấn HTTP cross-origin nếu nó yêu cầu đến các tài nguyên ở origin khác với origin nó đang chạy (khác giao thức, domain, port). Sự khác biệt về giao thức ở đây là khác biệt kiểu như HTTP với FTP chứ không phải HTTP và HTTPS (dù nhiều trình duyệt không cho phép trộn lẫn các tài nguyên truy cập bằng HTTP và HTTPS nhưng đó là vấn đề khác, không liên quan đến CORS).</p> <p>Các trường hợp cần đến CORS rất phổ biến trong thực tế. Một ví dụ rất điển hình như sau: một ứng dụng web chạy ở domain <code>foo.com</code> và nó cần truy vấn đến <code>bar.com</code> để lấy một vài dữ liệu (thường được thực hiện bởi JavaScript bằng cách sử dụng <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest>XMLHttpRequest</a>).</p> <p>Các trình duyệt đều cài đặt same-origin policy và tuân thủ nó rất chặt chẽ. Cài đặt XMLHttpRequest và kể cả <a href=https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API>Fetch API</a> cũng đều tuân thủ chính sách này. Do đó những truy vấn như ở trên sẽ không thu được kết quả gì, trừ khi máy chủ trả về response có các header CORS phù hợp.</p> <p>Như vậy, bằng việc sử dụng CORS, chúng ta có thể thúc đẩy việc giao tiếp trong ứng dụng web dễ dàng hơn rất nhiều.</p> <h1 id=cac-truy-van-dung-cors>Các truy vấn dùng CORS<a class=headerlink href=#cac-truy-van-dung-cors title="Permanent link">&para;</a></h1> <p>Các truy vấn sau bắt buộc phải sử dụng CORS, theo tiêu chuẩn <a href=https://fetch.spec.whatwg.org/#http-cors-protocol>quốc tế</a>.</p> <ul> <li>Các truy vấn bằng XMLHttpRequest hoặc Fetch API đến một domain khác, như trong ví dụ ở trên.</li> <li><a href=https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL>WebGL Texture</a></li> <li>Ảnh, video được vẽ vào canvas sử dụng <a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage><code>drawImage</code></a>.</li> <li>Web fonts truy vấn đến domain khác qua <code>@fontface</code> của CSS, trong đó trang web chỉ có thể sử dụng font dạng True Type nếu <a href=https://www.w3.org/TR/css-fonts-3/#font-fetching-requirements>được cho phép</a>.</li> </ul> <h1 id=lam-the-nao-e-su-dung-cors>Làm thế nào để sử dụng CORS<a class=headerlink href=#lam-the-nao-e-su-dung-cors title="Permanent link">&para;</a></h1> <p>Một hiểu lầm khá phổ biến, nhất là với các lập trình viên mới làm việc với API lại được làm việc với API của các hãng lớn, tài liệu đầy đủ, đó là cho rằng CORS là công việc của frontend. Nhưng thực ra CORS hoàn toàn là công việc của backend.</p> <p>Các lập trình viên frontend thường không cần phải thao tác nhiều nếu cần dùng đến các truy vấn CORS (trừ một số ngoại lệ như không được sử dụng thư viện hoặc phải hỗ trợ IE 8). Khi một trình duyệt gửi một truy vấn đến máy chủ, nó sẽ tự động thiết lập một số HTTP header (ví dụ <code>Origin</code>) chứa các thông tin về nguồn gốc của truy vấn đó.</p> <p>Về phía máy chủ, sau khi có được thông tin về nguồn gốc của truy vấn, nó có thể lựa chọn không phải hồi truy vấn đó, trả về lỗi hoặc trả về dữ liệu cần thiết. Trong trường hợp trả về dữ liệu, máy chủ cần thiết lập các HTTP header sao cho trình duyệt hiểu rằng truy vấn đó đã được chấp nhận.</p> <p>Như vậy,chúng ta có thể thấy rằng, CORS giúp thúc đấy quá trình trao đổi dữ liệu giữa trình duyệt và máy chủ. CORS hoàn toàn không có liên quan gì đến việc trao đổi trực tiếp giữa ứng dụng web mà một máy chủ web khác, ví dụ backend của ứng dụng đó truy cập đến tài nguyên trên một origin khác, nó cũng không cần đến CORS.</p> <h2 id=tao-truy-van-cors-bang-xmlhttprequest>Tạo truy vấn CORS bằng XMLHttpRequest<a class=headerlink href=#tao-truy-van-cors-bang-xmlhttprequest title="Permanent link">&para;</a></h2> <p>Trong phần này chúng ta sẽ tìm hiểu cách tạo ra các truy vấn CORS bằng JavaScript. CORS được hỗ trợ bởi hầu hết các trình duyệt hiện đại. Riêng với IE, nó chỉ hỗ trợ từ IE 8 trở lên mà thôi.</p> <h3 id=tao-truy-van>Tạo truy vấn<a class=headerlink href=#tao-truy-van title="Permanent link">&para;</a></h3> <p>Các trình duyệt Chrome, Firefox, Safari đều sử dụng version mới của XMLHttpRequest do đó việc truy vấn CORS diễn ra hết sức thuận lợi. IE thì sử dụng XDomainRequest, nó hoạt động gần giống với XMLHttpRequest nhưng có nhiều hạn chế hơn.</p> <p>Chúng ta có thể bắt đầu bằng cách tạo ra các object cần thiết. Dưới đây là một đoạn code như thế:</p> <div class=codehilite><pre><span></span><span class=kr>const</span> <span class=nx>createCORSRequest</span> <span class=o>=</span> <span class=p>(</span><span class=nx>method</span><span class=p>,</span> <span class=nx>url</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=kd>let</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
    <span class=k>if</span> <span class=p>(</span><span class=s1>&#39;withCredentials&#39;</span> <span class=k>in</span> <span class=nx>xhr</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// Kiểm tra XMLHttpRequest object có thuộc tính</span>
        <span class=c1>// withCredentials hay không</span>
        <span class=c1>// Thuộc tính này chỉ có ở XMLHttpRequest2</span>
        <span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=nx>method</span><span class=p>,</span> <span class=nx>url</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
    <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>XDomainRequest</span> <span class=o>!=</span> <span class=s1>&#39;undefined&#39;</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// Kiểm tra XDomainRequest</span>
        <span class=c1>// Đây là đối tượng chỉ có ở IE và</span>
        <span class=c1>// là cách để IE thực hiện truy vấn CORS</span>
        <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XDomainRequest</span><span class=p>();</span>
        <span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=nx>method</span><span class=p>,</span> <span class=nx>url</span><span class=p>);</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
        <span class=nx>xhr</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>return</span> <span class=nx>xhr</span><span class=p>;</span>
<span class=p>}</span>

<span class=kr>const</span> <span class=nx>request</span> <span class=o>=</span> <span class=nx>createCORSRequest</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span>
    <span class=s1>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span class=p>);</span>
<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;CORS is not supported&#39;</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> <p>Sau khi tạo được đối tượng XMLHttpRequest rồi thì chúng ta cần một số event handler, trong trường hợp này, chúng ta chỉ cần quan tâm 2 event <code>onload</code> và <code>onerror</code> là đủ. Ngoài ra còn một số event khác như <code>ontimeout</code>, <code>onprogress</code> không được sử dụng nhiều lắm.</p> <div class=codehilite><pre><span></span><span class=nx>request</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=nx>responseText</span> <span class=o>=</span> <span class=nx>request</span><span class=p>.</span><span class=nx>responseText</span><span class=p>;</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>responseText</span><span class=p>);</span>
<span class=p>}</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>onerror</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Error&#39;</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> <p>Thực ra các trình duyệt khác nhau lại có cách cài đặt rất khác nhau với event <code>onerror</code>. Ví dụ, Firefox trả về status là 0 và <code>statusText</code> luôn rỗng với mọi lỗi. Ngoài ra, các trình duyệt cũng thường không cho phép truy cập đến nội dung cụ thể của lỗi đã xảy ra, chúng ta chỉ biết rằng đã có lỗi mà thôi.</p> <h3 id=withcredentials><code>withCredentials</code><a class=headerlink href=#withcredentials title="Permanent link">&para;</a></h3> <p>Mặc định, các truy vấn CORS không gửi hoặc thiết lập bất cứ cookie nào trên trình duyệt. Nếu muốn sử dụng cookie trong truy vấn đó, chúng ta phải đặt thuộc tính <code>withCredentials</code> của truy vấn bằng <code>true</code>:</p> <div class=codehilite><pre><span></span><span class=nx>xhr</span><span class=p>.</span><span class=nx>withCredentials</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</pre></div> <p>Tuy nhiên, đó cũng mới chỉ là một nửa mà thôi. Nửa còn lại thuộc về phía máy chủ, đó là HTTP header <code>Access-Control-Allow-Credentials</code> phải là true (chúng ta sẽ tìm hiểu ở phần sau).</p> <p>Với giá trị <code>withCredentials</code> bằng <code>true</code>, cookie sẽ được tự động thêm vào cũng như thiết lập nếu có phản hồi từ máy chủ. Lưu ý rằng, cookie trong trường hợp này là third-party cookie và việc lưu trữ, truy cập cookie vẫn hoàn toàn thuân theo same-origin policy, do đó, chúng ta không thể truy cập cookie bằng <code>document.cookie</code> được. Nó hoàn toàn được xử lý tự động bởi trình duyệt.</p> <h3 id=gui-truy-van>Gửi truy vấn<a class=headerlink href=#gui-truy-van title="Permanent link">&para;</a></h3> <p>Sau khi mọi việc đã hoàn tất, việc cuối cùng chúng ta cần làm là gửi truy vấn đi nữa mà thôi:</p> <div class=codehilite><pre><span></span><span class=nx>request</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span>
</pre></div> <p>Lúc này truy vấn sẽ được gửi đến máy chủ, và nếu máy chủ đó chấp nhận CORS thì nó sẽ trả về response tương ứng. Hoạt động của truy vấn lúc này hoàn toàn giống với truy vấn có chúng origin thông thường.</p> <h2 id=tao-truy-van-cors-bang-jquery>Tạo truy vấn CORS bằng jQuery<a class=headerlink href=#tao-truy-van-cors-bang-jquery title="Permanent link">&para;</a></h2> <p>Hàm <code>$.ajax</code> của jQuery có thể được sử dụng cho các truy vấn thông thường lẫn truy vấn CORS (cookie cũng được hỗ trợ mặc định). Do đó nếu sử dụng jQuery thì công việc của lập trình viên cũng khá dễ dàng. Tuy nhiên, cần lưu ý một số điều như sau:</p> <ul> <li>Truy vấn CORS của jQuery không hỗ trợ object XDomainRequest của IE, chúng ta cần sử dụng thêm plugin để hỗ trợ việc này.</li> <li>Giá trị <code>$.support.cors</code> sẽ được gán là <code>true</code> nếu trình duyệt hỗ trợ CORS (với IE sẽ là <code>false</code>). Giá trị này có thể được sử dụng để kiểm tra xem CORS có được hỗ trợ hay không.</li> </ul> <p>Dưới đây là một đoạn code sử dụng jQuery để tạo truy vấn CORS:</p> <div class=codehilite><pre><span></span><span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span><span class=p>({</span>
    <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;GET&#39;</span><span class=p>,</span>
    <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span class=p>,</span>
    <span class=nx>success</span><span class=o>:</span> <span class=nx>data</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
    <span class=p>},</span>
    <span class=nx>error</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Error&#39;</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>})</span>
</pre></div> <h2 id=tao-truy-van-cors-bang-fetch-api>Tạo truy vấn CORS bằng Fetch API<a class=headerlink href=#tao-truy-van-cors-bang-fetch-api title="Permanent link">&para;</a></h2> <p>Chúng ta cũng có thể sử dụng Fetch API để tạo truy vấn CORS. Tuy nhiên, <code>fetch</code> mới chỉ xuất hiện từ ES6 nên nhiều trình duyệt vẫn chưa hỗ trợ nó (cụ thể là IE tất cả các phiên bản đều không hỗ trợ).</p> <p>Fetch API cho chúng ta một phương thức đơn giản để tạo các truy vấn, và nó đã cài đặt sẵn việc hỗ trợ CORS nên chúng ta cũng có thể thao tác rất đơn giản, giống như jQuery vậy. Tuy nhiên, kết quả trả về của <code>fetch</code> là một Promise do đó các thao tác xử lý kết quả sẽ khác nhiều jQuery.</p> <p>Lập trình với fetch rất đơn giản, thậm chí còn đơn giản hơn của với jQuery:</p> <div class=codehilite><pre><span></span><span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>response</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>())</span>
    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>)</span>
</pre></div> <h2 id=cau-hinh-may-chu-ho-tro-cors>Cấu hình máy chủ hỗ trợ CORS<a class=headerlink href=#cau-hinh-may-chu-ho-tro-cors title="Permanent link">&para;</a></h2> <p>Đây là phần phức tạp nhất, cũng là phần quan trọng nhất đối với CORS. Như đã nói ở trên, thực ra việc hỗ trợ CORS hay không phụ thuộc hoàn toàn vào máy chủ chứ không phải client.</p> <p>Có hai loại truy vấn CORS: loại truy vấn "đơn giản" và "không đơn giản".</p> <p>Một truy vấn đơn giản hoàn toàn không cần đến CORS preflight. Một truy vấn sẽ được gọi là đơn giản nếu nó thoả mãn những điều kiện sau:</p> <ul> <li>Phương thức của truy vấn là một trong các loại <code>GET</code>, <code>HEAD</code>, <code>POST</code>.</li> <li>Giá trị của <code>Content-Type</code> phải là một trong số các loại <code>application/x-www-form-urlencoded</code>, <code>multipart/form-data</code>, <code>text/plain</code>.</li> <li>Không có event handler nào với event <code>XMLHttpRequest.upload</code>.</li> <li>Không sử dụng đối tượng <code>ReadableStream</code> trong truy vấn.</li> <li>Các HTTP header sau phải khớp:<ul> <li><code>Accept</code></li> <li><code>Accept-Language</code></li> <li><code>Content-Language</code></li> <li><code>Last-Event-ID</code></li> </ul> </li> </ul> <p>Những truy vấn này được gọi là "đơn giản" bởi chúng có thể được coi là truy vấn thông thường từ trình duyệt mà không cần đến CORS, giống như submit một form HTML thông thường chẳng hạn.</p> <p>Những truy vấn không phải "đơn giản" sẽ là truy vấn không đơn giản, và chúng cần CORS preflight. CORS preflight có nghĩa là trước khi truy vấn được gửi, nó cần phải gửi một truy vấn trước bằng phương thức <code>OPTIONS</code>. Mục đích của truy vấn "preflight" này là nhằm kiểm tra xem truy vấn thực sự có an toàn để gửi và nhận hay không.</p> <h3 id=oi-voi-truy-van-on-gian>Đối với truy vấn đơn giản<a class=headerlink href=#oi-voi-truy-van-on-gian title="Permanent link">&para;</a></h3> <p>Một truy vấn CORS đơn giản như đã nói ở trên, có thể có gói tin HTTP dạng như sau:</p> <div class=codehilite><pre><span></span><span class=nf>GET</span> <span class=nn>/cors</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Origin</span><span class=o>:</span> <span class=l>http://api.bob.com</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>api.alice.com</span>
<span class=na>Accept-Language</span><span class=o>:</span> <span class=l>en-US</span>
<span class=na>Connection</span><span class=o>:</span> <span class=l>keep-alive</span>
<span class=na>User-Agent</span><span class=o>:</span> <span class=l>Mozilla/...</span>
</pre></div> <p>Với các phương thức khác, gói tin HTTP cũng tương tự như vậy. Lưu ý rằng, một truy vấn CORS hợp lệ luôn luôn có <code>Origin</code> ở trong header. Giá trị của header này hoàn toàn được thiết lập tự động bởi trình duyệt, và không ai có thể thay đổi nó được. Giá trị của header này sẽ bao gồm scheme (<code>http</code>), domain (<code>api.bob.com</code>) và cổng (trong trường hợp dùng cổng mặc định thì không cần, ví dụ http dùng cổng 80). Giá trị của header chính là biểu thị nguồn gốc của truy vấn.</p> <p>Một điểm lưu ý nữa là sự xuất hiện của header <code>Origin</code> không đồng nghĩa với việc truy vấn đó là cross origin. Dù tất cả các truy vấn cross origin đều có header này, nhưng một số truy vấn same origin cũng có header này. Điều đó phụ thuộc vào từng trình duyệt cụ thể.</p> <p>Ví dụ, Firefox không có header này cho các truy vấn same origin nhưng Chrome và Safari vẫn thêm header nay khi truy vấn same origin nhưng sử dụng các phương thức <code>POST</code>, <code>PUT</code> hoặc <code>DELETE</code>. Đây là một diểm cần lưu ý với các lập trình viên backend, vì nếu không để ý có thể không thêm origin của chính app trong danh sách các domain được chấp nhận, điều đó khiến cho chính truy vấn same origin lại gặp lỗi.</p> <p>Dưới đây là response của máy chủ phản hồi cho một truy vấn CORS hợp lệ:</p> <div class=codehilite><pre><span></span>Access-Control-Allow-Origin: http://api.bob.com
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: FooBar
</pre></div> <p>Tất cả các header liên quan đến CORS đều có phần đầu tiên là <code>Acess-Control-</code>. Ý nghĩa của từng header như sau:</p> <ul> <li><code>Access-Control-Allow-Origin</code> (bắt buộc): đây là header phải có trong mọi response cho một truy vấn CORS hợp lệ. Nếu không có header này, truy vấn sẽ bị lỗi, giá trị của nó có thể là giá trị của header <code>Origin</code> được gửi lên hoặc <code>*</code> biểu thị cho mọi origin.</li> <li><code>Access-Control-Allow-Credentials</code> (tuỳ chọn): Mặc định, cookie sẽ không được sử dụng trong các truy vấn CORS. Header này sẽ biểu thị giá trị logic rằng có thể sử dụng cookie hay không. Giá trị duy nhất của header này là <code>true</code>. Nếu không muốn sử dụng cookie thì thông thường người ta sẽ bỏ header này trong response chứ không phải đặt giá trị nó là <code>false</code>. Lưu ý rằng, header này chỉ hoạt động nếu phía client cũng đặt giá trị <code>withCredentials = true</code> như đã nói ở phần trước.</li> <li><code>Access-Control-Expose-Headers</code> (tuỳ chọn): Một đối tượng XMLHttpRequest có một phương thức <code>getResponseHeader</code>, phương thức này sẽ trả về giá trị của một header cụ thể trong response. Với các truy vấn CORS, phương thức này chỉ có thể truy cập được một số header đơn giản mà thôi. Nếu muốn phương thức này có thể truy cập nhiều header hơn, chúng ta cần đến giá trị của header này. Giá trị của header này là một danh sách các header có thể truy cập được, ngăn cách bằng dấu phẩy.</li> </ul> <h3 id=oi-voi-truy-van-can-preflight>Đối với truy vấn cần preflight<a class=headerlink href=#oi-voi-truy-van-can-preflight title="Permanent link">&para;</a></h3> <p>Không phải truy vấn nào cũng là đơn giản do việc trao đổi dữ liệu giữa trình duyệt và máy chủ diễn ra rất đa dạng. Các phương thức <code>PUT</code> hay <code>DELETE</code> cũng thường xuyên được sử dụng. Ngoài ra kiểu dữ liệu JSON (<code>Content-Type: application/json</code>) cũng là lựa chọn của nhiều lập trình viên. Trong những trường hợp như vậy, trước khi truy vấn chính được thực hiện thì một truy vấn gọi là preflight sẽ được gửi đi trước.</p> <p>Ở phía frontend, các truy vấn đơn giản hay phức tạp đều trông sẽ giống nhau. Truy vấn preflight hoàn toàn được thực hiện ngầm và trong suốt với người dùng. Truy vấn preflight sẽ được gửi đi trước nhằm xác định xem truy vấn thực sự có thể thực hiện được hay không.</p> <p>Sau khi có được phản hồi tích cực, trình duyệt sẽ gửi truy vấn thực sự. Kết quả của truy vấn preflight có thể được cache nên nó không cần phải thực hiện cho mọi truy vấn.</p> <p>Dưới đây là một gói tin HTTP cho truy vấn preflight:</p> <div class=codehilite><pre><span></span><span class=nf>OPTIONS</span> <span class=nn>/cors</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Origin</span><span class=o>:</span> <span class=l>http://api.bob.com</span>
<span class=na>Access-Control-Request-Method</span><span class=o>:</span> <span class=l>PUT</span>
<span class=na>Access-Control-Request-Headers</span><span class=o>:</span> <span class=l>X-Custom-Header</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>api.alice.com</span>
<span class=na>Accept-Language</span><span class=o>:</span> <span class=l>en-US</span>
<span class=na>Connection</span><span class=o>:</span> <span class=l>keep-alive</span>
<span class=na>User-Agent</span><span class=o>:</span> <span class=l>Mozilla/...</span>
</pre></div> <p>Tương tự như truy vấn đơn giản, truy vấn này cũng tự động được thêm header <code>Origin</code>. Truy vấn preflight sẽ được thực hiện bằng phương thức <code>OPTIONS</code> với một số header đặc thù:</p> <ul> <li><code>Access-Control-Request-Method</code>: Đây là phương thức HTTP dùng trong truy vấn thực sự. Giá trị của header luôn luôn phải có, ngay cả khi các phương thức đó cũng là phương thức của một truy vấn đơn giản.</li> <li><code>Access-Control-Request-Headers</code>: Đây là danh sách (ngăn cách bằng dấu phẩy) các header được thêm vào truy vấn.</li> </ul> <p>Truy vấn preflight là một cách để hỏi máy chủ rằng, liệu truy vấn thực sự có thể thực hiện được hay không. Mà máy chủ dựa vào hai header này để quyết định xem có chấp nhận truy vấn hay không. Nếu chấp nhận, máy chủ sẽ phản hồi như sau:</p> <div class=codehilite><pre><span></span><span class=nt>Access-Control-Allow-Origin</span><span class=o>:</span> <span class=nt>http</span><span class=o>://</span><span class=nt>api</span><span class=p>.</span><span class=nc>bob</span><span class=p>.</span><span class=nc>com</span>
<span class=nt>Access-Control-Allow-Methods</span><span class=o>:</span> <span class=nt>GET</span><span class=o>,</span> <span class=nt>POST</span><span class=o>,</span> <span class=nt>PUT</span>
<span class=nt>Access-Control-Allow-Headers</span><span class=o>:</span> <span class=nt>X-Custom-Header</span>
<span class=nt>Content-Type</span><span class=o>:</span> <span class=nt>text</span><span class=o>/</span><span class=nt>html</span><span class=o>;</span> <span class=nt>charset</span><span class=o>=</span><span class=nt>utf-8</span>
</pre></div> <p>Trong đó, response có thể có những header như sau:</p> <ul> <li><code>Access-Control-Allow-Origin</code> (bắt buộc): Tương tự như trường hợp truy vấn CORS đơn giản.</li> <li><code>Access-Control-Allow-Methods</code> (bắt buộc): Là một danh sách (ngăn cách bằng dấu phẩy) các phương thức HTTP được chấp nhận. Dù truy vấn preflight có hỏi về một phương thức cụ thể của truy vấn tiếp theo, giá trị của header này trong responses có thể bao gồm tất cả các phương thức được chấp nhận.</li> <li><code>Access-Control-Allow-Headers</code> (bắt buộc nếu truy vấn có header <code>Access-Control-Request-Headers</code>): Là danh sách các header (ngăn cách bằng dấu phẩy) được hỗ trợ. Tương tự như header trước, giá trị của header này cũng có thể bao gồm tất cả các header được chấp nhận.</li> <li><code>Access-Control-Allow-Credentials</code> (tuỳ chọn): Tương tự như trường hợp truy vấn CORS đơn giản.</li> <li><code>Access-Control-Max-Age</code> (tuỳ chọn): Truy vấn preflight không nhất thiết phải được thực hiện cho mọi truy vấn, mà kết quả của nó có thể cache được. Giá trị của header này chính là số giây mà giá trị của truy vấn preflight có thể được cache.</li> </ul> <p>Một khi truy vấn preflight có được phản hồi và được chấp nhận, trình duyệt sẽ thực hiện truy vấn thực sự. Truy vấn lúc này tương tự như truy vấn CORS đơn giản và quá trình xử lý cũng như phản hồi hoàn toàn tương tự như vậy.</p> <p>Nếu muốn từ chối truy vấn CORS, máy chủ có thể phần hồi một gói tin HTTP bình thường (mã 200) nhưng không có chứa HTTP header nào liên quan đến CORS. Trong trường hợp truy vấn preflight nhận được phản hồi như vậy, trình duyệt sẽ hiểu là truy vấn không được chấp nhận và nó sẽ không gửi thêm truy vấn nào nữa.</p> <p>Về phía client, nếu trong trường hợp không thực hiện được truy vấn, event <code>onerror</code> sẽ được gọi. Tuy nhiên, như đã nó ở trên, trình duyệt cũng không thể truy cập được nhiều thông tin về lỗi đó, chỉ đơn giản là biết có lỗi mà thôi.</p> <h1 id=ho-tro-cors-cua-cac-framework>Hỗ trợ CORS của các framework<a class=headerlink href=#ho-tro-cors-cua-cac-framework title="Permanent link">&para;</a></h1> <h2 id=ruby-on-rails>Ruby on Rails<a class=headerlink href=#ruby-on-rails title="Permanent link">&para;</a></h2> <p>Ruby on Rails cho phép chúng ta thiết lập cũng như thay đổi các header trong response khá dễ dàng, do đó, muốn chấp nhận truy vấn CORS, chúng ta có thể đơn giản là làm như sau:</p> <div class=codehilite><pre><span></span><span class=n>skip_before_filter</span> <span class=ss>:verify_authenticity_token</span>
<span class=n>before_action</span> <span class=ss>:cors_preflight_check</span>
<span class=n>after_action</span> <span class=ss>:cors_set_access_control_headers</span>

<span class=k>def</span> <span class=nf>cors_set_access_control_headers</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Allow-Origin&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;*&quot;</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Allow-Methods&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;GET, POST&quot;</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Max-Age&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;1728000&quot;</span>
<span class=k>end</span>

<span class=k>def</span> <span class=nf>cors_preflight_check</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Allow-Origin&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;*&quot;</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Allow-Methods&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;GET, POST&quot;</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Allow-Headers&quot;</span><span class=o>]</span> <span class=o>=</span>
    <span class=s2>&quot;X-Requested-With, X-Prototype-Version&quot;</span>
  <span class=n>headers</span><span class=o>[</span><span class=s2>&quot;Access-Control-Max-Age&quot;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&quot;1728000&quot;</span>
<span class=k>end</span>
</pre></div> <h2 id=django>Django<a class=headerlink href=#django title="Permanent link">&para;</a></h2> <p>Với Django chúng ta phải sử dụng thêm một package, đó là <a href=https://github.com/ottoyiu/django-cors-headers>Django CORS headers</a>. Package này sẽ giúp chúng ta thiết lập các header cần thiết cho một truy vấn CORS, đồng thời cho chúng ta khả năng cấu hình URL nào cho phép CORS, URL nào thì không.</p> <p>Với package này, chúng ta có thể cấu hình sao cho chỉ có API mới hỗ trợ CORS như sau:</p> <div class=codehilite><pre><span></span><span class=n>CORS_ORIGIN_ALLOW_ALL</span> <span class=o>=</span> <span class=kc>True</span>
<span class=n>CORS_URLS_REGEX</span> <span class=o>=</span> <span class=sa>r</span><span class=s1>&#39;^/api/v1/.*$&#39;</span>
</pre></div> <p>Ngoài ra còn rất nhiều cấu hình khác nữa, cho phép chúng ta chỉ chấp nhận truy vấn CORS từ một vài origin nhất định chẳng hạn (<code>CORS_ORIGIN_REGEX_WHITELIST</code>). Nội dung chi tiết xin mới các bạn xem cụ thể tại README của package đó.</p> <h2 id=flask>Flask<a class=headerlink href=#flask title="Permanent link">&para;</a></h2> <p>Tương tự như Django, với Flask, chúng ta cũng phải sử dụng thêm một package, đó là <a href=https://flask-cors.readthedocs.io/en/latest/ >Flask-CORS</a> mới có thể chấp nhận các truy vấn CORS được.</p> <div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>flask</span> <span class=k>import</span> <span class=n>Flask</span>
<span class=kn>from</span> <span class=nn>flask.ext.cors</span> <span class=k>import</span> <span class=n>CORS</span><span class=p>,</span> <span class=n>cross_origin</span>


<span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
<span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;SECRET_KEY&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;The quick brown fox jumps over the lazy dog&#39;</span>
<span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;CORS_HEADERS&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;Content-Type&#39;</span>

<span class=n>cors</span> <span class=o>=</span> <span class=n>CORS</span><span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=n>resources</span><span class=o>=</span><span class=p>{</span><span class=sa>r</span><span class=s1>&#39;/foo/*&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;origins&#39;</span><span class=p>:</span> <span class=s1>&#39;*&#39;</span><span class=p>}})</span>


<span class=nd>@app</span><span class=o>.</span><span class=n>route</span><span class=p>(</span><span class=s1>&#39;/foo&#39;</span><span class=p>)</span>
<span class=nd>@cross_origin</span><span class=p>()</span>
<span class=k>def</span> <span class=nf>foo</span><span class=p>():</span>
    <span class=k>return</span> <span class=s1>&#39;Hello, world! CORS works&#39;</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</pre></div> <h1 id=ket-luan>Kết luận<a class=headerlink href=#ket-luan title="Permanent link">&para;</a></h1> <p>Trên đây là tất cả những gì cơ bản về CORS, nó giúp các ứng dụng web dễ dàng hơn trong việc trao đổi thông tin cũng như hiển thị nội dung, tăng khả năng tương tác giữa các dịch vụ trên Internet. Hy vọng bài viết giúp ích cho mọi người trong quá trình làm việc.</p> </div> <div class=post-footer> <div class=tags> <i class="fa fa-tags"></i> <span>#Web</span> <span>#fundamentals</span> <span>#AJAX</span> <span>#CORS</span> </div> </div> </div><div class=blog-pager> <span class=newer-link> <a href=/2019/Jan/28/phu-yen-travel.html> Newer Post </a> </span> <span class=older-link> <a href=/2019/Jan/11/funny-fizzbuzz-with-python.html> Older Post </a> </span> </div><div class=comments> <div class=finally> <p><em>I apologise for any typos. If you notice a problem, please let me know.</em> <p>Thank you all for your attention. </div> <div id=disqus_thread></div> <script src=/theme/js/disqus.min.js?81e8a5f5></script> <noscript> Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript> comments powered by Disqus. </a> </noscript> </div></div> </div> </div> <div class=sidebar-wrapper> <div class=widget> <h2>Welcome</h2> <div> <img src=/theme/images/banner.gif alt=Welcome> </div> </div><div class="widget recent-posts"> <h2>Recent Posts</h2> <ul> <li> <a href=/2019/May/20/elasticsearch-data-organization.html> <img alt="Elasticsearch: Data organization" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-data-organization.html>Elasticsearch: Data organization</a> <li> <a href=/2019/May/20/elasticsearch-intro.html> <img alt="Elasticsearch: Intro" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-intro.html>Elasticsearch: Intro</a> <li> <a href=/2019/Apr/20/javascript-popups.html> <img alt="JavaScript: Popups" src=https://i.imgur.com/FxmcwPy.png> </a> <a href=/2019/Apr/20/javascript-popups.html>JavaScript: Popups</a> <li> <a href=/2019/Mar/20/javascript-iterator-and-generator.html> <img alt="JavaScript: Iterator and generator" src=https://i.imgur.com/lev8iT9.jpg> </a> <a href=/2019/Mar/20/javascript-iterator-and-generator.html>JavaScript: Iterator and generator</a> <li> <a href=/2019/Feb/20/javascript-decorator.html> <img alt="JavaScript decorator" src=https://i.imgur.com/Sh3yLI0.png> </a> <a href=/2019/Feb/20/javascript-decorator.html>JavaScript decorator</a> </ul> </div><div class="widget labels"> <h2>Blog Archive</h2> <ul> <li> <a href=/2019/ > 2019 </a> <li> <a href=/2018/ > 2018 </a> <li> <a href=/2017/ > 2017 </a> <li> <a href=/2016/ > 2016 </a> <li> <a href=/2015/ > 2015 </a> <li> <a href=/2014/ > 2014 </a> <li> <a href=/2013/ > 2013 </a> <li> <a href=/2012/ > 2012 </a> <li> <a href=/2011/ > 2011 </a> <li> <a href=/2010/ > 2010 </a> </ul> </div><div class=widget> <h2>Twitter timeline</h2> <a class=twitter-timeline data-height=500 data-dnt=true data-theme=light href=https://twitter.com/_naa_4f data-chrome="noheader nofooter transparent noborders"> Tweets by manhhomienbienthuy </a> </div> </div> </div> <a href=# class="smooth-scroll back-to-top"> <i class="fa fa-arrow-circle-up fa-3x"></i> </a> </main> <footer> <div class=infos> <div class=wrapper> <div class=widget> <a href=/ title="manhhomienbienthuy's space" class=logo> <img alt="manhhomienbienthuy's space" src=/theme/images/logo_white.png> </a> <span class=right>I'm a hacker, enter my world...</span> </div><div class=widget> <p> Created with all my ♥ and soul, dedicated to my love, yunachan <p> Powered by <a href=http://blog.getpelican.com/ target=_blank>Pelican</a>, which takes great advantage of <a href=https://www.python.org/ target=_blank>Python</a> <p> This site content is licensed under a <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank> CC BY-NC-ND 4.0 </a> License. <p> Updated at <a target=_blank href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=2019-06-20T02:42:55"> 2019-06-20 02:42:55 </a> </div><div class=widget> <p> Hosting by <a href=https://manhhomienbienthuy.bitbucket.io/ >Bitbucket</a> and <a href=https://manhhomienbienthuy.github.io/ >Github</a>, image hosting by <a href=https://manhhomienbienthuy.imgur.com/ target=_blank>imgur</a>, <a href=https://instagram.com/manhhomienbienthuy/ target=_blank>Instagram</a> and <a href=https://photos.google.com/ target=_blank>Google Photo</a> <p> Theme based on <a href=https://vanice-veethemes.blogspot.com/ target=_blank>Vanice theme</a>, icons from <a href=https://fontawesome.com/ target=_blank>Font Awesome</a>, comments powered by <a href=https://disqus.com/home/forums/manhhomienbienthuy/ target=_blank>Disqus</a> </div> </div> </div> <div class=credits> <div class=wrapper> <div class=left> <!--
          Regarding copyright, in general, standalone pages (as
          opposed to files generated as part of manuals) on the GNU
          web server should be under CC BY-ND 4.0.  Please do NOT
          change or remove this without talking with the webmasters or
          licensing team first.  Please make sure the copyright date
          is consistent with the document.  For web pages, it is ok to
          list just the latest year the document was modified, or
          published.

          If you wish to list earlier years, that is ok too.  Either
          "2001, 2002, 2003" or "2001-2003" are ok for specifying
          years, as long as each year in the range is in fact a
          copyrightable year, i.e., a year in which the document was
          published (including being publicly visible on the web or in
          a revision control system).
        --> Copyright © 2010-2019 <a href=/pages/about-me.html><strong>manhhomienbienthuy</strong></a>. All rights reserved. </div> <div class=right> <ul> <li><a href=/ >Home</a> <li><a href=/pages/about-me.html>About</a> <li><a href=# class=smooth-scroll>Top ↑</a> </ul> </div> </div> </div></footer> <script src=https://code.jquery.com/jquery-3.2.1.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js></script> <script src=/theme/js/vpyeu.min.js?d72c87bd></script> <script id=dsq-count-scr src=https://manhhomienbienthuy.disqus.com/count.js async></script>