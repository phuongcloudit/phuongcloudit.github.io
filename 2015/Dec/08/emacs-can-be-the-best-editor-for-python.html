<!DOCTYPE html><title>Emacs can be the best editor for Python? - manhhomienbienthuy's space</title> <meta charset=utf-8> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=apple-touch-icon href=/theme/images/icon-touch.png> <link rel=icon sizes=192x192 href=/theme/images/icon-touch.png> <link rel="shortcut icon" href=/theme/images/favicon.ico> <link rel=author href=/humans.txt> <meta name=msapplication-TileImage content=/theme/images/icon-tile.png> <meta name=twitter:dnt content=on> <meta name=Author content=manhhomienbienthuy> <meta name=rating content=general> <meta name=twitter:card content=product> <meta name=twitter:site content=@_naa_4f> <meta name=twitter:creator content=@_naa_4f> <link href=/feeds/all.atom.xml type=application/atom+xml rel=alternate title="manhhomienbienthuy's space Full Atom Feed"> <meta name=description content="Trong bài viết này, tôi sẽ giới thiệu một editor rất mạnh mẽ cho việc phát triển với Python, đó là Emacs. Thế giới vẫn còn nhiều tranh luận xung quanh việc Emacs hay Vim, đâu là editor tốt nhất. Ở trong bài viết này, tôi sẽ không tham gia …"> <meta name=keywords content="Emacs, Python, editor, blog, naa, manhhomienbienthuy, pelican, static site generator"> <meta name=twitter:title content="Emacs can be the best editor for Python? - manhhomienbienthuy's space"> <meta name=twitter:description content="Trong bài viết này, tôi sẽ giới thiệu một editor rất mạnh mẽ cho việc phát triển với Python, đó là Emacs. Thế giới vẫn còn nhiều tranh luận xung quanh việc Emacs hay Vim, đâu là editor tốt nhất. Ở trong bài viết này, tôi sẽ không tham gia …"> <meta name=twitter:image content=/https://i.imgur.com/lMyasuo.png> <link rel=stylesheet href=//cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css> <link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css> <link rel=stylesheet href=/theme/css/vpyeu.min.css?5d2c7d5e> <header> <div class=navbar> <div class=wrapper> <div class=nav-menu> <div class=menu-toggle> <i class="fa fa-reorder"></i> </div> <ul class=menus> <li><a href=/ >Home</a> <li><a href=/category/general.html class=current> General <li><a href=/category/life.html> Life <li><a href=/category/programming.html> Programming <li><a href=/category/travel.html> Travel </ul> </div><div class="right links"> <ul> <li> <a href=https://twitter.com/_naa_4f target=_blank> <i class="fa fa-twitter"></i> </a> <li> <a href=https://instagram.com/manhhomienbienthuy/ target=_blank> <i class="fa fa-instagram"></i> </a> <li> <a href=https://www.facebook.com/manhhomienbienthuy target=_blank> <i class="fa fa-facebook"></i> </a> <li> <a href=https://github.com/manhhomienbienthuy target=_blank> <i class="fa fa-github"></i> </a> <li> <a href=/feeds/all.atom.xml target=_blank> <i class="fa fa-rss"></i> </a> </ul> </div> </div> </div><noscript> <div class="warning head-warn"> <div class=wrapper> <p><strong>Notice:</strong> While JavaScript is not essential for this website, your interaction with the content will be limited. Please turn JavaScript on for the full experience. </div> </div> </noscript><div class=banner> <div class=wrapper> <a href=/ > <img alt="manhhomienbienthuy's space" src=/theme/images/logo.png> </a> </div> </div></header> <main> <div class=wrapper> <div class=main-wrapper> <div class=entry> <div class=entry-detail> <div class=post> <h1 class=title> Emacs can be the best editor for Python? </h1> <div class=meta> Posted in <a href=/category/general.html>General</a> on December 08, 2015 by <a href=/pages/about-me.html>manhhomienbienthuy</a> <span class=right> <i class="fa fa-comments"></i> <a href=#disqus_thread data-disqus-identifier=/2015/Dec/08/emacs-can-be-the-best-editor-for-python.html> Comments </a> </span> </div> <div class=post-body> <img src=https://i.imgur.com/lMyasuo.png alt="Emacs can be the best editor for Python?"> <p>Trong bài viết này, tôi sẽ giới thiệu một editor rất mạnh mẽ cho việc phát triển với Python, đó là Emacs. Thế giới vẫn còn nhiều tranh luận xung quanh việc Emacs hay Vim, đâu là editor tốt nhất. Ở trong bài viết này, tôi sẽ không tham gia vào việc đó. Tôi sẽ giữ một cái nhìn khách quan nhất có thể và bài viết chỉ đơn giản là giới thiệu các bước cần thiết để cấu hình Emacs cho phù hợp với công việc phát triển bằng ngôn ngữ Python. Và bạn có thêm 1 lựa chọn nữa cho editor nào mình thích.</p> <blockquote> <p>Python là ngôn ngữ mà tôi làm việc nhiều nhất với Emacs nên bài viết này tôi chỉ tập trung cấu hình Emacs cho Python mà thôi. Tuy nhiên Emacs rất mạnh mẽ và có thể phù hợp với bất kỳ ngôn ngữ nào.</p> </blockquote> <h1 id=cai-at-va-su-dung-co-ban>Cài đặt và sử dụng cơ bản<a class=headerlink href=#cai-at-va-su-dung-co-ban title="Permanent link">&para;</a></h1> <h2 id=cai-at>Cài đặt<a class=headerlink href=#cai-at title="Permanent link">&para;</a></h2> <p>Việc cài đặt Emacs không phải là vấn đề chính của bài viết này, nên tôi sẽ không đi vào chi tiết. Bạn có thể tìm thấy nhiều hướng dẫn để cài đặt Emacs trên hệ thống của mình.</p> <p>Tôi sử dụng Ubuntu và tôi cài Emacs với lệnh sau:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> sudo apt-get install emacs
</pre></div> <p>Lưu ý là bạn cần sử dụng Emacs 24 để sử dụng các package vì Emacs 23 trở xuống không hỗ trợ việc này, bạn sẽ cần phải cấu hình thêm một chút.</p> <p>Để cài đặt Emacs 24 nếu mặc định máy của bạn chỉ cài Emacs 23 với lệnh sau:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> sudo apt-get install emacs24
</pre></div> <p>Với các hệ thống khác, việc cài đặt cũng không khó, bạn hãy tự làm nó. Sau khi cài đặt, Emacs khi bật lên sẽ có giao diện mặc định giống hình dưới đây.</p> <p><img alt="default emacs" src=https://i.imgur.com/Sd5XEpo.png></p> <h2 id=su-dung-co-ban>Sử dụng cơ bản<a class=headerlink href=#su-dung-co-ban title="Permanent link">&para;</a></h2> <p>Việc sử dụng Emacs cũng không phải là nội dung chính của bài viết này, nên tôi không đi vào chi tiết. Bạn có thể tìm thấy hướng dẫn ở rất nhiều nơi. Cách dễ dàng nhất là bạn đọc hướng dẫn được tích hợp sẵn trong chính Emacs.</p> <p>Để đọc Tutorial, bạn sử dụng phím mũi tên chuyển đến dòng "Emacs Tutorial" rồi ấn Enter hoặc click chuột thẳng vào dòng chữ đó cũng được. Tutorial khi được mở ra sẽ có nội dung như dưới đây:</p> <div class=codehilite><pre><span></span><span class=nv>Emacs</span> <span class=nv>commands</span> <span class=nv>generally</span> <span class=nv>involve</span> <span class=nv>the</span> <span class=nv>CONTROL</span> <span class=nv>key</span> <span class=p>(</span><span class=nv>sometimes</span> <span class=nv>labeled</span>
<span class=o>`</span><span class=nv>CTRL</span><span class=o>`</span> <span class=k>or</span> <span class=o>`</span><span class=nv>CTL</span><span class=o>`</span><span class=p>)</span> <span class=k>or</span> <span class=nv>the</span> <span class=nv>META</span> <span class=nv>key</span> <span class=p>(</span><span class=nv>sometimes</span> <span class=nv>labeled</span> <span class=o>`</span><span class=nv>EDIT</span><span class=o>`</span> <span class=k>or</span> <span class=o>`</span><span class=nv>ALT</span><span class=o>`</span><span class=p>)</span><span class=o>.</span>  <span class=nv>Rather</span>
<span class=nv>than</span> <span class=nv>write</span> <span class=nv>that</span> <span class=nv>in</span> <span class=nv>full</span> <span class=nv>each</span> <span class=nv>time,</span> <span class=nv>we</span><span class=ss>&#39;ll</span> <span class=nv>use</span> <span class=nv>the</span> <span class=nv>following</span>
<span class=nv>abbreviations:</span>

<span class=nv>C-&lt;chr&gt;</span>  <span class=nv>means</span> <span class=nv>hold</span> <span class=nv>the</span> <span class=nv>CONTROL</span> <span class=nv>key</span> <span class=k>while</span> <span class=nv>typing</span> <span class=nv>the</span> <span class=nv>character</span> <span class=nv>&lt;chr&gt;</span>
   <span class=nv>Thus,</span> <span class=nv>C-f</span> <span class=nv>would</span> <span class=nv>be:</span> <span class=nv>hold</span> <span class=nv>the</span> <span class=nv>CONTROL</span> <span class=nv>key</span> <span class=k>and</span> <span class=nv>type</span> <span class=nv>f.</span>
<span class=nv>M-&lt;chr&gt;</span>  <span class=nv>means</span> <span class=nv>hold</span> <span class=nv>the</span> <span class=nv>META</span> <span class=k>or</span> <span class=nv>EDIT</span> <span class=k>or</span> <span class=nv>ALT</span> <span class=nv>key</span> <span class=nv>down</span> <span class=k>while</span> <span class=nv>typing</span> <span class=nv>&lt;chr&gt;.</span>
   <span class=nv>If</span> <span class=nv>there</span> <span class=nv>is</span> <span class=nv>no</span> <span class=nv>META,</span> <span class=nv>EDIT</span> <span class=k>or</span> <span class=nv>ALT</span> <span class=nv>key,</span> <span class=nv>instead</span> <span class=nv>press</span> <span class=k>and</span> <span class=nv>release</span> <span class=nv>the</span>
   <span class=nv>ESC</span> <span class=nv>key</span> <span class=k>and</span> <span class=nv>then</span> <span class=nv>type</span> <span class=nv>&lt;chr&gt;.</span>  <span class=nv>We</span> <span class=nv>write</span> <span class=nv>&lt;ESC&gt;</span> <span class=nv>for</span> <span class=nv>the</span> <span class=nv>ESC</span> <span class=nv>key.</span>
</pre></div> <p>Ở Tutorial có hướng dẫn rất đầy đủ về những tính năng và cách sử dụng Emacs. Một tổ hợp phím được sử dụng rất nhiều đó là <code>C-x C-s</code> (dùng để lưu file). Viết <code>C-x C-s</code> có nghĩa là để lưu được file, bạn cần ấn các phím CONTROL và <code>X</code> cùng một lúc, sau đó ấn tiếp phím CONTROL và <code>S</code>. Bạn có thể xem tutorial để biết thêm các tổ hợp phím khác. Dùng Emacs cũng không quá khó.</p> <h2 id=cau-hinh-voi-cac-package>Cấu hình với các package<a class=headerlink href=#cau-hinh-voi-cac-package title="Permanent link">&para;</a></h2> <p>Một trong những điểm mạnh của Emacs là nó rất đơn giản mà mạnh mẽ với khả năng mở rộng cấu hình. Để cấu hình Emacs, bạn cần những tạo ra các <a href=http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html>Initialization File</a>, có thể là <code>.emacs</code>, <code>.emacs.el</code> hoặc <code>init.el</code>. Ở đây tôi chọn file <code>init.el</code>. Tất cả các file này đều cấu hình bằng ngôn ngữ Emacs Lisp, nên nếu rảnh rỗi bạn có thể nghiên cứu ngôn ngữ này, đó cũng là một ngôn ngữ rất hay.</p> <p>Trong các hệ điều hành họ Unix, file <code>init.el</code> nằm ở đường dẫn <code>$HOME/.emacs.d/init.el</code>:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> touch ~/.emacs.d/init.el
</pre></div> <p>Ở Windows, vì không có biến môi trường <code>HOME</code> nên file nên được đặt ở <code>C:\.emacs.d\init.el</code>. Bạn có thể tham khảo thêm hướng dẫn cho Windows để biết thêm thông tin. <a href=http://www.gnu.org/software/emacs/manual/html_node/efaq-w32/Location-of-init-file.html#Location-of-init-file>GNU Emacs FAQ for MS Windows &gt; Where do I put my init file?</a></p> <p><a href=https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html>Packages</a> được sử dụng để tùy biến Emacs, package có thể nhận được từ nhiều nguồn khác nhau. Một trong những nguồn chính của các package là <a href=https://melpa.org/#/ >MELPA</a>. Trong bài viết này, các package đều lấy từ nguồn này.</p> <h2 id=theme-va-tuy-chinh-giao-dien>Theme và tùy chỉnh giao diện<a class=headerlink href=#theme-va-tuy-chinh-giao-dien title="Permanent link">&para;</a></h2> <p>Bây giờ hãy bắt đầu với việc cấu hình Emacs, đoạn cấu hình dưới đây dùng để cài đặt package và cài một theme.</p> <div class=codehilite><pre><span></span><span class=c1>;; init.el --- Emacs configuration</span>

<span class=c1>;; INSTALL PACKAGES</span>
<span class=c1>;; --------------------------------------</span>

<span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;package</span><span class=p>)</span>

<span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;package-archives</span>
      <span class=o>&#39;</span><span class=p>(</span><span class=s>&quot;melpa&quot;</span> <span class=o>.</span> <span class=s>&quot;http://melpa.org/packages/&quot;</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>

<span class=p>(</span><span class=nv>package-initialize</span><span class=p>)</span>
<span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nv>not</span> <span class=nv>package-archive-contents</span><span class=p>)</span>
 <span class=p>(</span><span class=nv>package-refresh-contents</span><span class=p>))</span>

<span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>material-theme</span><span class=p>))</span>

<span class=p>(</span><span class=nf>mapc</span> <span class=nf>#&#39;</span><span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>package</span><span class=p>)</span>
   <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nv>package-installed-p</span> <span class=nv>package</span><span class=p>)</span>
     <span class=p>(</span><span class=nv>package-install</span> <span class=nv>package</span><span class=p>)))</span>
     <span class=nv>myPackages</span><span class=p>)</span>

<span class=c1>;; BASIC CUSTOMIZATION</span>
<span class=c1>;; --------------------------------------</span>

<span class=p>(</span><span class=k>setq</span> <span class=nv>inhibit-startup-message</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; hide the startup message</span>
<span class=p>(</span><span class=nv>load-theme</span> <span class=ss>&#39;material</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; load material theme</span>
<span class=p>(</span><span class=nv>global-linum-mode</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; enable line numbers globally</span>

<span class=c1>;; init.el ends here</span>
</pre></div> <p>Phần đầu tiên, <code>INSTALL PACKAGES</code> sẽ cài đặt 2 package là <a href=http://melpa.org/#/better-defaults><code>better-defaults</code></a> và <a href=http://melpa.org/#/material-theme><code>material-theme</code></a>. Package <code>better-defaults</code> là tập hợp các cấu hình của Emacs thay thế cho cấu hình mặc định, nó là một cấu hình khá tốt. Package <code>material-theme</code> là một theme để tùy chỉnh giao diện của Emacs.</p> <blockquote> <p>Theme <code>material-theme</code> là theme tôi chọn cho mình, bạn hoàn toàn có thể dùng theme khác nếu muốn.</p> </blockquote> <p>Phần thứ 2 <code>BASIC CUSTOMIZATION</code> là phần tuỳ chỉnh Emacs với những việc sau:</p> <ol> <li>Tắt trang khởi động của Emacs (Trang đưa ra các thông tin và Tutorial). Khi bạn đã quen với Emacs rồi thì tôi nghĩ bạn có thể bỏ qua trang này cho đỡ rối mắt.</li> <li>Load theme material</li> <li>Bật chế độ hiển thị số dòng cho toàn bộ Emacs</li> </ol> <p>Khi bật một chế độ gì đó cho toàn bộ Emacs (ví dụ ở trên là hiện thị số dòng) thì nó sẽ được áp dụng cho tất cả các <a href=http://www.gnu.org/software/emacs/manual/html_node/elisp/Buffers.html>buffers</a>. Vì vậy, nếu bạn đang mở Python, Ruby, text, ... thì tất cả chúng đều sẽ hiển thị số dòng. Bạn hoàn toàn có thể bật chế độ này riêng cho một ngôn ngữ, ví dụ python-mode. Bạn có thể nghiên cứu thêm chi tiết cho việc này, với tôi, tôi sẽ bật hiển thị số dòng cho toàn bộ Emacs.</p> <p>Bây giờ, đã có cấu hình rồi, bạn cần tắt và bật lại Emacs để xem thay đổi. Nếu bạn đặt các file cấu hình ở đúng đường dẫn của nó, Emacs sẽ tự động đọc và sử dụng. Tuy nghiên, bạn có thể khởi động Emacs và đọc file cấu hình ở bất kỳ đâu với lệnh sau:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> emacs -q --load &lt;path to init.el&gt;
</pre></div> <p>Khi load xong, Emacs sẽ trông đẹp hơn như hình dưới.</p> <p><img alt="emacs themed" src=https://i.imgur.com/B1ZhA6w.png></p> <blockquote> <p>Lưu ý rằng, lần đầu bật Emacs sau khi cấu hình, Emacs sẽ bắt đầu quá trình cài đặt các package. Tùy thuộc vào tốc độ mạng mà quá trình này sẽ mất một chút thời gian. Có nhiều trường hợp Emacs báo lỗi không thấy package, có thể do nó chưa load được hết các package, bạn có thể dùng lệnh <code>M-x list-packages</code> để xem trong danh sách các package đã có package cần cài chưa</p> </blockquote> <p>Ảnh dưới đây là một số tính năng cơ bản của Emacs, bao gồm khả năng phân chia màn hình và tìm kiếm file.</p> <p><img alt="emacs simple features" src=https://i.imgur.com/TNOWfLd.png></p> <p>Một tính năng rất đơn giản những hữu ích của Emacs đó là có thể khả năng tìm kiếm nhanh trong một thư mục, gọi là <a href=http://www.gnu.org/software/emacs/manual/html_node/emacs/Grep-Searching.html>recursive-grep search</a> – <code>M-x rgrep</code>. Ví dụ, tôi muốn tìm tất cả các từ <code>python</code> trong các file <code>.md</code> (markdown) trong một thư mục nào đó:</p> <p><img alt="emacs rgrep" src=https://i.imgur.com/Hjj3Tv8.gif></p> <p>Vậy là những config cơ bản đã xong, bây giờ chúng ta có thể bắt đầu với những cấu hình nâng cao cho Python.</p> <h1 id=elpy-cho-viec-phat-trien-bang-python>Elpy cho việc phát triển bằng Python<a class=headerlink href=#elpy-cho-viec-phat-trien-bang-python title="Permanent link">&para;</a></h1> <p>Emacs đã có sẵn một python-mode (<code>python.el</code>), chế độ mặc định này cung cấp khả năng indent cũng như highlight cú pháp Python. Tuy nhiên, mọi tính năng vẫn chỉ ở mức cơ bản. Nếu muốn một tính năng mạnh mẽ, đầy đủ hơn cho công việc phát triển Python, chúng ta cần nhiều hơn thế. Package <a href=https://elpy.readthedocs.org/en/latest/ >elpy</a> (Emacs Lisp Python Environment) cung cấp cho chúng ta một công cụ rất đầy đủ khiến Emacs gần như một Python IDE (Integrated Development Environment) bao gồm các tính năng sau:</p> <ul> <li>Indent tự động</li> <li>Highlight cú pháp Python</li> <li>Auto-Complete</li> <li>Kiểm tra cú pháp</li> <li>Tích hợp REPL của Python</li> <li>Hỗ trợ môi trường ảo</li> <li>Và <a href=https://elpy.readthedocs.org/en/latest/ide.html>nhiều tính năng khác</a></li> </ul> <p>Để cài đặt và sử dụng elpy, chúng ta cần thêm một chút cấu hình. Và bạn cần cài đặt <code>flake8</code> và <code>jedi</code> để có thể dùng hết các tính năng của <code>elpy</code>. Bạn có thể cài đặt 2 package trên bằng cách trình quản lý package của Python, ví dụng dùng <code>pip</code> với lệnh sau:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> pip install flake8
<span class=gp>$</span> pip install jedi
</pre></div> <p>Dưới đây là cấu hình <code>elpy</code> cho Emacs</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>elpy</span> <span class=c1>;; add the elpy package</span>
   <span class=nv>material-theme</span><span class=p>))</span>
</pre></div> <p>bây giờ là kích hoạt nó</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=nv>elpy-enable</span><span class=p>)</span>
</pre></div> <p>Với cấu hình mới, bạn có thể khởi động lại Emacs và mở 1 file Python để xem kết quả</p> <p><img alt="emacs elpy basic" src=https://i.imgur.com/pp4H5z1.png></p> <p>Trong ảnh trên, bạn có thể thấy một số tính năng như:</p> <ul> <li>Tự động indent (sau khi ấn Enter sẽ tự động được indent)</li> <li>Highlight cú pháp Python Kiểm tra cú pháp (lỗi ở dòng 9)</li> <li>Auto-complete (Đưa gợi ý các method ở dòng 9)</li> </ul> <p>Bây giờ, nếu bạn muốn chạy đoạn code trên, một số IDE cho phép bạn chạy với 1 click, Emacs cũng tương tự như vậy, bạn có thể ấn <code>C-c C-c</code> và kết quả khi chạy đoạn script sẽ hiện ra</p> <p><img alt="emacs elpy execute" src=https://i.imgur.com/wyxc4jG.png></p> <p>Thông thường, những người phát triển Python đường sử dụng môi trường ảo và thực thi code trên môi trường đó. Emacs cũng cho phép làm điều này. Để sử dụng môi trường ảo trên Emacs, bạn sử dụng lệnh <code>M-x pyvenv-activate</code> và thực hiện theo hướng dẫn. Để thoát khỏi môi trường ảo, bạn sử dụng lệnh <code>M-x pyvenv-deactivate</code>. Elpy cung cấp giao diện cho phép bạn theo dõi và debug nếu gặp phải vấn đề gì đó. Bạn dùng lệnh <code>M-x elpy-config</code> để xem các cấu hình của elpy và có thể sẽ có nhiều thông tin giá trị.</p> <p><img alt="emacs elpy config" src=https://i.imgur.com/tcSafMV.png></p> <p>Vậy là những cấu hình cơ bản cho một Python IDE đã hoàn thành. Dưới đây sẽ là một số cấu hình nâng cao.</p> <blockquote> <p>Mặc định, elpy trên Emacs sẽ sử dụng Python 2. Nếu bạn muốn sử dụng Python 3 thì cần thêm config như sau:</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=k>setq</span> <span class=nv>elpy-rpc-python-command</span> <span class=s>&quot;python3&quot;</span><span class=p>)</span>
<span class=p>(</span><span class=nv>elpy-use-cpython</span> <span class=s>&quot;python3&quot;</span><span class=p>)</span>
</pre></div> </blockquote> <h1 id=mot-so-tinh-nang-mo-rong-cho-python>Một số tính năng mở rộng cho Python<a class=headerlink href=#mot-so-tinh-nang-mo-rong-cho-python title="Permanent link">&para;</a></h1> <p>Emacs cung cấp một số tính năng mở rộng cho Python cùng với những tính năng cơ bản của một IDE ở trên. Trong nội dung bài viết này, tôi không thể viết hết các tính năng mà sẽ chỉ đi vào chi tiết một số tính năng quan trọng, các tính năng khác bạn có thể tự tìm hiểu.</p> <h2 id=kiem-tra-cu-phap-tot-hon-voi-flycheck>Kiểm tra cú pháp tốt hơn với Flycheck<a class=headerlink href=#kiem-tra-cu-phap-tot-hon-voi-flycheck title="Permanent link">&para;</a></h2> <p>Mặc định Emacs và elpy sử dụng một package là <a href=https://www.gnu.org/software/emacs/manual/html_node/flymake/Overview-of-Flymake.html#Overview-of-Flymake>Flymake</a> để hỗ trợ việc kiểm tra cú pháp Python. Tuy nghiên có 1 package khác là <a href=http://www.flycheck.org/ >Flycheck</a> cung cấp khả năng kiểm tra cú pháp Python theo thời gian thực. Việc chuyển sang sử dụng Flycheck cũng rất đơn giản.</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>elpy</span>
   <span class=nv>flycheck</span> <span class=c1>;; add the flycheck package</span>
   <span class=nv>material-theme</span><span class=p>))</span>
</pre></div> <p>Và sau đó</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;flycheck</span> <span class=no>nil</span> <span class=no>t</span><span class=p>)</span>
 <span class=p>(</span><span class=k>setq</span> <span class=nv>elpy-modules</span> <span class=p>(</span><span class=nf>delq</span> <span class=ss>&#39;elpy-module-flymake</span> <span class=nv>elpy-modules</span><span class=p>))</span>
 <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;elpy-mode-hook</span> <span class=ss>&#39;flycheck-mode</span><span class=p>))</span>
</pre></div> <p>Bây giờ, bạn có thể thấy, cú pháp Python sẽ được kiểm tra theo thời gian thực, mỗi khi bạn gõ phím, Flycheck sẽ kiểm tra cú pháp cho bạn ngay lập tức.</p> <p><img alt="emacs elpy flycheck" src=https://i.imgur.com/fIiT0Jv.gif></p> <h1 id=tuan-thu-pep8-voi-autopep8>Tuân thủ PEP8 với autopep8<a class=headerlink href=#tuan-thu-pep8-voi-autopep8 title="Permanent link">&para;</a></h1> <p>Dù bạn có thích nó hay không thì nó vẫn tồn tại, đó là <a href=https://www.python.org/dev/peps/pep-0008/ >PEP8</a>, và nó cũng là một trong số các tiêu chuẩn mà cộng đồng Python thường sử dụng. Nếu bạn muốn tuân thủ nó, có một công cụ cho phép bạn làm việc đó hoàn toàn tự động. Đó là <a href=https://pypi.python.org/pypi/autopep8/ >autopep8</a>. Nó tích hợp với Emacs và bất cứ khi nào bạn lưu file - <code>C-x C-s</code> - autopep8 sẽ tự động định dạng lại file của bạn tuân thủ theo PEP 8 (bạn có thể config để tùy biến nó).</p> <p>Trước hết, bạn cần cài đặt <code>autopep8</code>, ví dụ sử dụng <code>pip</code> với lệnh sau:</p> <div class=codehilite><pre><span></span><span class=gp>$</span> pip install autopep8
</pre></div> <p>Sau đó bạn cấu hình để Emacs tính hợp autopep8.</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>elpy</span>
   <span class=nv>flycheck</span>
   <span class=nv>material-theme</span>
   <span class=nv>py-autopep8</span><span class=p>))</span> <span class=c1>;; add the autopep8 package</span>
</pre></div> <p>và</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;py-autopep8</span><span class=p>)</span>
<span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;elpy-mode-hook</span> <span class=ss>&#39;py-autopep8-enable-on-save</span><span class=p>)</span>
</pre></div> <p>Dưới đây là một demo cho tính năng này, sau khi lưu file, tất cả các lỗi liên quan đến PEP8 sẽ tự động được fix.</p> <p><img alt="emacs elpy autopep8" src=https://i.imgur.com/yWZ4tWF.gif></p> <h2 id=tich-hop-ipythonjupyter>Tích hợp IPython/Jupyter<a class=headerlink href=#tich-hop-ipythonjupyter title="Permanent link">&para;</a></h2> <p>Dưới đây là một tính năng rất thú vị. Emacs tích hợp với IPython REPL và Jupyter Notebooks. Trước hết, bạn chuyển sang IPython thay vì trình thông dịch mặc định.</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=nv>elpy-use-ipython</span><span class=p>)</span>
</pre></div> <p>Bây giờ, mỗi lần bạn chạy code Python bằng <code>C-c C-c</code> bạn sẽ thấy kết quả được thực thi bởi IPython REPL.</p> <p><img alt="emacs elpy ipython" src=https://i.imgur.com/3J77yi7.png></p> <p>Đó là một tính năng rất hữu ích, ít nhất là với tôi. Tuy nhiên tính năng hay thực sự tôi thấy đó là khả năng tích hợp notebook. Ở đây, tôi mặc định bạn đã biết cách sử dụng Jupyter Notebook rồi. (Nếu chưa biết bạn có thể <a href=http://jupyter-notebook-beginner-guide.readthedocs.org/en/latest/what_is_jupyter.html>tham khảo tài liệu này</a>). Với Emacs, chúng ta cần thêm một chút cấu hình</p> <div class=codehilite><pre><span></span><span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>ein</span> <span class=c1>;; add the ein package (Emacs ipython notebook)</span>
   <span class=nv>elpy</span>
   <span class=nv>flycheck</span>
   <span class=nv>material-theme</span>
   <span class=nv>py-autopep8</span><span class=p>))</span>
</pre></div> <p>Giao diện Jupyter Web tiêu chuẩn cho notebook rất đẹp nhưng yêu cầu bạn sử dụng nó riêng biệt không liên quan gì tới Emacs.</p> <p><img alt="jupyter web" src=https://i.imgur.com/Jelp0TG.png></p> <p>Tuy nhiên bạn có thể làm việc tương tự bằng cách kết nối và thao tác với server ngay trên Emacs.</p> <p><img alt="emacs elpy jupyter" src=https://i.imgur.com/R9iFXe4.gif></p> <h1 id=mot-so-tinh-nang-khac-cua-emacs>Một số tính năng khác của Emacs<a class=headerlink href=#mot-so-tinh-nang-khac-cua-emacs title="Permanent link">&para;</a></h1> <p>Phần trước, tôi đã trình bày những tính năng của Emacs như một Python IDE (và một số tính năng mở rộng). Trong phần này, tôi sẽ giới thiệu một số tính năng khác mà một IDE cần có.</p> <h2 id=tich-hop-git-bang-magit>Tích hợp git bằng Magit<a class=headerlink href=#tich-hop-git-bang-magit title="Permanent link">&para;</a></h2> <p>Magit là một package thuộc loại non-utility phổ biến nhất trên MELPA và được sử dụng bởi hầu hết những người dùng Emacs cần thao tác với git. Nó thực sự mạnh mẽ và để nói về nó thì nội dung 1 bài viết là không đủ. Có một <a href=https://www.masteringemacs.org/article/introduction-magit-emacs-mode-git>bài viết</a> về Magit và bạn có thể tham khảo nó để biết thêm chi tiết. Hình dưới đây lấy từ bài viết đó cho thấy khả năng tích hợp git trong Emacs tuyệt với như thế nào.</p> <p><img alt="mastering emacs magit" src=https://i.imgur.com/32CfqWQ.png></p> <h2 id=nhung-mode-khac-cua-emacs>Những mode khác của Emacs<a class=headerlink href=#nhung-mode-khac-cua-emacs title="Permanent link">&para;</a></h2> <p>Trên đây chúng ta đang nói đến Emacs để phát triển Python, tuy nhiên Emacs không chỉ hỗ trợ Python. Tôi có thể dùng Emacs để thao tác với tất cả các file Python, Golang, JavaScript, Markdown, JSON, và rất nhiều file khác nữa. Bạn có thể chỉ cần dùng Emacs, nó hỗ trợ rất tốt hầu hết các ngôn ngữ lập trình. Có một số cấu hình cho Emacs khá đầy đủ trên mạng như <a href=http://aaronbedra.com/emacs.d/ >config này</a> hay <a href=https://github.com/purcell/emacs.d>config này</a> rất đầy đủ, nó hỗ trợ nhiều ngôn ngữ mà bạn cần như:</p> <ul> <li>Python</li> <li>Golang</li> <li>Ruby</li> <li>Markdown</li> <li>YAML</li> <li>Web (HTML/JS/CSS)</li> <li>SASS</li> <li>SQL</li> <li>v.v...</li> </ul> <h2 id=emacs-trong-terminal>Emacs trong Terminal<a class=headerlink href=#emacs-trong-terminal title="Permanent link">&para;</a></h2> <p>Sau khi làm quen với Emacs, có thể bạn sẽ thích nó và muốn dùng nó ở bất cứ đâu. Nó rất đơn giản, bạn chỉ cần <code>set -o emacs</code> ở bash. Tuy nhiên, một tính năng thú vị của Emacs là nó có thể chạy cả ở giao diện dòng lệnh của Terminal. Bạn chỉ cần gõ <code>emacs -nw</code> ở bash là nó sẽ chạy Emacs với giao diện dòng lệnh.</p> <h1 id=ket-luan>Kết luận<a class=headerlink href=#ket-luan title="Permanent link">&para;</a></h1> <p>Emacs là một editor rất mạnh mẽ, có thể nói là một trong số các editor tốt nhất cho lập trình viên. Có nhiều lựa chọn khác nhau nếu bạn muốn lập trình với Python, nhưng tôi recommend bạn nên học cách sử dụng Emacs hoặc Vim bởi chúng là những môi trường phát triển đa năng. Dưới đây là config đầy đủ cho Emacs. Có thể trong những bài viết sau, tôi sẽ nói về Vim, cũng là một editor rất thú vị. Hy vọng bài viết sẽ giúp ích cho bạn trong quá trình lựa chọn IDE cho mình.</p> <div class=codehilite><pre><span></span><span class=c1>;; init.el --- Emacs configuration</span>

<span class=c1>;; INSTALL PACKAGES</span>
<span class=c1>;; --------------------------------------</span>

<span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;package</span><span class=p>)</span>

<span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;package-archives</span>
      <span class=o>&#39;</span><span class=p>(</span><span class=s>&quot;melpa&quot;</span> <span class=o>.</span> <span class=s>&quot;http://melpa.org/packages/&quot;</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>

<span class=p>(</span><span class=nv>package-initialize</span><span class=p>)</span>
<span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nv>not</span> <span class=nv>package-archive-contents</span><span class=p>)</span>
 <span class=p>(</span><span class=nv>package-refresh-contents</span><span class=p>))</span>

<span class=p>(</span><span class=k>defvar</span> <span class=nv>myPackages</span>
 <span class=o>&#39;</span><span class=p>(</span><span class=nv>better-defaults</span>
   <span class=nv>ein</span>
   <span class=nv>elpy</span>
   <span class=nv>flycheck</span>
   <span class=nv>material-theme</span>
   <span class=nv>py-autopep8</span><span class=p>))</span>

<span class=p>(</span><span class=nf>mapc</span> <span class=nf>#&#39;</span><span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>package</span><span class=p>)</span>
   <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nv>package-installed-p</span> <span class=nv>package</span><span class=p>)</span>
     <span class=p>(</span><span class=nv>package-install</span> <span class=nv>package</span><span class=p>)))</span>
     <span class=nv>myPackages</span><span class=p>)</span>

<span class=c1>;; BASIC CUSTOMIZATION</span>
<span class=c1>;; --------------------------------------</span>

<span class=p>(</span><span class=k>setq</span> <span class=nv>inhibit-startup-message</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; hide the startup message</span>
<span class=p>(</span><span class=nv>load-theme</span> <span class=ss>&#39;material</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; load material theme</span>
<span class=p>(</span><span class=nv>global-linum-mode</span> <span class=no>t</span><span class=p>)</span> <span class=c1>;; enable line numbers globally</span>

<span class=c1>;; PYTHON CONFIGURATION</span>
<span class=c1>;; --------------------------------------</span>

<span class=p>(</span><span class=nv>elpy-enable</span><span class=p>)</span>
<span class=p>(</span><span class=nv>elpy-use-ipython</span><span class=p>)</span>

<span class=c1>;; use flycheck not flymake with elpy</span>
<span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;flycheck</span> <span class=no>nil</span> <span class=no>t</span><span class=p>)</span>
 <span class=p>(</span><span class=k>setq</span> <span class=nv>elpy-modules</span> <span class=p>(</span><span class=nf>delq</span> <span class=ss>&#39;elpy-module-flymake</span> <span class=nv>elpy-modules</span><span class=p>))</span>
 <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;elpy-mode-hook</span> <span class=ss>&#39;flycheck-mode</span><span class=p>))</span>

<span class=c1>;; enable autopep8 formatting on save</span>
<span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;py-autopep8</span><span class=p>)</span>
<span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;elpy-mode-hook</span> <span class=ss>&#39;py-autopep8-enable-on-save</span><span class=p>)</span>

<span class=c1>;; init.el ends here</span>
</pre></div> </div> <div class=post-footer> <div class=tags> <i class="fa fa-tags"></i> <span>#Emacs</span> <span>#Python</span> <span>#editor</span> </div> </div> </div><div class=blog-pager> <span class=newer-link> <a href=/2015/Dec/11/web-scraping-and-crawling-with-scrapy-and-sqlalchemy.html> Newer Post </a> </span> <span class=older-link> <a href=/2015/Dec/03/test-driven-development.html> Older Post </a> </span> </div><div class=comments> <div class=finally> <p><em>I apologise for any typos. If you notice a problem, please let me know.</em> <p>Thank you all for your attention. </div> <div id=disqus_thread></div> <script src=/theme/js/disqus.min.js?81e8a5f5></script> <noscript> Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript> comments powered by Disqus. </a> </noscript> </div></div> </div> </div> <div class=sidebar-wrapper> <div class=widget> <h2>Welcome</h2> <div> <img src=/theme/images/banner.gif alt=Welcome> </div> </div><div class="widget recent-posts"> <h2>Recent Posts</h2> <ul> <li> <a href=/2019/May/20/elasticsearch-data-organization.html> <img alt="Elasticsearch: Data organization" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-data-organization.html>Elasticsearch: Data organization</a> <li> <a href=/2019/May/20/elasticsearch-intro.html> <img alt="Elasticsearch: Intro" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-intro.html>Elasticsearch: Intro</a> <li> <a href=/2019/Apr/20/javascript-popups.html> <img alt="JavaScript: Popups" src=https://i.imgur.com/FxmcwPy.png> </a> <a href=/2019/Apr/20/javascript-popups.html>JavaScript: Popups</a> <li> <a href=/2019/Mar/20/javascript-iterator-and-generator.html> <img alt="JavaScript: Iterator and generator" src=https://i.imgur.com/lev8iT9.jpg> </a> <a href=/2019/Mar/20/javascript-iterator-and-generator.html>JavaScript: Iterator and generator</a> <li> <a href=/2019/Feb/20/javascript-decorator.html> <img alt="JavaScript decorator" src=https://i.imgur.com/Sh3yLI0.png> </a> <a href=/2019/Feb/20/javascript-decorator.html>JavaScript decorator</a> </ul> </div><div class="widget labels"> <h2>Blog Archive</h2> <ul> <li> <a href=/2019/ > 2019 </a> <li> <a href=/2018/ > 2018 </a> <li> <a href=/2017/ > 2017 </a> <li> <a href=/2016/ > 2016 </a> <li> <a href=/2015/ > 2015 </a> <li> <a href=/2014/ > 2014 </a> <li> <a href=/2013/ > 2013 </a> <li> <a href=/2012/ > 2012 </a> <li> <a href=/2011/ > 2011 </a> <li> <a href=/2010/ > 2010 </a> </ul> </div><div class=widget> <h2>Twitter timeline</h2> <a class=twitter-timeline data-height=500 data-dnt=true data-theme=light href=https://twitter.com/_naa_4f data-chrome="noheader nofooter transparent noborders"> Tweets by manhhomienbienthuy </a> </div> </div> </div> <a href=# class="smooth-scroll back-to-top"> <i class="fa fa-arrow-circle-up fa-3x"></i> </a> </main> <footer> <div class=infos> <div class=wrapper> <div class=widget> <a href=/ title="manhhomienbienthuy's space" class=logo> <img alt="manhhomienbienthuy's space" src=/theme/images/logo_white.png> </a> <span class=right>I'm a hacker, enter my world...</span> </div><div class=widget> <p> Created with all my ♥ and soul, dedicated to my love, yunachan <p> Powered by <a href=http://blog.getpelican.com/ target=_blank>Pelican</a>, which takes great advantage of <a href=https://www.python.org/ target=_blank>Python</a> <p> This site content is licensed under a <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank> CC BY-NC-ND 4.0 </a> License. <p> Updated at <a target=_blank href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=2019-06-20T02:42:55"> 2019-06-20 02:42:55 </a> </div><div class=widget> <p> Hosting by <a href=https://manhhomienbienthuy.bitbucket.io/ >Bitbucket</a> and <a href=https://manhhomienbienthuy.github.io/ >Github</a>, image hosting by <a href=https://manhhomienbienthuy.imgur.com/ target=_blank>imgur</a>, <a href=https://instagram.com/manhhomienbienthuy/ target=_blank>Instagram</a> and <a href=https://photos.google.com/ target=_blank>Google Photo</a> <p> Theme based on <a href=https://vanice-veethemes.blogspot.com/ target=_blank>Vanice theme</a>, icons from <a href=https://fontawesome.com/ target=_blank>Font Awesome</a>, comments powered by <a href=https://disqus.com/home/forums/manhhomienbienthuy/ target=_blank>Disqus</a> </div> </div> </div> <div class=credits> <div class=wrapper> <div class=left> <!--
          Regarding copyright, in general, standalone pages (as
          opposed to files generated as part of manuals) on the GNU
          web server should be under CC BY-ND 4.0.  Please do NOT
          change or remove this without talking with the webmasters or
          licensing team first.  Please make sure the copyright date
          is consistent with the document.  For web pages, it is ok to
          list just the latest year the document was modified, or
          published.

          If you wish to list earlier years, that is ok too.  Either
          "2001, 2002, 2003" or "2001-2003" are ok for specifying
          years, as long as each year in the range is in fact a
          copyrightable year, i.e., a year in which the document was
          published (including being publicly visible on the web or in
          a revision control system).
        --> Copyright © 2010-2019 <a href=/pages/about-me.html><strong>manhhomienbienthuy</strong></a>. All rights reserved. </div> <div class=right> <ul> <li><a href=/ >Home</a> <li><a href=/pages/about-me.html>About</a> <li><a href=# class=smooth-scroll>Top ↑</a> </ul> </div> </div> </div></footer> <script src=https://code.jquery.com/jquery-3.2.1.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js></script> <script src=/theme/js/vpyeu.min.js?d72c87bd></script> <script id=dsq-count-scr src=https://manhhomienbienthuy.disqus.com/count.js async></script>