<!DOCTYPE html><title>Placeholder on IE8 - manhhomienbienthuy's space</title> <meta charset=utf-8> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=apple-touch-icon href=/theme/images/icon-touch.png> <link rel=icon sizes=192x192 href=/theme/images/icon-touch.png> <link rel="shortcut icon" href=/theme/images/favicon.ico> <link rel=author href=/humans.txt> <meta name=msapplication-TileImage content=/theme/images/icon-tile.png> <meta name=twitter:dnt content=on> <meta name=Author content=manhhomienbienthuy> <meta name=rating content=general> <meta name=twitter:card content=product> <meta name=twitter:site content=@_naa_4f> <meta name=twitter:creator content=@_naa_4f> <link href=/feeds/all.atom.xml type=application/atom+xml rel=alternate title="manhhomienbienthuy's space Full Atom Feed"> <meta name=description content="Việc phát triển một trang Web phải support những trình duyệt " cổ lỗ sĩ&quot; như ie8 đúng là bài toán nan giải. nhưng có những lúc chúng ta không làm không được. trong bài viết này, tôi sẽ giới thiệu một kỹ thuật có thể làm ie8 hoạt động tính …&quot;> <meta name=keywords content="IE8, IE9, placeholder, JavaScript, blog, naa, manhhomienbienthuy, pelican, static site generator"> <meta name=twitter:title content="Placeholder on IE8 - manhhomienbienthuy's space"> <meta name=twitter:description content="Việc phát triển một trang Web phải support những trình duyệt " cổ lỗ sĩ&quot; như ie8 đúng là bài toán nan giải. nhưng có những lúc chúng ta không làm không được. trong bài viết này, tôi sẽ giới thiệu một kỹ thuật có thể làm ie8 hoạt động tính …&quot;> <meta name=twitter:image content=/https://i.imgur.com/WyMHkO5.jpg> <link rel=stylesheet href=//cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css> <link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css> <link rel=stylesheet href=/theme/css/vpyeu.min.css?5d2c7d5e> <header> <div class=navbar> <div class=wrapper> <div class=nav-menu> <div class=menu-toggle> <i class="fa fa-reorder"></i> </div> <ul class=menus> <li><a href=/ >Home</a> <li><a href=/category/general.html> General <li><a href=/category/life.html> Life <li><a href=/category/programming.html class=current> Programming <li><a href=/category/travel.html> Travel </ul> </div><div class="right links"> <ul> <li> <a href=https://twitter.com/_naa_4f target=_blank> <i class="fa fa-twitter"></i> </a> <li> <a href=https://instagram.com/manhhomienbienthuy/ target=_blank> <i class="fa fa-instagram"></i> </a> <li> <a href=https://www.facebook.com/manhhomienbienthuy target=_blank> <i class="fa fa-facebook"></i> </a> <li> <a href=https://github.com/manhhomienbienthuy target=_blank> <i class="fa fa-github"></i> </a> <li> <a href=/feeds/all.atom.xml target=_blank> <i class="fa fa-rss"></i> </a> </ul> </div> </div> </div><noscript> <div class="warning head-warn"> <div class=wrapper> <p><strong>Notice:</strong> While JavaScript is not essential for this website, your interaction with the content will be limited. Please turn JavaScript on for the full experience. </div> </div> </noscript><div class=banner> <div class=wrapper> <a href=/ > <img alt="manhhomienbienthuy's space" src=/theme/images/logo.png> </a> </div> </div></header> <main> <div class=wrapper> <div class=main-wrapper> <div class=entry> <div class=entry-detail> <div class=post> <h1 class=title> Placeholder on IE8 </h1> <div class=meta> Posted in <a href=/category/programming.html>Programming</a> on October 30, 2015 by <a href=/pages/about-me.html>manhhomienbienthuy</a> <span class=right> <i class="fa fa-comments"></i> <a href=#disqus_thread data-disqus-identifier=/2015/Oct/30/placeholder-on-ie8.html> Comments </a> </span> </div> <div class=post-body> <img src=https://i.imgur.com/WyMHkO5.jpg alt="Placeholder on IE8"> <p>Việc phát triển một trang Web phải support những trình duyệt "cổ lỗ sĩ" như IE8 đúng là bài toán nan giải. Nhưng có những lúc chúng ta không làm không được. Trong bài viết này, tôi sẽ giới thiệu một kỹ thuật có thể làm IE8 hoạt động tính năng placeholder như các trình duyệt hiện đại.</p> <h1 id=boi-canh>Bối cảnh<a class=headerlink href=#boi-canh title="Permanent link">&para;</a></h1> <p>Các trình duyệt version cũ IE　8 (và cả IE　9) không support thuộc tính <code>placeholder</code> với các thẻ <code>input</code> nên cho dù có thuộc tình này thì nó cũng không hoạt động. Và bây giờ có 1 yêu cầu là phải support thuộc tính này cho IE　8, 9.</p> <h1 id=y-tuong>Ý tưởng<a class=headerlink href=#y-tuong title="Permanent link">&para;</a></h1> <p>Vì IE　8, 9 không support nên để support IE8, 9 có giao diện giống placeholder thì phải xử lý bằng JavaScript. Chúng ta sẽ thêm CSS để trông nó giống placeholder nhất.</p> <p>Có <a href=https://github.com/mathiasbynens/jquery-placeholder>một tools để làm việc này</a> nhưng nó khá nặng nề và tôi cảm thấy nó cũng chẳng hiệu quả cho lắm. Thế nên tôi quyết định sẽ tự giải quyết bằng cách của mình.</p> <p>Ý tưởng rất đơn giản. Khi người dùng không focus vào một <code>input</code> (event <code>blur</code> của JavaScript) thì tôi sẽ dùng JavaScript để set giá trị trường input đúng bằng <code>placeholder</code> của nó. Như vậy, placeholder sẽ hiện lên. Khi người dùng focus vào <code>input</code> thì tôi sẽ set giá trị của nó về rỗng để người dùng nhập liệu. Trong quá trình xử lý cần kiểm tra xem người dùng đã nhập dữ liệu chưa. Nếu đã nhập rồi thì không cần xử lý gì nữa. Ngoài ra, tôi sẽ dùng CSS để tạo hiệu ứng màu sắc giống với placeholder nhất có thể.</p> <h1 id=cach-lam>Cách làm<a class=headerlink href=#cach-lam title="Permanent link">&para;</a></h1> <h2 id=css>CSS<a class=headerlink href=#css title="Permanent link">&para;</a></h2> <p>Tôi sẽ dùng class tên là <code>placeholder</code> để đặt màu cho text trong trường <code>input</code> sao cho nó giống với placeholder thật nhất. CSS sẽ như sau:</p> <div class=codehilite><pre><span></span><span class=p>.</span><span class=nc>placeholder</span> <span class=p>{</span>
  <span class=k>color</span><span class=p>:</span> <span class=mh>#aaa</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> <h2 id=javascript>JavaScript<a class=headerlink href=#javascript title="Permanent link">&para;</a></h2> <p>Trong bài viết này, tôi sẽ code bằng CoffeeScript, nó sẽ được compile ra JavaScript nên hoạt động của nó không có gì khác nhau cả.</p> <p>Trước hết, cần kiểm tra xem trình duyệt đang dùng có phải IE　8, 9 hay không. Nếu là các trình duyệt hiện đại thì đương nhiên, chúng ta không cần làm gì cả, vì chúng đã support placeholder rồi. Chúng ta chỉ cần xử lý với IE 8, 9 mà thôi.</p> <div class=codehilite><pre><span></span><span class=nv>is_ie89 = </span><span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 8.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span> <span class=o>||</span>
  <span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 9.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span>
</pre></div> <p>Sau đó là quá trình xử lý, trước hết, khi người dùng focus vào một <code>input</code> thì cần kiểm tra người dùng đã nhập dữ liệu chưa. Nếu chưa thì xóa placeholder đi để người dùng nhập liệu mới.</p> <div class=codehilite><pre><span></span><span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;focus&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
  <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
  <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span> <span class=s>&quot;placeholder&quot;</span>
    <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
    <span class=nx>input</span><span class=p>.</span><span class=nx>removeClass</span> <span class=s>&quot;placeholder&quot;</span>
  <span class=k>return</span>
</pre></div> <p>Bây giờ, khi người dùng <code>blur</code> một trường <code>input</code> chúng ta cần show ra placeholder của nó. JavaScript sẽ xử lý bằng cách cho giá trị của input đúng bằng giá trị của placeholder, và thêm CSS cho nó giống placeholder thật.</p> <div class=codehilite><pre><span></span><span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;blur&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
  <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
  <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=s>&quot;&quot;</span> <span class=o>||</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
    <span class=nx>input</span><span class=p>.</span><span class=nx>addClass</span> <span class=s>&quot;placeholder&quot;</span>
    <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
  <span class=k>return</span>
</pre></div> <p>Và mặc định khi người dùng duyệt trang, tất cả các trường sẽ bị blur</p> <div class=codehilite><pre><span></span><span class=nx>$</span> <span class=nf>-&gt;</span>
  <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>blur</span><span class=p>()</span>
</pre></div> <p>Cần thêm một xử lý nữa. 　Đó là khi người dùng submit form. Nếu người dùng không điền gì mà submit thì dù người dùng chưa nhập gì, các trường input đều đã có dữ liệu. Nên nếu submit form, dữ liệu được gửi là placeholder của chúng. 　Đây không phải là vấn đề lớn lắm, nhưng không nên bỏ qua nó.</p> <div class=codehilite><pre><span></span><span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>parents</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>submit</span> <span class=nf>-&gt;</span>
  <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>find</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>each</span> <span class=nf>-&gt;</span>
    <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
    <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
      <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
    <span class=k>return</span>
  <span class=k>return</span>
</pre></div> <h2 id=xu-ly-cac-truong-typepassword>Xử lý các trường <code>type="password"</code><a class=headerlink href=#xu-ly-cac-truong-typepassword title="Permanent link">&para;</a></h2> <p>Với các trường <code>type="password"</code> thì khi người dùng nhập liệu sẽ không nhìn thấy dữ liệu mà chỉ thấy các chấm tròn mà thôi. Trong xử lý JavaScript ở trên cũng vậy. Nếu không xử lý thêm thì placeholder hiện ra cũng chỉ toàn là chấm tròn mà thôi. Nên với các <code>input</code> có <code>type="password"</code> cần xử lý thêm một chút.</p> <p>Có một điều khó chịu với IE　8, 9 là thuộc tính <code>type</code> của input chỉ có thể đọc mà không thể thay thế nó được. Nên quá trình xử lý hơi lằng nhằng, đó là chúng ta buộc phải thay thế toàn bộ outerHTML của trường <code>input</code> đó mới có tác dụng.</p> <p>Xử lý khi focus trường password như sau:</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&quot;user_password&quot;</span>
  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s>&quot;user_password&quot;</span><span class=p>).</span><span class=nv>outerHTML = </span><span class=s>&#39;&lt;input</span>
<span class=s>    class=&quot;form-control input-field&quot; name=&quot;user[password]&quot;</span>
<span class=s>    placeholder=&quot;パスワードを入力してください&quot; type=&quot;password&quot;&gt;&#39;</span>
  <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[type=password]&quot;</span><span class=p>).</span><span class=nx>focus</span><span class=p>()</span>
  <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[type=password]&quot;</span><span class=p>).</span><span class=nx>focus</span><span class=p>()</span>
</pre></div> <p>Xử lý này sẽ được lồng vào trong event focus đã có ở trên. Phải cẩn thận chỗ này, tôi đã loại bỏ <code>id</code> của <code>input</code> để điều kiện ở trên <code>if input.attr("id") == "user_password"</code> chỉ đúng 1 lần duy nhất khi chúng ta focus lần đầu tiên mà thôi. Sau khi thay outerHTML rồi thì nó sẽ không đúng nữa. Nếu không có thao tác này, điều kiện này luôn luôn đúng. 　Đoạn code này sẽ chạy đi chạy lại mãi mà không dừng.</p> <p>Có vẻ hơi ngu si một chút nhưng ở trên phải focus 2 lần vào input thì mới có tác dụng. Tôi không biết tại sao. IE　8 cần phải làm vậy trong khi các trình duyệt khác thì không cần.</p> <p>Xử lý <code>blur</code> với trường password như sau:</p> <div class=codehilite><pre><span></span><span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;name&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&quot;user[password]&quot;</span> <span class=o>&amp;&amp;</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=s>&quot;&quot;</span>
  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByName</span><span class=p>(</span><span class=s>&quot;user[password]&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>].</span><span class=nv>outerHTML = </span><span class=s>&#39;&lt;input</span>
<span class=s>    value=&quot;パスワードを入力してください&quot; placeholder=&quot;パスワードを入力してください&quot;</span>
<span class=s>    class=&quot;form-control input-field placeholder&quot; name=&quot;user[password]&quot; id=&quot;user_password&quot;</span>
<span class=s>    type=&quot;text&quot;&gt;&#39;</span>
</pre></div> <p>Cũng tương tự như trên, tôi phải cẩn thận khi đặt điều kiện, nếu không đoạn code sẽ lặp đi lặp lại không dừng. Tôi không thể kiểm tra <code>id</code> vì tôi đã bỏ <code>id</code> khi focus rồi. Nên tôi cần kiểm tra thuộc tính khác. Và cũng tương tự các trường hợp khác, tôi cũng kiểm tra input đã có dữ liệu hay chưa. 　Điều kiện này đồng thời cũng chỉ đúng 1 lần duy nhất là lần đầu tiên người dùng <code>blur</code>. Sau khi thay thế outerHTML, input đã có dữ liệu, chính là placeholder.</p> <p>Đoạn code hoàn chỉnh như sau:</p> <div class=codehilite><pre><span></span><span class=nx>$</span> <span class=nf>-&gt;</span>
  <span class=nv>is_ie89 = </span><span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 8.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span> <span class=o>||</span>
    <span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 9.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span>
  <span class=k>if</span> <span class=nx>is_ie89</span>
    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;focus&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
      <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
      <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&quot;user_password&quot;</span>
        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s>&quot;user_password&quot;</span><span class=p>).</span><span class=nv>outerHTML = </span><span class=s>&#39;&lt;input</span>
<span class=s>          class=&quot;form-control input-field&quot; name=&quot;user[password]&quot;</span>
<span class=s>          placeholder=&quot;パスワードを入力してください&quot; type=&quot;password&quot;&gt;&#39;</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[type=password]&quot;</span><span class=p>).</span><span class=nx>focus</span><span class=p>()</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[type=password]&quot;</span><span class=p>).</span><span class=nx>focus</span><span class=p>()</span>
      <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span> <span class=s>&quot;placeholder&quot;</span>
        <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
        <span class=nx>input</span><span class=p>.</span><span class=nx>removeClass</span> <span class=s>&quot;placeholder&quot;</span>
      <span class=k>return</span>
    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;blur&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
      <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
      <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;name&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&quot;user[password]&quot;</span> <span class=o>&amp;&amp;</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=s>&quot;&quot;</span>
        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByName</span><span class=p>(</span><span class=s>&quot;user[password]&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>].</span><span class=nv>outerHTML = </span><span class=s>&#39;&lt;input</span>
<span class=s>          value=&quot;パスワードを入力してください&quot; placeholder=&quot;パスワードを入力してください&quot;</span>
<span class=s>          class=&quot;form-control input-field placeholder&quot; name=&quot;user[password]&quot; id=&quot;user_password&quot;</span>
<span class=s>          type=&quot;text&quot;&gt;&#39;</span>
      <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=s>&quot;&quot;</span> <span class=o>||</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
        <span class=nx>input</span><span class=p>.</span><span class=nx>addClass</span> <span class=s>&quot;placeholder&quot;</span>
        <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
      <span class=k>return</span>

    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>parents</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>submit</span> <span class=nf>-&gt;</span>
      <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>find</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>each</span> <span class=nf>-&gt;</span>
        <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
        <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
          <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
        <span class=k>return</span>
      <span class=k>return</span>
  <span class=k>return</span>

<span class=nx>$</span> <span class=nf>-&gt;</span>
  <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>blur</span><span class=p>()</span>
</pre></div> <h1 id=update>Update<a class=headerlink href=#update title="Permanent link">&para;</a></h1> <p>Đoạn xử lý trên có một điểm yếu là nó chỉ sử dụng cho 1 trường password đã biết trước ID là <code>user_password</code> mà thôi. Trong trường hợp cần xử lý với nhiều trường password với các ID khác nhau thì bạn cần xử lý cho từng trường hợp giống như trường có ID <code>user_password</code> như trên. 　Đây không phải là một ý tưởng tốt.</p> <p>Vì vậy, đoạn chương trình JavaScript trên được update như sau, có thể áp dụng với tất cả các trường password có ở trên trang Web.</p> <div class=codehilite><pre><span></span><span class=nx>$</span> <span class=nf>-&gt;</span>
  <span class=nv>is_ie89 = </span><span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 8.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span> <span class=o>||</span>
    <span class=nx>navigator</span><span class=p>.</span><span class=nx>appVersion</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s>&quot;MSIE 9.&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span>
  <span class=k>if</span> <span class=nx>is_ie89</span>
    <span class=nv>input_passwords = </span><span class=p>{}</span>
    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder][type=password]&quot;</span><span class=p>).</span><span class=nx>each</span> <span class=nf>-&gt;</span>
      <span class=nx>input_passwords</span><span class=p>[</span><span class=nx>@id</span><span class=p>]</span> <span class=o>=</span> <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)[</span><span class=mi>0</span><span class=p>].</span><span class=nx>outerHTML</span>
      <span class=k>return</span>

    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;focus&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
      <span class=k>if</span> <span class=nx>input_passwords</span><span class=p>[</span><span class=nx>@id</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s>&quot;text&quot;</span>
        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=nx>@id</span><span class=p>).</span><span class=nv>outerHTML = </span><span class=nx>input_passwords</span><span class=p>[</span><span class=nx>@id</span><span class=p>]</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>focus</span><span class=p>().</span><span class=nx>focus</span><span class=p>()</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>val</span> <span class=nx>@value</span>

      <span class=k>if</span> <span class=nx>@value</span> <span class=o>==</span> <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>attr</span> <span class=s>&quot;placeholder&quot;</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>removeClass</span> <span class=s>&quot;placeholder&quot;</span>
      <span class=k>return</span>

    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>on</span> <span class=s>&quot;blur&quot;</span><span class=p>,</span> <span class=s>&quot;[placeholder]&quot;</span><span class=p>,</span> <span class=nf>-&gt;</span>
      <span class=k>if</span> <span class=nx>input_passwords</span><span class=p>[</span><span class=nx>@id</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=nx>@value</span> <span class=o>==</span> <span class=s>&quot;&quot;</span>
        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=nx>@id</span><span class=p>).</span><span class=nv>outerHTML = </span><span class=nx>input_passwords</span><span class=p>[</span><span class=nx>@id</span><span class=p>]</span>
          <span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/type=&quot;?password&quot;?/g</span><span class=p>,</span> <span class=s>&#39;type=&quot;text&quot;&#39;</span><span class=p>)</span>

      <span class=k>if</span> <span class=nx>@value</span> <span class=o>==</span> <span class=s>&quot;&quot;</span> <span class=o>||</span> <span class=nx>@value</span> <span class=o>==</span> <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>addClass</span> <span class=s>&quot;placeholder&quot;</span>
        <span class=nx>$</span><span class=p>(</span><span class=s>&quot;#&quot;</span> <span class=o>+</span> <span class=nx>@id</span><span class=p>).</span><span class=nx>val</span> <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
      <span class=k>return</span>

    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>parents</span><span class=p>(</span><span class=s>&quot;form&quot;</span><span class=p>).</span><span class=nx>submit</span> <span class=nf>-&gt;</span>
      <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>).</span><span class=nx>find</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>each</span> <span class=nf>-&gt;</span>
        <span class=nv>input = </span><span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>)</span>
        <span class=k>if</span> <span class=nx>input</span><span class=p>.</span><span class=nx>val</span><span class=p>()</span> <span class=o>==</span> <span class=nx>input</span><span class=p>.</span><span class=nx>attr</span><span class=p>(</span><span class=s>&quot;placeholder&quot;</span><span class=p>)</span>
          <span class=nx>input</span><span class=p>.</span><span class=nx>val</span> <span class=s>&quot;&quot;</span>
        <span class=k>return</span>
      <span class=k>return</span>
    <span class=nx>$</span><span class=p>(</span><span class=s>&quot;[placeholder]&quot;</span><span class=p>).</span><span class=nx>blur</span><span class=p>()</span>

  <span class=k>return</span>
</pre></div> <p>Đoạn code trên là CoffeeScript, nó sẽ được convert ra JavaScript. Chỉ cần nhúng đoạn JavaScript đó với trang Web là nó sẽ hoạt động.</p> <p>Với xử lý như trên. Mặc dù nó hoạt động không hoàn toàn giống placeholder trên các trình duyệt hiện đại, nhưng cũng có thể chấp nhận được.</p> <p><img alt=demo src=https://i.imgur.com/02E14Ev.gif></p> </div> <div class=post-footer> <div class=tags> <i class="fa fa-tags"></i> <span>#IE8</span> <span>#IE9</span> <span>#placeholder</span> <span>#JavaScript</span> </div> </div> </div><div class=blog-pager> <span class=newer-link> <a href=/2015/Nov/03/fix-macbook-pro-keyboard-backlight.html> Newer Post </a> </span> <span class=older-link> <a href=/2015/Oct/12/phu-quoc-travel.html> Older Post </a> </span> </div><div class=comments> <div class=finally> <p><em>I apologise for any typos. If you notice a problem, please let me know.</em> <p>Thank you all for your attention. </div> <div id=disqus_thread></div> <script src=/theme/js/disqus.min.js?81e8a5f5></script> <noscript> Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript> comments powered by Disqus. </a> </noscript> </div></div> </div> </div> <div class=sidebar-wrapper> <div class=widget> <h2>Welcome</h2> <div> <img src=/theme/images/banner.gif alt=Welcome> </div> </div><div class="widget recent-posts"> <h2>Recent Posts</h2> <ul> <li> <a href=/2019/May/20/elasticsearch-data-organization.html> <img alt="Elasticsearch: Data organization" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-data-organization.html>Elasticsearch: Data organization</a> <li> <a href=/2019/May/20/elasticsearch-intro.html> <img alt="Elasticsearch: Intro" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-intro.html>Elasticsearch: Intro</a> <li> <a href=/2019/Apr/20/javascript-popups.html> <img alt="JavaScript: Popups" src=https://i.imgur.com/FxmcwPy.png> </a> <a href=/2019/Apr/20/javascript-popups.html>JavaScript: Popups</a> <li> <a href=/2019/Mar/20/javascript-iterator-and-generator.html> <img alt="JavaScript: Iterator and generator" src=https://i.imgur.com/lev8iT9.jpg> </a> <a href=/2019/Mar/20/javascript-iterator-and-generator.html>JavaScript: Iterator and generator</a> <li> <a href=/2019/Feb/20/javascript-decorator.html> <img alt="JavaScript decorator" src=https://i.imgur.com/Sh3yLI0.png> </a> <a href=/2019/Feb/20/javascript-decorator.html>JavaScript decorator</a> </ul> </div><div class="widget labels"> <h2>Blog Archive</h2> <ul> <li> <a href=/2019/ > 2019 </a> <li> <a href=/2018/ > 2018 </a> <li> <a href=/2017/ > 2017 </a> <li> <a href=/2016/ > 2016 </a> <li> <a href=/2015/ > 2015 </a> <li> <a href=/2014/ > 2014 </a> <li> <a href=/2013/ > 2013 </a> <li> <a href=/2012/ > 2012 </a> <li> <a href=/2011/ > 2011 </a> <li> <a href=/2010/ > 2010 </a> </ul> </div><div class=widget> <h2>Twitter timeline</h2> <a class=twitter-timeline data-height=500 data-dnt=true data-theme=light href=https://twitter.com/_naa_4f data-chrome="noheader nofooter transparent noborders"> Tweets by manhhomienbienthuy </a> </div> </div> </div> <a href=# class="smooth-scroll back-to-top"> <i class="fa fa-arrow-circle-up fa-3x"></i> </a> </main> <footer> <div class=infos> <div class=wrapper> <div class=widget> <a href=/ title="manhhomienbienthuy's space" class=logo> <img alt="manhhomienbienthuy's space" src=/theme/images/logo_white.png> </a> <span class=right>I'm a hacker, enter my world...</span> </div><div class=widget> <p> Created with all my ♥ and soul, dedicated to my love, yunachan <p> Powered by <a href=http://blog.getpelican.com/ target=_blank>Pelican</a>, which takes great advantage of <a href=https://www.python.org/ target=_blank>Python</a> <p> This site content is licensed under a <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank> CC BY-NC-ND 4.0 </a> License. <p> Updated at <a target=_blank href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=2019-06-20T02:42:55"> 2019-06-20 02:42:55 </a> </div><div class=widget> <p> Hosting by <a href=https://manhhomienbienthuy.bitbucket.io/ >Bitbucket</a> and <a href=https://manhhomienbienthuy.github.io/ >Github</a>, image hosting by <a href=https://manhhomienbienthuy.imgur.com/ target=_blank>imgur</a>, <a href=https://instagram.com/manhhomienbienthuy/ target=_blank>Instagram</a> and <a href=https://photos.google.com/ target=_blank>Google Photo</a> <p> Theme based on <a href=https://vanice-veethemes.blogspot.com/ target=_blank>Vanice theme</a>, icons from <a href=https://fontawesome.com/ target=_blank>Font Awesome</a>, comments powered by <a href=https://disqus.com/home/forums/manhhomienbienthuy/ target=_blank>Disqus</a> </div> </div> </div> <div class=credits> <div class=wrapper> <div class=left> <!--
          Regarding copyright, in general, standalone pages (as
          opposed to files generated as part of manuals) on the GNU
          web server should be under CC BY-ND 4.0.  Please do NOT
          change or remove this without talking with the webmasters or
          licensing team first.  Please make sure the copyright date
          is consistent with the document.  For web pages, it is ok to
          list just the latest year the document was modified, or
          published.

          If you wish to list earlier years, that is ok too.  Either
          "2001, 2002, 2003" or "2001-2003" are ok for specifying
          years, as long as each year in the range is in fact a
          copyrightable year, i.e., a year in which the document was
          published (including being publicly visible on the web or in
          a revision control system).
        --> Copyright © 2010-2019 <a href=/pages/about-me.html><strong>manhhomienbienthuy</strong></a>. All rights reserved. </div> <div class=right> <ul> <li><a href=/ >Home</a> <li><a href=/pages/about-me.html>About</a> <li><a href=# class=smooth-scroll>Top ↑</a> </ul> </div> </div> </div></footer> <script src=https://code.jquery.com/jquery-3.2.1.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js></script> <script src=/theme/js/vpyeu.min.js?d72c87bd></script> <script id=dsq-count-scr src=https://manhhomienbienthuy.disqus.com/count.js async></script>