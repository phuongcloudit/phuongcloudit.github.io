<!DOCTYPE html><title>Python iterator & generator - manhhomienbienthuy's space</title> <meta charset=utf-8> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=apple-touch-icon href=/theme/images/icon-touch.png> <link rel=icon sizes=192x192 href=/theme/images/icon-touch.png> <link rel="shortcut icon" href=/theme/images/favicon.ico> <link rel=author href=/humans.txt> <meta name=msapplication-TileImage content=/theme/images/icon-tile.png> <meta name=twitter:dnt content=on> <meta name=Author content=manhhomienbienthuy> <meta name=rating content=general> <meta name=twitter:card content=product> <meta name=twitter:site content=@_naa_4f> <meta name=twitter:creator content=@_naa_4f> <link href=/feeds/all.atom.xml type=application/atom+xml rel=alternate title="manhhomienbienthuy's space Full Atom Feed"> <meta name=description content="Trong bài viết này, chúng ta sẽ tìm hiểu một số khái niệm rất thông dụng trong Python nhưng cũng thường bị bỏ qua nên có thể dẫn đến những hiểu sai nhất định. Những khái niệm đó chính là iterator và generator. Chúng được sử dụng thường xuyên nên …"> <meta name=keywords content="Python, fundamental, programming, iterator, generator, blog, naa, manhhomienbienthuy, pelican, static site generator"> <meta name=twitter:title content="Python iterator & generator - manhhomienbienthuy's space"> <meta name=twitter:description content="Trong bài viết này, chúng ta sẽ tìm hiểu một số khái niệm rất thông dụng trong Python nhưng cũng thường bị bỏ qua nên có thể dẫn đến những hiểu sai nhất định. Những khái niệm đó chính là iterator và generator. Chúng được sử dụng thường xuyên nên …"> <meta name=twitter:image content=/https://i.imgur.com/6Q3UDiW.png> <link rel=stylesheet href=//cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css> <link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css> <link rel=stylesheet href=/theme/css/vpyeu.min.css?5d2c7d5e> <header> <div class=navbar> <div class=wrapper> <div class=nav-menu> <div class=menu-toggle> <i class="fa fa-reorder"></i> </div> <ul class=menus> <li><a href=/ >Home</a> <li><a href=/category/general.html> General <li><a href=/category/life.html> Life <li><a href=/category/programming.html class=current> Programming <li><a href=/category/travel.html> Travel </ul> </div><div class="right links"> <ul> <li> <a href=https://twitter.com/_naa_4f target=_blank> <i class="fa fa-twitter"></i> </a> <li> <a href=https://instagram.com/manhhomienbienthuy/ target=_blank> <i class="fa fa-instagram"></i> </a> <li> <a href=https://www.facebook.com/manhhomienbienthuy target=_blank> <i class="fa fa-facebook"></i> </a> <li> <a href=https://github.com/manhhomienbienthuy target=_blank> <i class="fa fa-github"></i> </a> <li> <a href=/feeds/all.atom.xml target=_blank> <i class="fa fa-rss"></i> </a> </ul> </div> </div> </div><noscript> <div class="warning head-warn"> <div class=wrapper> <p><strong>Notice:</strong> While JavaScript is not essential for this website, your interaction with the content will be limited. Please turn JavaScript on for the full experience. </div> </div> </noscript><div class=banner> <div class=wrapper> <a href=/ > <img alt="manhhomienbienthuy's space" src=/theme/images/logo.png> </a> </div> </div></header> <main> <div class=wrapper> <div class=main-wrapper> <div class=entry> <div class=entry-detail> <div class=post> <h1 class=title> Python iterator & generator </h1> <div class=meta> Posted in <a href=/category/programming.html>Programming</a> on January 05, 2016 by <a href=/pages/about-me.html>manhhomienbienthuy</a> <span class=right> <i class="fa fa-comments"></i> <a href=#disqus_thread data-disqus-identifier=/2016/Jan/05/python-iterator-generator.html> Comments </a> </span> </div> <div class=post-body> <img src=https://i.imgur.com/6Q3UDiW.png alt="Python iterator & generator"> <p>Trong bài viết này, chúng ta sẽ tìm hiểu một số khái niệm rất thông dụng trong Python nhưng cũng thường bị bỏ qua nên có thể dẫn đến những hiểu sai nhất định. Những khái niệm đó chính là iterator và generator. Chúng được sử dụng thường xuyên nên việc hiểu để sử dụng chúng cho đúng là rất cần thiết.</p> <h1 id=iterator>Iterator<a class=headerlink href=#iterator title="Permanent link">&para;</a></h1> <p>Chúng ta có thể sử dụng vòng lặp <code>for</code> để duyệt qua các phần tử của một list:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]:</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>1</span>
<span class=go>2</span>
<span class=go>3</span>
<span class=go>4</span>
</pre></div> <p>Nếu chúng ta sử dụng <code>for</code> cho một string, chúng ta sẽ duyệt qua các ký tự của nó:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=s2>&quot;python&quot;</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>p</span>
<span class=go>y</span>
<span class=go>t</span>
<span class=go>h</span>
<span class=go>o</span>
<span class=go>n</span>
</pre></div> <p>Nếu chúng ta sử dụng một dict, chúng ta sẽ duyệt qua các key của nó:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;x&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&quot;y&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}:</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=n>k</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>y</span>
<span class=go>x</span>
</pre></div> <p>Nếu chúng ta sử dụng một file, chúng ta sẽ duyệt qua các dòng trong file đó:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;a.txt&quot;</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>first line</span>
<span class=go>second line</span>
</pre></div> <p>Có rất nhiều đối tượng chúng ta có thể sử dụng vòng lặp <code>for</code>. Những đối tượng đó gọi là những đối tượng "iterable". Và thao tác duyệt qua những đối tượng này gọi là iteration.</p> <p>Có một số hàm dựng sẵn có Python cho phép thao tác với những đối tượng này:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=s2>&quot;a&quot;</span><span class=p>,</span> <span class=s2>&quot;b&quot;</span><span class=p>,</span> <span class=s2>&quot;c&quot;</span><span class=p>])</span>
<span class=go>&#39;a,b,c&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>({</span><span class=s2>&quot;x&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&quot;y&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span>
<span class=go>&#39;y,x&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=s2>&quot;python&quot;</span><span class=p>)</span>
<span class=go>[&#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>({</span><span class=s2>&quot;x&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&quot;y&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span>
<span class=go>[&#39;y&#39;, &#39;x&#39;]</span>
</pre></div> <p>Vậy, ở sâu bên trong, Python làm thế nào để có thể duyệt qua những đối tượng này. Đó chính là điều chúng ta sẽ tìm hiểu trong phần tiếp theo đây.</p> <h2 id=giao-thuc-interation>Giao thức interation<a class=headerlink href=#giao-thuc-interation title="Permanent link">&para;</a></h2> <p>Những đối tượng "iterable" có thể được duyệt qua các phần tử, bởi vì chúng được cài đặt phương thức <code>__iter__</code>. Phương thức này sẽ trả về một đối tượng iterator. Đối tượng này cần phải hỗ trợ giao thức iteration (sẽ được nói đến sau). Nếu một đối tượng "iterable" có nhiều kiểu duyệt phần tử khác nhau, có thể chúng ta sẽ cần thêm các xử lý để xác định iterator. (Ví dụ một đồ thị có thể duyệt theo chiều rộng và theo chiều sâu.)</p> <p>Với đối tượng iterator, nó cần phải được cài đặt hai phương thức sau, và bộ hai phương thức này được gọi là <strong>giao thức iteration</strong>.</p> <ul> <li>Phương thức <code>__iter__</code> trả về chính đối tượng iterator. Phương thức này được yêu cầu cài đặt cho cả đối tượng "iterable" và iterator để có thể sử dụng các câu lệnh <code>for</code> và <code>in</code>.</li> <li>Phương thức <code>__next__</code> (ở Python 2 là <code>next</code>) trả về phần tử tiếp theo. Nếu không còn phần tử nào nữa thì <code>StopIteration</code> exception sẽ được raise.</li> </ul> <p>Một hàm dựng sẵn của Python là <code>iter</code> nhận đầu vào là một đối tượng "iterable" và trả về kết quả là một iterator.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>x</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>x</span>
<span class=go>&lt;list_iterator object at 0x7f24ee1a7a90&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>x</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>x</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>2</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>x</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>3</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>x</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>&quot;&lt;stdin&gt;&quot;</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>StopIteration</span>
</pre></div> <p>Mỗi khi chúng ta gọi phương thức <code>__next__</code> (ở Python 2 là <code>next</code>) thì iterator sẽ trả cho chúng ta phần tử tiếp theo của nó. Nếu không còn phần tử nào trong iterator, <code>StopIteration</code> sẽ được trả về.</p> <p>Chúng ta có thể tự cài đặt iterator là một class. Ví dụ dưới đây là một iterator hoạt động tương tự như hàm <code>range</code> có sẵn của Python.</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>yrange</span><span class=p>:</span>

    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>n</span> <span class=o>=</span> <span class=n>n</span>

    <span class=k>def</span> <span class=nf>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span> <span class=nf>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>n</span><span class=p>:</span>
            <span class=n>i</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>i</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
            <span class=k>return</span> <span class=n>i</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopIteration</span><span class=p>()</span>
</pre></div> <p>Phương thức <code>__iter__</code> sẽ làm đối tượng trở thành đối tượng "iterable". Về bản chất, hàm <code>iter</code> sẽ gọi đến phương thức <code>__iter__</code> này của mỗi đối tượng.</p> <p>Giá trị trả về của <code>__iter__</code> là một iterator. Nó cần có phương thức <code>__next__</code> và cần trả về <code>StopIteration</code> nếu không còn phần thử nào nữa.</p> <p>Hãy thử với ví dụ trên:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>y</span> <span class=o>=</span> <span class=n>yrange</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>0</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>2</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>&quot;&lt;stdin&gt;&quot;</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
  File <span class=nb>&quot;&lt;stdin&gt;&quot;</span>, line <span class=m>14</span>, in <span class=n>next</span>
<span class=gr>StopIteration</span>
</pre></div> <p>Có nhiều hàm dựng sẵn của Python cho nhận tham số đầu vào là iterator. Ví dụ:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>yrange</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=go>[0, 1, 2, 3, 4]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>sum</span><span class=p>(</span><span class=n>yrange</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=go>10</span>
</pre></div> <p>Trong các ví dụ trên, iterator và đối tượng "iterable" là một. Bởi vì phương thức <code>__iter__</code> chỉ đơn giản là trả về <code>self</code>. Không phải trường hợp nào iterator và đối tượng "iterable" cũng là một, như ví dụ dưới đây:</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>zrange</span><span class=p>:</span>

    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>n</span> <span class=o>=</span> <span class=n>n</span>

    <span class=k>def</span> <span class=nf>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>zrange_iter</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>n</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>zrange_iter</span><span class=p>:</span>

    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>n</span> <span class=o>=</span> <span class=n>n</span>

    <span class=k>def</span> <span class=nf>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Iterators are iterables too.</span>
        <span class=c1># Adding this functions to make them so.</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span> <span class=nf>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>n</span><span class=p>:</span>
            <span class=n>i</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>i</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
            <span class=k>return</span> <span class=n>i</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopIteration</span><span class=p>()</span>
</pre></div> <p>Iterator của Python có một đặc điểm là nó chỉ có thể được duyệt qua 1 lần. Nên nếu đã duyệt qua phần tử nào rồi thì bạn không thể duyệt qua nó thêm lần nào nữa.</p> <p>Vì đặc điểm trên, nên nếu iterator và đối tượng "iterable" là một, thì nó cũng chỉ có thể thực hiện iteration một lần. Nhưng nếu chúng không phải là một, thì bạn có thể thực hiện bao nhiêu lần tùy ý.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>y</span> <span class=o>=</span> <span class=n>yrange</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
<span class=go>[0, 1, 2, 3, 4]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
<span class=go>[]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>z</span> <span class=o>=</span> <span class=n>zrange</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>z</span><span class=p>)</span>
<span class=go>[0, 1, 2, 3, 4]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>z</span><span class=p>)</span>
<span class=go>[0, 1, 2, 3, 4]</span>
</pre></div> <h1 id=generator>Generator<a class=headerlink href=#generator title="Permanent link">&para;</a></h1> <p>Generator là cách đơn giản để tạo ra iterator. Một generator là một hàm trả kết quả về là một chuỗi kết quả thay vì một giá trị duy nhất.</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>yrange</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=k>while</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
        <span class=k>yield</span> <span class=n>i</span>
        <span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
</pre></div> <p>Mỗi lần lệnh <code>yield</code> được chạy, nó sẽ sinh ra một giá trị mới. (Vì thế nó mới được gọi là generator)</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>y</span> <span class=o>=</span> <span class=n>yrange</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span>
<span class=go>&lt;generator object yrange at 0x7f80c2f816d0&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>0</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>2</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>y</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>&quot;&lt;stdin&gt;&quot;</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>StopIteration</span>
</pre></div> <p>Một generator cũng là một iterator nên bạn không cần phải lo lắng về giao thức iteration.</p> <blockquote> <p>Từ generator được sử dụng cho cả hàm (hàm generator là hàm đã nói ở trên) và kết quả mà hàm đó sinh ra (đối tượng được hàm generator sinh ra cũng được gọi là generator). Vì vậy đôi khi việc này gây khó hiểu một chút.</p> </blockquote> <p>Vậy một generator hoạt động như thế nào? Khi hàm generator được gọi, nó trả kết quả là một đối tượng generator và không thực sự gọi và thực thi hàm. Khi phương thức <code>__next__</code> được gọi, hàm generator sẽ bắt đầu chạy, cho tới khi nó gặp lệnh <code>yield</code>. Giá trị được <code>yield</code> sẽ được trả về cho hàm <code>__next__</code>.</p> <p>Ví dụ dưới đây minh họa quá trình tương tác giữa <code>yield</code> và <code>__next__</code> trong một đối tượng generator.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>foo</span><span class=p>():</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=s2>&quot;begin&quot;</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>print</span><span class=p>(</span><span class=s2>&quot;before yield&quot;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<span class=gp>... </span>        <span class=k>yield</span> <span class=n>i</span>
<span class=gp>... </span>        <span class=k>print</span><span class=p>(</span><span class=s2>&quot;after yield&quot;</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>print</span><span class=p>(</span><span class=s2>&quot;end&quot;</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span> <span class=o>=</span> <span class=n>foo</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>begin</span>
<span class=go>before yield 0</span>
<span class=go>0</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>after yield 0</span>
<span class=go>before yield 1</span>
<span class=go>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>after yield 1</span>
<span class=go>before yield 2</span>
<span class=go>2</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span><span class=o>.</span><span class=n>__next__</span><span class=p>()</span>
<span class=go>after yield 2</span>
<span class=go>end</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>&quot;&lt;stdin&gt;&quot;</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>StopIteration</span>
</pre></div> <p>Dưới đây là một ví dụ khác:</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>integers</span><span class=p>():</span>
    <span class=sd>&quot;&quot;&quot;Infinite sequence of integers.&quot;&quot;&quot;</span>
    <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
        <span class=k>yield</span> <span class=n>i</span>
        <span class=n>i</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>

<span class=k>def</span> <span class=nf>squares</span><span class=p>():</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>integers</span><span class=p>():</span>
        <span class=k>yield</span> <span class=n>i</span> <span class=o>*</span> <span class=n>i</span>

<span class=k>def</span> <span class=nf>take</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>seq</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Returns first n values from the given sequence.&quot;&quot;&quot;</span>
    <span class=n>seq</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>seq</span><span class=p>)</span>
    <span class=n>result</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
            <span class=n>result</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>seq</span><span class=o>.</span><span class=fm>__next__</span><span class=p>())</span>
    <span class=k>except</span> <span class=ne>StopIteration</span><span class=p>:</span>
        <span class=k>pass</span>
    <span class=k>return</span> <span class=n>result</span>

<span class=nb>print</span><span class=p>(</span><span class=n>take</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=n>squares</span><span class=p>()))</span>
<span class=c1># prints [1, 4, 9, 16, 25]</span>
</pre></div> <h1 id=bieu-thuc-generator>Biểu thức generator<a class=headerlink href=#bieu-thuc-generator title="Permanent link">&para;</a></h1> <p>Biểu thức generator là một biến thể của list comprehension. Nó trông rất giống list comprehension nhưng nó trả về một generator thay vì một list.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>a</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>a</span>
<span class=go>&lt;generator object &lt;genexpr&gt; at 0x7f07242b16d0&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>sum</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=go>285</span>
</pre></div> <p>Chúng ta có thể sử dụng biểu thức generator như tham số của một số hàm đối với iterator:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>sum</span><span class=p>((</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)))</span>
<span class=go>285</span>
</pre></div> <p>Nếu chỉ có một generator được truyền vào hàm, thì chúng ta có thể bỏ bớt dấu ngoặc của biểu thức generator:</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>sum</span><span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
<span class=go>285</span>
</pre></div> <p>Một ví dụ rất thú vị khác. Giả sử chúng ta cần tìm <code>n</code> bộ ba số Pythagoras. Một bộ 3 số (x, y, z) được gọi là bộ ba số Pythagoras nếu <code>x*x + y*y = z*z</code>.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>pyt</span> <span class=o>=</span> <span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span> <span class=k>for</span> <span class=n>z</span> <span class=ow>in</span> <span class=n>integers</span><span class=p>()</span>
<span class=gp>... </span>       <span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
<span class=gp>... </span>       <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<span class=gp>... </span>       <span class=k>if</span> <span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>y</span> <span class=o>==</span> <span class=n>z</span> <span class=o>*</span> <span class=n>z</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>take</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=n>pyt</span><span class=p>)</span>
<span class=go>[(3, 4, 5), (6, 8, 10), (5, 12, 13), (9, 12, 15), (8, 15, 17), (12, 16, 20), (15, 20, 25), (7, 24, 25), (10, 24, 26), (20, 21, 29)]</span>
</pre></div> <h1 id=tai-sao-nen-su-dung-generator>Tại sao nên sử dụng generator<a class=headerlink href=#tai-sao-nen-su-dung-generator title="Permanent link">&para;</a></h1> <p>Việc sử dụng generator sẽ đem lại nhiều tác dụng rất lớn.</p> <h2 id=on-gian-hoa-code>Đơn giản hóa code<a class=headerlink href=#on-gian-hoa-code title="Permanent link">&para;</a></h2> <p>Đơn giản hóa code là một kết quả của hàm và biểu thức generator. Để minh họa cho việc này, chúng ta sẽ lấy một ví dụ cụ thể.</p> <p>Chúng ta sẽ so sánh việc cài đặt hàm <code>firstn</code> (hàm trả về <code>n</code> số nguyên không âm đầu tiên) với <code>n</code> có thể rất lớn và giả sử rằng mỗi số cần một lượng bộ nhớ tương đối nhiều.</p> <p>Đầu tiên, một cách làm thông thường đó là sử dụng list:</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>firstn</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>num</span><span class=p>,</span> <span class=n>nums</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=p>[]</span>
    <span class=k>while</span> <span class=n>num</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
        <span class=n>nums</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
        <span class=n>num</span> <span class=o>+=</span> <span class=mi>1</span>
    <span class=k>return</span> <span class=n>nums</span>

<span class=n>sum_of_first_n</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>firstn</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
</pre></div> <p>Đoạn code trên đơn giản và dễ hiểu. Tất nhiên là nó hoạt động tốt, ngoại trừ một vấn đề nhỏ là nó lưu toàn bộ list trong bộ nhớ. Trong phần lớn các trường hợp, điều đó là không hay khi phải sử dụng đến dung lượng bộ nhớ lớn đến vậy.</p> <p>Bây giờ, chúng ta thử sử dụng iterator. Dưới đây là một cài đặt cho việc này.</p> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>firstn</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>n</span> <span class=o>=</span> <span class=n>n</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>nums</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=p>[]</span>

    <span class=k>def</span> <span class=nf>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span> <span class=nf>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>num</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>n</span><span class=p>:</span>
            <span class=n>cur</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>num</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>num</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>num</span> <span class=o>+</span> <span class=mi>1</span>
            <span class=k>return</span> <span class=n>cur</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopIteration</span><span class=p>()</span>

<span class=n>sum_of_first_n</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>firstn</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
</pre></div> <p>Đoạn code trên đã hoạt động như chúng ta mong muốn, nhưng nó có một số vấn đề như:</p> <ul> <li>Có nhiều mẫu dựng sẵn được sử dụng</li> <li>Logic được thể hiện một cách phức tạp</li> <li>Code mới quá dài chỉ để xây dựng một iterator</li> </ul> <p>Chúng ta có thể sử dụng generator để xây dựng iterator ngắn gọn hơn. Chúng ta có thể cài đặt như sau:</p> <div class=codehilite><pre><span></span><span class=k>def</span> <span class=nf>firstn</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>num</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=k>while</span> <span class=n>num</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
        <span class=k>yield</span> <span class=n>num</span>
        <span class=n>num</span> <span class=o>+=</span> <span class=mi>1</span>

<span class=n>sum_of_first_n</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>firstn</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
</pre></div> <blockquote> <p>Hàm <code>firstn</code> ở trên chỉ là một ví dụ minh họa. Python có hàm dựng sẵn là <code>range</code> hoạt động tương tự như vậy. Tất nhiên là thực tế chúng ta nên sử dụng hàm dựng sẵn này.</p> </blockquote> <h2 id=nang-cao-hieu-suat>Nâng cao hiệu suất<a class=headerlink href=#nang-cao-hieu-suat title="Permanent link">&para;</a></h2> <p>Việc sử dụng generator có thể nâng cao hiệu suất bởi vì generator chỉ thực sự sinh kết quả khi được gọi. Do đó, nó sẽ sử dụng ít bộ nhớ hơn. Ngoài ra, chúng ta không cần phải chờ tất cả các phần tử của nó được sinh ra hết mới có thể sử dụng. Chúng sẽ được sinh trong quá trình chúng ta gọi generator. Đây là những hiệu quả đạt được khi chúng ta sử dụng iterator, mà generator là cách ngắn gọn để tạo ra một iterator.</p> <p>Để minh họa, chúng ta sẽ so sánh hai hàm dựng sẵn của Python 2 là <code>range</code> và <code>xrange</code>.</p> <p>Cả <code>range</code> và <code>xrange</code> đều biểu thị một khoảng các số nguyên. Tuy nhiên, <code>range</code> trả về một list còn <code>xrange</code> trả về một generator.</p> <p>Bây giờ, chúng ta sẽ tính tổng của 1 triệu số nguyên không âm đầu tiên.</p> <div class=codehilite><pre><span></span><span class=c1># using non-generator</span>
<span class=n>sum_of_first_n</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>

<span class=c1># using generator</span>
<span class=n>sum_of_first_n</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>xrange</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
</pre></div> <p>Hai dòng code trông khá giống nhau. Tuy nhiên việc sử dụng <code>range</code> tốn bộ nhớ và thời gian hơn.</p> <p>Khi chúng ta sử dụng <code>range</code>, nó sẽ xây dựng list 1 triệu phần tử và sau đó tính tổng của chúng. Việc này rất lãng phí bộ nhớ vì chúng ta chỉ cần tính tổng của chúng mà thôi. Sự lãng phí càng tăng lên khi số lượng phần tử tăng lên và kích thước mỗi phần tử cũng lớn hơn.</p> <p>Vì những lợi ích của generator mà trong Python 3, hàm <code>range</code> hoạt động giống với <code>xrange</code> của Python 2, tức là nó sẽ trả về generator chứ không phải là list.</p> <p><strong>Lưu ý</strong> đặc điểm của iterator là nó chỉ duyệt qua một lần, nên việc sử dụng generator sẽ đem lại hiệu quả nếu chúng ta không có nhu cầu duyệt nó nhiều hơn 1 lần.</p> <p>Hãy xem xét ví dụ sau:</p> <div class=codehilite><pre><span></span><span class=n>a</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>xrange</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
<span class=n>p</span> <span class=o>=</span> <span class=n>product</span><span class=p>(</span><span class=nb>xrange</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
</pre></div> <p>Giả sử rằng việc sinh một số rất tốn thời gian và bộ nhớ, thì trong ví dụ trên, chúng ta đã thực hiện công việc tốn kém này 2 lần. Trong trường hợp này, việc sử dụng list và lưu sẵn trong bộ nhớ có vẻ hiệu quả hơn.</p> <div class=codehilite><pre><span></span><span class=n>nums</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>xrange</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>
<span class=n>a</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>nums</span><span class=p>)</span>
<span class=n>p</span> <span class=o>=</span> <span class=n>product</span><span class=p>(</span><span class=n>nums</span><span class=p>)</span>
</pre></div> <p>Vì vậy việc lựa chọn sử dụng generator hay không phụ thuộc nhiều vào thực tế yêu cầu của công việc. Nên bạn hãy suy nghĩ và lựa chọn cẩn thận.</p> <h1 id=itertools>Itertools<a class=headerlink href=#itertools title="Permanent link">&para;</a></h1> <p>Module <code>itertools</code> là thư viện chuẩn của Python. Nó cung cấp cho chúng ta rất nhiều công cụ để làm việc với các iterator.</p> <p>Trong bài viết này, chúng ta sẽ điểm qua một số hàm thú vị.</p> <p><strong><code>chain</code></strong> sẽ gộp các iterator với nhau tạo thành một iterator.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>it1</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>it2</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>itertools</span><span class=o>.</span><span class=n>chain</span><span class=p>(</span><span class=n>it1</span><span class=p>,</span> <span class=n>it2</span><span class=p>)</span>
<span class=go>&lt;itertools.chain object at 0x7f9592192278&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>chain</span><span class=p>(</span><span class=n>it1</span><span class=p>,</span> <span class=n>it2</span><span class=p>))</span>
<span class=go>[1, 2, 3, 4, 5, 6]</span>
</pre></div> <p><strong><code>dropwhile</code></strong> trả về kết quả là một iterator từ một đối tượng "iterable" bằng cách loại bỏ các phần tử ở đầu đối tượng iterable thỏa mãn điều kiện nào đó. Kể từ lúc điều kiện được thỏa mãn, nó sẽ trả về các phần tử từ đó trở đi.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>itertools</span><span class=o>.</span><span class=n>dropwhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
<span class=go>&lt;itertools.dropwhile object at 0x7f46c544a708&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>dropwhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>[6, 4, 1]</span>
</pre></div> <p><strong><code>takewhile</code></strong> có phần ngược với <code>dropwhile</code>, nó trả về một iterator bằng cách lấy ra các phần tử từ đối tượng "iterable" chừng nào điều kiện còn được thỏa mãn.</p> <div class=codehilite><pre><span></span><span class=gp>&gt;&gt;&gt; </span><span class=n>itertools</span><span class=o>.</span><span class=n>takewhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
<span class=go>&lt;itertools.takewhile object at 0x7f46c544a7c8&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>takewhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>[1, 4]</span>
</pre></div> </div> <div class=post-footer> <div class=tags> <i class="fa fa-tags"></i> <span>#Python</span> <span>#fundamental</span> <span>#programming</span> <span>#iterator</span> <span>#generator</span> </div> </div> </div><div class=blog-pager> <span class=newer-link> <a href=/2016/Jan/11/advanced-web-scraping-and-crawling-with-scrapy-and-sqlalchemy.html> Newer Post </a> </span> <span class=older-link> <a href=/2015/Dec/31/the-year-in-review-2015.html> Older Post </a> </span> </div><div class=comments> <div class=finally> <p><em>I apologise for any typos. If you notice a problem, please let me know.</em> <p>Thank you all for your attention. </div> <div id=disqus_thread></div> <script src=/theme/js/disqus.min.js?81e8a5f5></script> <noscript> Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript> comments powered by Disqus. </a> </noscript> </div></div> </div> </div> <div class=sidebar-wrapper> <div class=widget> <h2>Welcome</h2> <div> <img src=/theme/images/banner.gif alt=Welcome> </div> </div><div class="widget recent-posts"> <h2>Recent Posts</h2> <ul> <li> <a href=/2019/May/20/elasticsearch-data-organization.html> <img alt="Elasticsearch: Data organization" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-data-organization.html>Elasticsearch: Data organization</a> <li> <a href=/2019/May/20/elasticsearch-intro.html> <img alt="Elasticsearch: Intro" src=https://i.imgur.com/JT4y7Qf.jpg> </a> <a href=/2019/May/20/elasticsearch-intro.html>Elasticsearch: Intro</a> <li> <a href=/2019/Apr/20/javascript-popups.html> <img alt="JavaScript: Popups" src=https://i.imgur.com/FxmcwPy.png> </a> <a href=/2019/Apr/20/javascript-popups.html>JavaScript: Popups</a> <li> <a href=/2019/Mar/20/javascript-iterator-and-generator.html> <img alt="JavaScript: Iterator and generator" src=https://i.imgur.com/lev8iT9.jpg> </a> <a href=/2019/Mar/20/javascript-iterator-and-generator.html>JavaScript: Iterator and generator</a> <li> <a href=/2019/Feb/20/javascript-decorator.html> <img alt="JavaScript decorator" src=https://i.imgur.com/Sh3yLI0.png> </a> <a href=/2019/Feb/20/javascript-decorator.html>JavaScript decorator</a> </ul> </div><div class="widget labels"> <h2>Blog Archive</h2> <ul> <li> <a href=/2019/ > 2019 </a> <li> <a href=/2018/ > 2018 </a> <li> <a href=/2017/ > 2017 </a> <li> <a href=/2016/ > 2016 </a> <li> <a href=/2015/ > 2015 </a> <li> <a href=/2014/ > 2014 </a> <li> <a href=/2013/ > 2013 </a> <li> <a href=/2012/ > 2012 </a> <li> <a href=/2011/ > 2011 </a> <li> <a href=/2010/ > 2010 </a> </ul> </div><div class=widget> <h2>Twitter timeline</h2> <a class=twitter-timeline data-height=500 data-dnt=true data-theme=light href=https://twitter.com/_naa_4f data-chrome="noheader nofooter transparent noborders"> Tweets by manhhomienbienthuy </a> </div> </div> </div> <a href=# class="smooth-scroll back-to-top"> <i class="fa fa-arrow-circle-up fa-3x"></i> </a> </main> <footer> <div class=infos> <div class=wrapper> <div class=widget> <a href=/ title="manhhomienbienthuy's space" class=logo> <img alt="manhhomienbienthuy's space" src=/theme/images/logo_white.png> </a> <span class=right>I'm a hacker, enter my world...</span> </div><div class=widget> <p> Created with all my ♥ and soul, dedicated to my love, yunachan <p> Powered by <a href=http://blog.getpelican.com/ target=_blank>Pelican</a>, which takes great advantage of <a href=https://www.python.org/ target=_blank>Python</a> <p> This site content is licensed under a <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank> CC BY-NC-ND 4.0 </a> License. <p> Updated at <a target=_blank href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=2019-06-20T02:42:55"> 2019-06-20 02:42:55 </a> </div><div class=widget> <p> Hosting by <a href=https://manhhomienbienthuy.bitbucket.io/ >Bitbucket</a> and <a href=https://manhhomienbienthuy.github.io/ >Github</a>, image hosting by <a href=https://manhhomienbienthuy.imgur.com/ target=_blank>imgur</a>, <a href=https://instagram.com/manhhomienbienthuy/ target=_blank>Instagram</a> and <a href=https://photos.google.com/ target=_blank>Google Photo</a> <p> Theme based on <a href=https://vanice-veethemes.blogspot.com/ target=_blank>Vanice theme</a>, icons from <a href=https://fontawesome.com/ target=_blank>Font Awesome</a>, comments powered by <a href=https://disqus.com/home/forums/manhhomienbienthuy/ target=_blank>Disqus</a> </div> </div> </div> <div class=credits> <div class=wrapper> <div class=left> <!--
          Regarding copyright, in general, standalone pages (as
          opposed to files generated as part of manuals) on the GNU
          web server should be under CC BY-ND 4.0.  Please do NOT
          change or remove this without talking with the webmasters or
          licensing team first.  Please make sure the copyright date
          is consistent with the document.  For web pages, it is ok to
          list just the latest year the document was modified, or
          published.

          If you wish to list earlier years, that is ok too.  Either
          "2001, 2002, 2003" or "2001-2003" are ok for specifying
          years, as long as each year in the range is in fact a
          copyrightable year, i.e., a year in which the document was
          published (including being publicly visible on the web or in
          a revision control system).
        --> Copyright © 2010-2019 <a href=/pages/about-me.html><strong>manhhomienbienthuy</strong></a>. All rights reserved. </div> <div class=right> <ul> <li><a href=/ >Home</a> <li><a href=/pages/about-me.html>About</a> <li><a href=# class=smooth-scroll>Top ↑</a> </ul> </div> </div> </div></footer> <script src=https://code.jquery.com/jquery-3.2.1.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js></script> <script src=/theme/js/vpyeu.min.js?d72c87bd></script> <script id=dsq-count-scr src=https://manhhomienbienthuy.disqus.com/count.js async></script>